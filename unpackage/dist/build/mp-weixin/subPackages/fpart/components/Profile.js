"use strict";const a=require("../../../common/vendor.js"),e=require("../../../common/assets.js"),o=require("../../../stores/level.js");Math||n();const n=()=>"./VideoUploadModal.js",i={__name:"Profile",props:{applicationInfo:{type:Object,default:null}},setup(n){const i=n,t=o.useLevelStore(),l=a.ref(!1),p=a.computed((()=>{var a;return(null==(a=i.applicationInfo)?void 0:a.level_order)&&t.sortedServiceLevels.length?t.sortedServiceLevels.find((a=>a.level_order===i.applicationInfo.level_order)):null})),c=a=>{if(!a&&0!==a)return"0.00";const e=Math.floor(a/100),o=a%100;return 0===o?e+".00":o<10?e+".0"+o:e+"."+o},r=()=>{a.index.navigateTo({url:"/subPackages/fpart/DataEdetion/index"})},s=()=>{a.index.navigateTo({url:"/subPackages/fpart/level/index"})},d=e=>{var o,n;switch(e){case"balance":a.index.navigateTo({url:"/subPackages/balance/index"});break;case"orders":a.index.navigateTo({url:`/subPackages/fpart/order/index?companion_id=${(null==(o=i.applicationInfo)?void 0:o.id)||""}`});break;case"publish":a.index.navigateTo({url:`/subPackages/fpart/components/dyn?companion_id=${(null==(n=i.applicationInfo)?void 0:n.id)||""}`});break;case"level":a.index.navigateTo({url:"/subPackages/fpart/level/index"})}},u=()=>{l.value=!0},v=()=>{l.value=!1},_=e=>{console.log("视频上传成功:",e),a.index.$emit("applicationStatusChanged",e)},f=async()=>{a.index.navigateTo({url:"/subPackages/dt/index"})};a.onMounted((async()=>{await t.fetchServiceLevels(),a.index.$on("applicationStatusChanged",m)})),a.onUnmounted((()=>{a.index.$off("applicationStatusChanged",m)}));const m=e=>{console.log("收到申请状态变化事件:",e),a.index.$emit("refreshApplicationInfo"),"updated"===e.status&&a.index.showToast({title:e.message||"资料更新成功",icon:"success",duration:2e3})};return(o,i)=>{var t,m,I,g,x;return a.e({a:n.applicationInfo&&n.applicationInfo.avatar},n.applicationInfo&&n.applicationInfo.avatar?{b:o.$imgBaseUrl+n.applicationInfo.avatar}:{},{c:a.t((null==(t=n.applicationInfo)?void 0:t.nickname)||"友伴用户"),d:p.value},p.value?{e:p.value.icon_url,f:a.t(p.value.level_name),g:a.t((100*p.value.commission_rate).toFixed(0)),h:a.o(s)}:{},{i:void 0!==(null==(m=n.applicationInfo)?void 0:m.growth_value)},void 0!==(null==(I=n.applicationInfo)?void 0:I.growth_value)?{j:a.t(n.applicationInfo.growth_value||0)}:{},{k:n.applicationInfo&&"N"==n.applicationInfo.can_accept_orders},n.applicationInfo&&"N"==n.applicationInfo.can_accept_orders?{l:a.t(n.applicationInfo.can_accept_orders_name||"--"),m:a.n((x=n.applicationInfo.can_accept_orders,"Y"===x?"status-success":"status-warning")),n:a.o(u)}:{},{o:e._imports_0$12,p:a.o(r),q:e._imports_1$9,r:a.t(c((null==(g=n.applicationInfo)?void 0:g.available_balance)||0)),s:e._imports_0$12,t:a.o((a=>d("balance"))),v:e._imports_2$6,w:e._imports_0$12,x:a.o((a=>d("orders"))),y:e._imports_3$5,z:e._imports_0$12,A:a.o((a=>d("publish"))),B:e._imports_4$2,C:e._imports_0$12,D:a.o((a=>d("level"))),E:n.applicationInfo&&"Y"==n.applicationInfo.can_accept_orders},n.applicationInfo&&"Y"==n.applicationInfo.can_accept_orders?{F:e._imports_5$2,G:a.o(f)}:{},{H:a.o(v),I:a.o(_),J:a.p({show:l.value,applicationInfo:n.applicationInfo})})}}},t=a._export_sfc(i,[["__scopeId","data-v-f8bc06eb"]]);wx.createComponent(t);
