"use strict";const e=require("../../common/vendor.js"),a=require("../../api/user.js"),t={__name:"detail",setup(t){const n=e.ref([]),l=e.ref(1),u=e.ref(20),o=e.ref(!1),r=e.ref(!1),v=e.ref(!0),c=async()=>{var e;r.value=!0;try{const t=await a.getBalanceLogs({page:l.value,page_size:u.value});if(t.data&&0===t.data.code){const a=(null==(e=t.data.data)?void 0:e.list)||[];1===l.value?n.value=a:n.value=[...n.value,...a],console.log("余额明细:",n.value),v.value=a.length===u.value}else v.value=!1}catch(t){console.error("获取余额明细失败:",t)}finally{r.value=!1}},i=async()=>{o.value=!0;try{l.value=1,await c()}catch(a){e.index.showToast({title:"刷新失败",icon:"none",duration:1500})}finally{o.value=!1}},g=async()=>{!r.value&&v.value&&(l.value++,await c())},s=e=>{if(!e)return"";const a=new Date(e);return`${a.getFullYear()}年${(a.getMonth()+1).toString()}月${a.getDate().toString()}日 ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`};return e.onMounted((()=>{c()})),(a,t)=>e.e({a:e.f(n.value,((a,t,n)=>{return{a:a.change_amount>0?"/static/icons/common/chongzhi.png":"/static/icons/common/koukuan.png",b:e.t(a.remark||""),c:e.t(s(a.created_at)),d:e.t(a.change_amount>0?"+":""),e:e.t((l=a.change_amount,l||0===l?(l/100).toFixed(2):"0.00")),f:a.change_amount>0?1:"",g:a.change_amount<0?1:"",h:t,i:e.o((t=>(a=>{e.index.navigateTo({url:`/subPackages/balance/detaril-re?data=${encodeURIComponent(JSON.stringify(a))}`})})(a)),t)};var l})),b:v.value&&!r.value},(v.value&&r.value,{}),{c:r.value&&l.value>1},(r.value&&l.value,{}),{d:!v.value&&n.value.length>0},(!v.value&&n.value.length,{}),{e:0===n.value.length&&!r.value},(0!==n.value.length||r.value,{}),{f:o.value,g:e.o(i),h:e.o(g)})}},n=e._export_sfc(t,[["__scopeId","data-v-17be9d1b"]]);wx.createPage(n);
