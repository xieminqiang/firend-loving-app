"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../api/user.js"),r={__name:"record",setup(r){const l=e.ref([]),n=e.ref(1),u=e.ref(20),o=e.ref(!1),s=e.ref(!1),v=e.ref(!0),i=async()=>{var e;s.value=!0;try{const a=await t.getWithdrawRecords({page:n.value,page_size:u.value});if(a.data&&0===a.data.code){const t=(null==(e=a.data.data)?void 0:e.list)||[];1===n.value?l.value=t:l.value=[...l.value,...t],console.log("提现记录:",l.value),v.value=t.length===u.value}else v.value=!1}catch(a){console.error("获取提现记录失败:",a)}finally{s.value=!1}},c=async()=>{o.value=!0;try{n.value=1,await i()}catch(a){e.index.showToast({title:"刷新失败",icon:"none",duration:1500})}finally{o.value=!1}},d=async()=>{!s.value&&v.value&&(n.value++,await i())},f=e=>{if(!e)return"";const a=new Date(e);return`${a.getFullYear()}年${(a.getMonth()+1).toString()}月${a.getDate().toString()}日 ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`};return e.onMounted((()=>{i()})),(t,r)=>e.e({a:e.f(l.value,((a,t,r)=>{return e.e({a:e.t(f(a.created_at)),b:e.t((l=a.amount,l||0===l?(l/100).toFixed(2):"0.00")),c:"FAIL"===a.transfer_state&&"OVERDUE_CLOSE"===a.fail_reason},"FAIL"===a.transfer_state&&"OVERDUE_CLOSE"===a.fail_reason||"FAIL"===a.transfer_state?{}:{e:e.t(a.transfer_state_desc||"")},{d:"FAIL"===a.transfer_state,f:t,g:e.o((t=>(a=>{e.index.navigateTo({url:`/subPackages/balance/record-detail?data=${encodeURIComponent(JSON.stringify(a))}`})})(a)),t)});var l})),b:a._imports_0$10,c:v.value&&!s.value},(v.value&&s.value,{}),{d:s.value&&n.value>1},(s.value&&n.value,{}),{e:!v.value&&l.value.length>0},(!v.value&&l.value.length,{}),{f:0===l.value.length&&!s.value},(0!==l.value.length||s.value,{}),{g:o.value,h:e.o(c),i:e.o(d)})}},l=e._export_sfc(r,[["__scopeId","data-v-f5e8cff7"]]);wx.createPage(l);
