"use strict";const e=require("../../../common/vendor.js"),a=require("../../../common/assets.js"),o=require("../../../stores/level.js");Math||n();const n=()=>"./VideoUploadModal.js",i={__name:"Profile",props:{applicationInfo:{type:Object,default:null}},setup(n){const i=n,t=o.useLevelStore(),l=e.ref(!1),r=e.computed((()=>{var e;return(null==(e=i.applicationInfo)?void 0:e.level_order)&&t.sortedServiceLevels.length?t.sortedServiceLevels.find((e=>e.level_order===i.applicationInfo.level_order)):null})),s=()=>{e.index.navigateTo({url:"/subPackages/partner/DataEdetion/index"})},c=()=>{e.index.navigateTo({url:"/subPackages/partner/level/index"})},p=a=>{switch(a){case"withdraw":e.index.showToast({title:"提现功能开发中",icon:"none"});break;case"detail":e.index.showToast({title:"明细功能开发中",icon:"none"})}},d=a=>{var o;switch(a){case"orders":e.index.navigateTo({url:`/subPackages/partner/order/index?companion_id=${(null==(o=i.applicationInfo)?void 0:o.id)||""}`});break;case"level":e.index.navigateTo({url:"/subPackages/partner/level/index"})}},u=()=>{l.value=!0},v=()=>{l.value=!1},_=a=>{console.log("视频上传成功:",a),e.index.$emit("applicationStatusChanged",a)};e.onMounted((async()=>{await t.fetchServiceLevels(),e.index.$on("applicationStatusChanged",f)})),e.onUnmounted((()=>{e.index.$off("applicationStatusChanged",f)}));const f=a=>{console.log("收到申请状态变化事件:",a),e.index.$emit("refreshApplicationInfo"),"updated"===a.status&&e.index.showToast({title:a.message||"资料更新成功",icon:"success",duration:2e3})};return(o,i)=>{var t,f,m,I;return e.e({a:n.applicationInfo&&n.applicationInfo.avatar},n.applicationInfo&&n.applicationInfo.avatar?{b:n.applicationInfo.avatar}:{},{c:e.t((null==(t=n.applicationInfo)?void 0:t.nickname)||"友伴用户"),d:r.value},r.value?{e:r.value.icon_url,f:e.t(r.value.level_name),g:e.t((100*r.value.commission_rate).toFixed(0)),h:e.o(c)}:{},{i:void 0!==(null==(f=n.applicationInfo)?void 0:f.growth_value)},void 0!==(null==(m=n.applicationInfo)?void 0:m.growth_value)?{j:e.t(n.applicationInfo.growth_value||0)}:{},{k:n.applicationInfo&&"N"==n.applicationInfo.can_accept_orders},n.applicationInfo&&"N"==n.applicationInfo.can_accept_orders?{l:e.t(n.applicationInfo.can_accept_orders_name||"--"),m:e.n((I=n.applicationInfo.can_accept_orders,"Y"===I?"status-success":"status-warning")),n:e.o(u)}:{},{o:a._imports_0,p:e.o(s),q:e.o((e=>p("withdraw"))),r:e.o((e=>p("detail"))),s:a._imports_1$8,t:a._imports_0,v:e.o((e=>d("orders"))),w:a._imports_2$5,x:a._imports_0,y:e.o((e=>d("level"))),z:e.o(v),A:e.o(_),B:e.p({show:l.value,applicationInfo:n.applicationInfo})})}}},t=e._export_sfc(i,[["__scopeId","data-v-9560469a"]]);wx.createComponent(t);
