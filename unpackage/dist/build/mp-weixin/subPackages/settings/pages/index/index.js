"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../common/assets.js"),n=require("../../../../stores/user.js"),s=require("../../../../stores/level.js"),t={__name:"index",setup(t){const a=n.useUserStore(),i=s.useLevelStore(),c=e.computed((()=>a.userInfo&&Object.keys(a.userInfo).length>0)),l=e.computed((()=>a.userInfo||{})),u=e=>{console.log("设置页面收到登录成功事件:",e)};e.onMounted((()=>{e.index.$on("loginSuccess",u)})),e.onUnmounted((()=>{e.index.$off("loginSuccess",u)})),e.onLoad((async()=>{var e,o;console.log("设置页面载入"),console.log("当前用户信息:",a.userInfo),console.log("登录状态:",c.value),console.log("用户昵称:",null==(e=l.value)?void 0:e.nickname),console.log("用户头像:",null==(o=l.value)?void 0:o.avatar)}));const r=()=>{c.value?e.index.showToast({title:"头像设置功能开发中",icon:"none"}):e.index.showModal({title:"提示",content:"请先登录后再设置头像",confirmText:"去登录",cancelText:"取消",success:o=>{o.confirm&&e.index.navigateTo({url:"/subPackages/login/index"})}})},d=()=>{c.value?e.index.showToast({title:"昵称设置功能开发中",icon:"none"}):e.index.showModal({title:"提示",content:"请先登录后再设置昵称",confirmText:"去登录",cancelText:"取消",success:o=>{o.confirm&&e.index.navigateTo({url:"/subPackages/login/index"})}})},v=()=>{e.index.showToast({title:"隐私政策页面开发中",icon:"none"})},x=()=>{e.index.showToast({title:"用户协议页面开发中",icon:"none"})},m=()=>{e.index.showToast({title:"关于我们页面开发中",icon:"none"})},g=()=>{e.index.showModal({title:"提示",content:"确认退出账号？",success:async function(o){o.confirm&&(a.clearUserInfo(),i.clearServiceLevels(),e.index.$emit("logoutSuccess"),e.index.showToast({title:"已退出登录",icon:"success"}),setTimeout((()=>{e.index.navigateBack({delta:1})}),1e3))}})};return(n,s)=>e.e({a:c.value},c.value?e.e({b:l.value.avatar},l.value.avatar?{c:l.value.avatar}:{},{d:o._imports_0$4,e:e.o(r)}):{},{f:c.value},c.value?{g:e.t(l.value.nickname||"未设置昵称"),h:o._imports_0$4,i:e.o(d)}:{},{j:o._imports_0$4,k:e.o(v),l:o._imports_0$4,m:e.o(x),n:o._imports_0$4,o:e.o(m),p:c.value},c.value?{q:e.o(g)}:{})}},a=e._export_sfc(t,[["__scopeId","data-v-53589f6c"]]);wx.createPage(a);
