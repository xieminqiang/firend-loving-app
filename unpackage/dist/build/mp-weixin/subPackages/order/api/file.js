"use strict";const e=require("../../../common/vendor.js");require("../../../config/http.js");const o=require("../../../config/config.js").config.production.baseUrl;exports.getUploadResult=e=>e&&e.data?{objectKey:e.data.object_key,url:e.data.url,cover:e.data.cover,isVideo:e.data.is_video}:null,exports.uploadFile=r=>new Promise(((a,t)=>{console.log("开始上传文件:",r),console.log("开始上传文件:eeee",o+"/file/upload"),e.index.uploadFile({url:o+"/file/upload",filePath:r.filePath,name:"file",header:{Authorization:e.index.getStorageSync("token")||""},success:e=>{try{const o=JSON.parse(e.data);0===o.code?a(o):t(new Error(o.message||"上传失败"))}catch(o){console.error("响应数据解析失败:",o,e.data),t(new Error("响应数据解析失败"))}},fail:e=>{console.error("网络请求失败:",e),t(new Error("网络请求失败"))}})}));
