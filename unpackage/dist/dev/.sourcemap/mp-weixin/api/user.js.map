{"version":3,"file":"user.js","sources":["api/user.js"],"sourcesContent":["/**\n * 用户相关 API 接口\n */\nimport { http } from '@/config/http.js'\n\n/**\n * 微信授权登录\n * @param {Object} data - 登录数据\n * @param {string} data.code - 微信登录code\n * @param {string} data.encryptedData - 加密数据（可选）\n * @param {string} data.iv - 初始向量（可选）\n * @param {string} data.signature - 数据签名（可选）\n * @param {string} data.rawData - 原始数据（可选）\n * @returns {Promise} 返回登录结果\n */\nexport const wxLogin = (data) => {\n  return http({\n    url: '/front/user/wx',\n    method: 'POST',\n    data\n  })\n}\n\n/**\n * 获取用户信息\n * @returns {Promise} 返回用户信息\n */\nexport const getUserInfo = () => {\n  return http({\n    url: '/front/user/center/info',\n    method: 'GET'\n  })\n}\n\nexport const getApplicatioInfo = () => {\n  return http({\n    url: '/front/companion/application/my',\n    method: 'GET'\n  })\n}\n\n/**\n * 获取指定城市的服务列表\n * @param {Array} cityCodes - 城市代码列表\n * @returns {Promise} 返回服务列表\n */\nexport const getServicesByCities = (cityCodes) => {\n  const queryParams = cityCodes.map(code => `city_codes=${code}`).join('&')\n  return http({\n    url: `/front/companion/services/cities?${queryParams}`,\n    method: 'GET'\n  })\n}\n\n/**\n * 创建伴侣申请\n * @param {Object} data - 申请数据\n * @returns {Promise} 返回创建结果\n */\nexport const createCompanionApplication = (data) => {\n  return http({\n    url: '/front/companion/application',\n    method: 'POST',\n    data\n  })\n}\n\n/**\n * 更新友伴师上线/下线状态\n * @param {Object} data - 在线状态信息\n * @param {number} data.is_online - 在线状态：0=下线，1=上线\n * @param {number} data.latitude - 纬度\n * @param {number} data.longitude - 经度\n * @param {string} data.location_text - 位置描述\n * @returns {Promise} API响应\n */\nexport function updateCompanionOnlineStatus(data) {\n  return http({\n    url: '/front/companion/online-status',\n    method: 'POST',\n    data\n  })\n}\n\n/**\n * 获取友伴师在线状态信息\n * @returns {Promise} API响应\n */\nexport function getCompanionOnlineStatus() {\n  return http({\n    url: '/front/companion/online-status',\n    method: 'GET'\n  })\n}\n\n/**\n * 更新用户基本信息\n * @param {Object} data - 用户基本信息数据\n * @param {string} data.head_img - 头像图片路径\n * @returns {Promise} 返回更新结果\n */\nexport const updateUserBasicInfo = (data) => {\n  return http({\n    url: '/front/user/basic-info',\n    method: 'PUT',\n    data\n  })\n}\n\n/**\n * 更新用户信息\n * @param {Object} data - 用户信息数据\n * @returns {Promise} 返回更新结果\n */\nexport const updateUserInfo = (data) => {\n  return http({\n    url: '/front/user/update',\n    method: 'PUT',\n    data\n  })\n}\n\n/**\n * 用户退出登录\n * @returns {Promise} 返回退出结果\n */\nexport const logout = () => {\n  return http({\n    url: '/front/user/logout',\n    method: 'POST'\n  })\n}\n\n/**\n * 上传友伴师自我介绍视频\n * @param {Object} data - 视频上传数据\n * @param {string} data.intro_video_url - 自我介绍视频地址\n * @returns {Promise} 返回上传结果\n */\nexport const uploadCompanionVideo = (data) => {\n  return http({\n    url: '/front/companion/video/upload',\n    method: 'POST',\n    data\n  })\n}\n\n/**\n * 获取个性标签列表\n * @param {Object} params - 查询参数\n * @param {number} params.tag_type - 标签类型：4=个性特质，5=我的爱好，6=外貌风格，7=专业技能，8=热门推荐\n * @param {string} params.keyword - 搜索关键词（可选）\n * @param {number} params.page - 页码，默认1\n * @param {number} params.pageSize - 每页数量，默认20\n * @returns {Promise} 返回标签列表\n */\nexport const getPersonalityTags = (params) => {\n  console.log('getPersonalityTags 调用开始', params)\n  \n  // 手动构建查询字符串，兼容小程序环境\n  const queryParts = []\n  if (params.tag_type) queryParts.push(`tag_type=${params.tag_type}`)\n  if (params.keyword) queryParts.push(`keyword=${encodeURIComponent(params.keyword)}`)\n  if (params.page) queryParts.push(`page=${params.page}`)\n  if (params.pageSize) queryParts.push(`pageSize=${params.pageSize}`)\n  \n  const queryString = queryParts.join('&')\n  const url = queryString ? `/front/service/tags?${queryString}` : '/front/service/tags'\n  \n  console.log('构建的URL:', url)\n  console.log('查询字符串:', queryString)\n  \n  return http({\n    url: url,\n    method: 'GET'\n  })\n}\n\n/**\n * 获取热门个性标签\n * @param {Object} params - 查询参数\n * @param {number} params.tag_type - 标签类型（可选）\n * @param {number} params.limit - 返回数量，默认20\n * @returns {Promise} 返回热门标签列表\n */\nexport const getPopularPersonalityTags = (data) => {\n  return http({\n    url: '/front/service/tags/popular',\n    method: 'GET',\n    data\n  })\n}\n\n/**\n * 更新友伴师申请信息\n * @param {Object} data - 申请数据\n * @returns {Promise} 返回更新结果\n */\nexport const updateCompanionApplication = (data) => {\n  return http({\n    url: '/front/companion/application',\n    method: 'PUT',\n    data\n  })\n}\n\n/**\n * 获取服务等级列表\n * @returns {Promise} 返回服务等级列表\n */\nexport const getServiceLevels = () => {\n  return http({\n    url: '/front/companion/service-levels',\n    method: 'GET'\n  })\n}\n\n/**\n * 获取友伴师时间安排\n * @param {Object} params - 请求参数\n * @param {number} params.companion_id - 友伴师ID\n * @returns {Promise} 返回时间安排信息\n */\nexport const getCompanionSchedule = (data) => {\n  return http({\n    url: '/front/companion/schedule',\n    method: 'GET',\n    data\n  })\n}\n\n/**\n * 保存友伴师时间安排\n * @param {Object} data - 时间安排数据\n * @param {number} data.companion_id - 友伴师ID\n * @param {number} data.day_of_week - 星期几 (1-7)\n * @param {Object} data.schedule - 时间安排对象 { \"00:00\": 1, \"00:30\": 2, ... }\n * @returns {Promise} 返回保存结果\n */\nexport const saveCompanionSchedule = (data) => {\n  return http({\n    url: '/front/companion/schedule',\n    method: 'PUT',\n    data\n  })\n}\n\n/**\n * 友伴师提现\n * @param {Object} data - 提现数据\n * @param {number} data.withdraw_amount - 提现金额（分）\n * @returns {Promise} 返回提现结果\n */\nexport const companionWithdraw = (data) => {\n  return http({\n    url: '/front/companion/withdraw/direct',\n    method: 'POST',\n    data\n  })\n}\n\n/**\n * 获取友伴师待确认提现列表\n * @returns {Promise} 返回待确认提现列表\n */\nexport const getPendingWithdrawList = () => {\n  return http({\n    url: '/front/companion/withdraw/pending-confirm',\n    method: 'POST'\n  })\n}\n\n/**\n * 获取友伴师提现记录\n * @param {Object} params - 查询参数\n * @param {number} params.page - 页码\n * @param {number} params.page_size - 每页数量\n * @returns {Promise} 返回提现记录列表\n */\nexport const getWithdrawRecords = (params) => {\n  return http({\n    url: '/front/companion/withdraw/records',\n    method: 'POST',\n    data: params\n  })\n}\n\n/**\n * 获取友伴师余额明细\n * @param {Object} params - 查询参数\n * @param {number} params.page - 页码\n * @param {number} params.page_size - 每页数量\n * @returns {Promise} 返回余额明细列表\n */\nexport const getBalanceLogs = (params) => {\n  return http({\n    url: '/front/companion/balance/logs',\n    method: 'POST',\n    data: params\n  })\n}"],"names":["wxLogin","data","http","getUserInfo","getApplicatioInfo","getServicesByCities","cityCodes","queryParams","code","createCompanionApplication","updateCompanionOnlineStatus","updateUserBasicInfo","uploadCompanionVideo","getPersonalityTags","params","uni","queryParts","queryString","url","updateCompanionApplication","getServiceLevels","getCompanionSchedule","saveCompanionSchedule","companionWithdraw","getPendingWithdrawList","getWithdrawRecords","getBalanceLogs"],"mappings":"mFAeaA,EAAWC,GACfC,OAAK,CACV,IAAK,iBACL,OAAQ,OACR,KAAAD,CACJ,CAAG,EAOUE,EAAc,IAClBD,OAAK,CACV,IAAK,0BACL,OAAQ,KACZ,CAAG,EAGUE,EAAoB,IACxBF,OAAK,CACV,IAAK,kCACL,OAAQ,KACZ,CAAG,EAQUG,EAAuBC,GAAc,CAChD,MAAMC,EAAcD,EAAU,IAAIE,GAAQ,cAAcA,CAAI,EAAE,EAAE,KAAK,GAAG,EACxE,OAAON,OAAK,CACV,IAAK,oCAAoCK,CAAW,GACpD,OAAQ,KACZ,CAAG,CACH,EAOaE,EAA8BR,GAClCC,OAAK,CACV,IAAK,+BACL,OAAQ,OACR,KAAAD,CACJ,CAAG,EAYI,SAASS,EAA4BT,EAAM,CAChD,OAAOC,OAAK,CACV,IAAK,iCACL,OAAQ,OACR,KAAAD,CACJ,CAAG,CACH,CAmBY,MAACU,EAAuBV,GAC3BC,OAAK,CACV,IAAK,yBACL,OAAQ,MACR,KAAAD,CACJ,CAAG,EAiCUW,EAAwBX,GAC5BC,OAAK,CACV,IAAK,gCACL,OAAQ,OACR,KAAAD,CACJ,CAAG,EAYUY,EAAsBC,GAAW,CAC5CC,EAAAA,MAAA,MAAA,MAAA,qBAAY,0BAA2BD,CAAM,EAG7C,MAAME,EAAa,CAAE,EACjBF,EAAO,UAAUE,EAAW,KAAK,YAAYF,EAAO,QAAQ,EAAE,EAC9DA,EAAO,SAASE,EAAW,KAAK,WAAW,mBAAmBF,EAAO,OAAO,CAAC,EAAE,EAC/EA,EAAO,MAAME,EAAW,KAAK,QAAQF,EAAO,IAAI,EAAE,EAClDA,EAAO,UAAUE,EAAW,KAAK,YAAYF,EAAO,QAAQ,EAAE,EAElE,MAAMG,EAAcD,EAAW,KAAK,GAAG,EACjCE,EAAMD,EAAc,uBAAuBA,CAAW,GAAK,sBAEjEF,OAAAA,EAAAA,MAAY,MAAA,MAAA,qBAAA,UAAWG,CAAG,EAC1BH,EAAAA,uCAAY,SAAUE,CAAW,EAE1Bf,OAAK,CACV,IAAKgB,EACL,OAAQ,KACZ,CAAG,CACH,EAsBaC,EAA8BlB,GAClCC,OAAK,CACV,IAAK,+BACL,OAAQ,MACR,KAAAD,CACJ,CAAG,EAOUmB,EAAmB,IACvBlB,OAAK,CACV,IAAK,kCACL,OAAQ,KACZ,CAAG,EASUmB,EAAwBpB,GAC5BC,OAAK,CACV,IAAK,4BACL,OAAQ,MACR,KAAAD,CACJ,CAAG,EAWUqB,EAAyBrB,GAC7BC,OAAK,CACV,IAAK,4BACL,OAAQ,MACR,KAAAD,CACJ,CAAG,EASUsB,EAAqBtB,GACzBC,OAAK,CACV,IAAK,mCACL,OAAQ,OACR,KAAAD,CACJ,CAAG,EAOUuB,EAAyB,IAC7BtB,OAAK,CACV,IAAK,4CACL,OAAQ,MACZ,CAAG,EAUUuB,EAAsBX,GAC1BZ,OAAK,CACV,IAAK,oCACL,OAAQ,OACR,KAAMY,CACV,CAAG,EAUUY,EAAkBZ,GACtBZ,OAAK,CACV,IAAK,gCACL,OAAQ,OACR,KAAMY,CACV,CAAG"}