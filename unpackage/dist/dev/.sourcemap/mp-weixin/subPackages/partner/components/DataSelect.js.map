{"version":3,"file":"DataSelect.js","sources":["subPackages/partner/components/DataSelect.vue","subPackages/partner/components/DataSelect.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"data-select-container\">\n\n\n      \n      <!-- 星期选择器 -->\n      <view class=\"week-selector\">\n        <view \n          v-for=\"(day, index) in weekDays\" \n          :key=\"day.key\"\n          class=\"day-item\"\n          :class=\"{ \n            'active': selectedDay === index,\n            'today': isToday(index)\n          }\"\n          @click=\"selectDay(index)\"\n        >\n          <text class=\"day-name\">{{ day.name }}</text>\n          <text class=\"day-status\">{{ getDayStatus(index) }}</text>\n        </view>\n      </view>\n      \n      <!-- 时间网格 -->\n      <view class=\"time-grid-container\">\n        <view class=\"time-grid-header\">\n          <text class=\"grid-title\">{{ getSelectedDayName() }} 时间段设置</text>\n          <view class=\"quick-actions\">\n            <view class=\"action-btn\" @click=\"setAllAvailable\">全部可约</view>\n            <view class=\"action-btn\" @click=\"setAllUnavailable\">全部休息</view>\n          </view>\n        </view>\n        \n        <view class=\"time-grid\" :style=\"{ height: (timeGridHeight ) + 'px' }\">\n          <view \n            v-for=\"(timeSlot, timeKey) in getCurrentDaySchedule()\" \n            :key=\"timeKey\"\n            class=\"time-slot\"\n            :class=\"getTimeSlotClass(timeSlot)\"\n            @click=\"toggleTimeSlot(timeKey)\"\n          >\n            <text class=\"time-text\">{{ timeKey }}</text>\n            <text class=\"status-text\">{{ getStatusText(timeSlot) }}</text>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 底部固定区域 -->\n      <view class=\"bottom-fixed\">\n        <!-- 状态说明 -->\n        <view class=\"status-legend\">\n          <view class=\"legend-item\">\n            <view class=\"legend-color available\"></view>\n            <text class=\"legend-text\">可约</text>\n          </view>\n                  <view class=\"legend-item\">\n          <view class=\"legend-color unavailable\"></view>\n          <text class=\"legend-text\">休息</text>\n        </view>\n                  <!-- <view class=\"legend-item\">\n          <view class=\"legend-color booked\"></view>\n          <text class=\"legend-text\">已约</text>\n        </view> -->\n        </view>\n        \n        <!-- 保存按钮 -->\n        <view class=\"save-section\">\n          <view class=\"save-btn\" @click=\"saveSchedule\">\n            <text class=\"save-text\">保存设置</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { getCompanionSchedule, saveCompanionSchedule } from '@/api/user.js'\n\n// 响应式数据\nconst companion_id = ref(null)\nconst loading = ref(true)\nconst selectedDay = ref(0) // 默认选中周一\nconst scheduleData = ref([])\nconst timeGridHeight = ref(0) // 时间网格高度\nconst originalScheduleData = ref([]) // 保存原始数据，用于比较是否有修改\n\n// 星期数据\nconst weekDays = ref([\n  { key: 'monday', name: '周一' },\n  { key: 'tuesday', name: '周二' },\n  { key: 'wednesday', name: '周三' },\n  { key: 'thursday', name: '周四' },\n  { key: 'friday', name: '周五' },\n  { key: 'saturday', name: '周六' },\n  { key: 'sunday', name: '周日' }\n])\n\n// 获取页面参数\nconst getPageParams = () => {\n  const pages = getCurrentPages()\n  const currentPage = pages[pages.length - 1]\n  const options = currentPage.options\n  \n  if (options.companion_id) {\n    companion_id.value = parseInt(options.companion_id)\n    console.log('获取到companion_id:', companion_id.value)\n  } else {\n    console.error('未获取到companion_id参数')\n    uni.showToast({\n      title: '参数错误',\n      icon: 'none'\n    })\n  }\n}\n\n// 调用接口获取数据\nconst callScheduleAPI = async () => {\n  if (!companion_id.value) {\n    console.error('companion_id为空，无法调用接口')\n    return\n  }\n  \n  try {\n    console.log('开始调用getCompanionSchedule接口，companion_id:', companion_id.value)\n    \n    let obj = {\n      \"companion_id\": companion_id.value,\n    }\n    console.log('obj:', obj)\n    const response = await getCompanionSchedule(obj)\n    console.log('接口调用成功:', response)\n    \n    if (response.data && response.data.code === 0) {\n      scheduleData.value = response.data.data\n      // 深拷贝保存原始数据\n      originalScheduleData.value = JSON.parse(JSON.stringify(response.data.data))\n      console.log('解析后的数据:', scheduleData.value)\n      \n      // 设置默认选中的星期\n      setDefaultSelectedDay()\n    } else {\n      uni.showToast({\n        title: response.data?.msg || '获取数据失败',\n        icon: 'none'\n      })\n    }\n  } catch (error) {\n    console.error('接口调用失败:', error)\n    uni.showToast({\n      title: '网络错误',\n      icon: 'none'\n    })\n  } finally {\n    loading.value = false\n  }\n}\n\n// 设置默认选中的星期\nconst setDefaultSelectedDay = () => {\n  // 查找今天的数据\n  const todayData = scheduleData.value.find(item => item.is_today === true)\n  \n  if (todayData) {\n    // 找到今天，设置为选中状态\n    selectedDay.value = todayData.day_of_week - 1 // 转换为数组索引 (0-6)\n    console.log('设置为今天:', todayData.day_of_week, '选中索引:', selectedDay.value)\n  } else {\n    // 没找到今天的数据，默认选中周一\n    selectedDay.value = 0\n    console.log('未找到今天数据，默认选中周一')\n  }\n}\n\n// 选择星期\nconst selectDay = (index) => {\n  // 如果切换星期，重置当前星期的数据为原始状态\n  if (selectedDay.value !== index) {\n    resetCurrentDayData()\n  }\n  selectedDay.value = index\n}\n\n// 重置当前星期的数据为原始状态\nconst resetCurrentDayData = () => {\n  const currentDayOfWeek = selectedDay.value + 1\n  const originalDayData = originalScheduleData.value.find(item => item.day_of_week === currentDayOfWeek)\n  const currentDayData = scheduleData.value.find(item => item.day_of_week === currentDayOfWeek)\n  \n  if (originalDayData && currentDayData) {\n    // 将当前数据重置为原始数据\n    currentDayData.schedule = JSON.parse(JSON.stringify(originalDayData.schedule))\n    console.log('重置星期数据:', currentDayOfWeek, '为原始状态')\n  }\n}\n\n// 判断是否是今天\nconst isToday = (index) => {\n  const dayOfWeek = index + 1\n  const dayData = scheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  return dayData ? dayData.is_today : false\n}\n\n// 获取选中星期的名称\nconst getSelectedDayName = () => {\n  return weekDays.value[selectedDay.value].name\n}\n\n// 获取当前选中星期的数据\nconst getCurrentDaySchedule = () => {\n  const dayOfWeek = selectedDay.value + 1 // 转换为后端格式 (1-7)\n  const dayData = scheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  return dayData ? dayData.schedule : {}\n}\n\n// 获取星期状态\nconst getDayStatus = (index) => {\n  const dayOfWeek = index + 1\n  const dayData = scheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  if (!dayData) return '未设置'\n  \n  const schedule = dayData.schedule\n  const availableCount = Object.values(schedule).filter(v => v === 1).length\n  const bookedCount = Object.values(schedule).filter(v => v === 3).length\n  \n  let statusText = ''\n  if (bookedCount > 0) {\n    statusText = `${bookedCount}个已约`\n  } else if (availableCount === 48) {\n    statusText = '全天可约'\n  } else if (availableCount === 0) {\n    statusText = '全天休息'\n  } else {\n    statusText = `${availableCount}个可约`\n  }\n  \n  // 如果是今天，添加\"今天\"标识\n  if (dayData.is_today) {\n    statusText =  statusText\n  }\n  \n  return statusText\n}\n\n// 获取时间段样式类\nconst getTimeSlotClass = (status) => {\n  switch (status) {\n    case 1: return 'available'\n    case 2: return 'unavailable'\n    case 3: return 'booked'\n    default: return 'unavailable'\n  }\n}\n\n// 获取状态文本\nconst getStatusText = (status) => {\n  switch (status) {\n    case 1: return '可约'\n    case 2: return '休息'\n    case 3: return '已约'\n    default: return '休息'\n  }\n}\n\n// 切换时间段状态\nconst toggleTimeSlot = (timeKey) => {\n  const dayOfWeek = selectedDay.value + 1\n  const dayData = scheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  \n  if (!dayData) return\n  \n  const currentStatus = dayData.schedule[timeKey]\n  \n  // 已约状态不能修改\n  if (currentStatus === 3) {\n    uni.showToast({\n      title: '已约时间段不能修改',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // 切换可约/不可约状态\n  dayData.schedule[timeKey] = currentStatus === 1 ? 2 : 1\n}\n\n// 设置全部可约\nconst setAllAvailable = () => {\n  const dayOfWeek = selectedDay.value + 1\n  const dayData = scheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  \n  if (!dayData) return\n  \n  Object.keys(dayData.schedule).forEach(timeKey => {\n    if (dayData.schedule[timeKey] !== 3) { // 已约的不修改\n      dayData.schedule[timeKey] = 1\n    }\n  })\n}\n\n// 设置全部不可约\nconst setAllUnavailable = () => {\n  const dayOfWeek = selectedDay.value + 1\n  const dayData = scheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  \n  if (!dayData) return\n  \n  Object.keys(dayData.schedule).forEach(timeKey => {\n    if (dayData.schedule[timeKey] !== 3) { // 已约的不修改\n      dayData.schedule[timeKey] = 2\n    }\n  })\n}\n\n// 保存设置\nconst saveSchedule = async () => {\n  if (!companion_id.value) {\n    uni.showToast({\n      title: '用户信息不完整',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // 获取当前选中的星期数据\n  const dayOfWeek = selectedDay.value + 1\n  const dayData = scheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  \n  if (!dayData) {\n    uni.showToast({\n      title: '未找到当前星期的数据',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // 检查是否有修改\n  const originalDayData = originalScheduleData.value.find(item => item.day_of_week === dayOfWeek)\n  if (originalDayData && JSON.stringify(originalDayData.schedule) === JSON.stringify(dayData.schedule)) {\n    uni.showToast({\n      title: '没有修改内容',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // 准备保存数据\n  const saveData = {\n    companion_id: companion_id.value,\n    day_of_week: dayOfWeek,\n    schedule: dayData.schedule\n  }\n  \n  console.log('准备保存的数据:', saveData)\n  \n  try {\n    uni.showLoading({\n      title: '保存中...'\n    })\n    \n    const response = await saveCompanionSchedule(saveData)\n    \n    uni.hideLoading()\n    \n    if (response.data && response.data.code === 0) {\n      // 保存成功后，更新原始数据中对应星期的数据\n      const originalIndex = originalScheduleData.value.findIndex(item => item.day_of_week === dayOfWeek)\n      if (originalIndex !== -1) {\n        originalScheduleData.value[originalIndex] = JSON.parse(JSON.stringify(dayData))\n      }\n      \n      uni.showToast({\n        title: '保存成功',\n        icon: 'success'\n      })\n      console.log('保存成功:', response.data)\n    } else {\n      uni.showToast({\n        title: response.data?.msg || '保存失败',\n        icon: 'none'\n      })\n      console.error('保存失败:', response.data)\n    }\n  } catch (error) {\n    uni.hideLoading()\n    uni.showToast({\n      title: '网络错误，请重试',\n      icon: 'none'\n    })\n    console.error('保存接口调用失败:', error)\n  }\n}\n\n// 计算时间网格高度\nconst calculateTimeGridHeight = () => {\n  // 获取系统信息\n  const systemInfo = uni.getSystemInfoSync()\n  const screenHeight = systemInfo.windowHeight\n\n\n\n  \n  timeGridHeight.value = screenHeight - 10\n  console.log('timeGridHeight.value:', timeGridHeight.value)\n  uni.createSelectorQuery()\n\t\t\t.select('.time-grid-header') // 选择器\n\t\t\t.boundingClientRect(rect => {\n\t\t\t\tif (rect) {\n                    //  console.log('rect:', rect.bottom)\n                  timeGridHeight.value = timeGridHeight.value - rect.bottom \n                    }\n\t\t\t})\n\t\t\t.exec()\n\n            uni.createSelectorQuery()\n\t\t\t.select('.bottom-fixed') // 选择器\n\t\t\t.boundingClientRect(rect => {\n\t\t\t\tif (rect) {\n                     console.log('rect:', rect.height)\n                    //  bottomFixedHeight = rect.height\n                 timeGridHeight.value = timeGridHeight.value - rect.height\n                    \n\t\t\t\t}\n\t\t\t})\n\t\t\t.exec()\n\n}\n\n// 页面加载时执行\nonMounted(() => {\n  console.log('DataSelect组件mounted')\n  getPageParams()\n  callScheduleAPI()\n  calculateTimeGridHeight()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.data-select-container {\n  height: 100vh;\n  background: #ffffff;\n  padding: 20rpx;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 400rpx;\n}\n\n.loading-text {\n  font-size: 28rpx;\n  color: #666666;\n}\n\n\n.header {\n  text-align: center;\n  margin-bottom: 30rpx;\n}\n\n.title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #1a1a1a;\n  display: block;\n  margin-bottom: 8rpx;\n}\n\n.subtitle {\n  font-size: 24rpx;\n  color: #666666;\n  display: block;\n}\n\n// 星期选择器\n.week-selector {\n  display: flex;\n  gap: 12rpx;\n  margin-bottom: 40rpx;\n  flex-wrap: wrap;\n}\n\n.day-item {\n  flex: 1;\n  min-width: 120rpx;\n  background: #f8f9fa;\n  border: 2rpx solid #e9ecef;\n  border-radius: 16rpx;\n  padding: 10rpx 16rpx;\n  text-align: center;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  position: relative;\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &.active {\n    background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n    border-color: #7363FF;\n    box-shadow: 0 4rpx 16rpx rgba(115, 99, 255, 0.3);\n  }\n  \n  // 今天的特殊样式\n  &.today {\n    border-color: #FF9500;\n    background: linear-gradient(135deg, #FF9500 0%, #FF5722 100%);\n    \n    .day-name, .day-status {\n      color: #ffffff;\n    }\n    \n    &::before {\n      content: '今天';\n      position: absolute;\n      top: -8rpx;\n      right: -8rpx;\n      background: #FF5722;\n      color: #ffffff;\n      font-size: 18rpx;\n      padding: 2rpx 8rpx;\n      border-radius: 8rpx;\n      font-weight: 600;\n    }\n  }\n}\n\n.day-name {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: #1a1a1a;\n  display: block;\n  margin-bottom: 4rpx;\n  \n  .day-item.active & {\n    color: #ffffff;\n  }\n}\n\n.day-status {\n  font-size: 20rpx;\n  color: #666666;\n  display: block;\n  \n  .day-item.active & {\n    color: rgba(255, 255, 255, 0.8);\n  }\n}\n\n// 时间网格容器\n.time-grid-container {\n  margin-bottom: 0rpx;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.time-grid-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n  flex-shrink: 0;\n}\n\n.grid-title {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #1a1a1a;\n}\n\n.quick-actions {\n  display: flex;\n  gap: 12rpx;\n}\n\n.action-btn {\n  background: #f8f9fa;\n  border: 1rpx solid #e9ecef;\n  border-radius: 12rpx;\n  padding: 8rpx 16rpx;\n  font-size: 22rpx;\n  color: #666666;\n  transition: all 0.3s ease;\n  \n  &:active {\n    transform: scale(0.95);\n    background: #e9ecef;\n  }\n}\n\n// 时间网格\n.time-grid {\n  display: grid;\n  grid-template-columns: repeat(6, 1fr);\n  gap: 12rpx;\n  overflow-y: auto;\n  overflow-x: hidden;\n  \n  // 自定义滚动条样式\n  &::-webkit-scrollbar {\n    width: 6rpx;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n    border-radius: 3rpx;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #c1c1c1;\n    border-radius: 3rpx;\n    \n    &:hover {\n      background: #a8a8a8;\n    }\n  }\n}\n\n.time-slot {\n  background: #f8f9fa;\n  border: 2rpx solid #e9ecef;\n  border-radius: 12rpx;\n  padding: 16rpx 8rpx;\n  text-align: center;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  position: relative;\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &.available {\n    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);\n    border-color: #4CAF50;\n    box-shadow: 0 2rpx 8rpx rgba(76, 175, 80, 0.3);\n    \n    .time-text, .status-text {\n      color: #ffffff;\n    }\n  }\n  \n  &.unavailable {\n    background: #f8f9fa;\n    border-color: #e9ecef;\n    \n    .time-text {\n      color: #999999;\n    }\n    \n    .status-text {\n      color: #cccccc;\n    }\n  }\n  \n  &.booked {\n    background: linear-gradient(135deg, #FF5722 0%, #f4511e 100%);\n    border-color: #FF5722;\n    box-shadow: 0 2rpx 8rpx rgba(255, 87, 34, 0.3);\n    cursor: not-allowed;\n    \n    .time-text, .status-text {\n      color: #ffffff;\n    }\n    \n    &:active {\n      transform: none;\n    }\n  }\n}\n\n.time-text {\n  font-size: 22rpx;\n  font-weight: 500;\n  color: #1a1a1a;\n  display: block;\n  margin-bottom: 4rpx;\n}\n\n.status-text {\n  font-size: 18rpx;\n  color: #666666;\n  display: block;\n}\n\n// 底部固定区域\n.bottom-fixed {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #ffffff;\n  padding: 20rpx;\n  box-shadow: 0 -4rpx 20rpx rgba(0, 0, 0, 0.1);\n  z-index: 100;\n}\n\n// 状态说明\n.status-legend {\n  display: flex;\n  justify-content: center;\n  gap: 40rpx;\n  margin-bottom: 20rpx;\n  padding: 20rpx;\n  background: #f8f9fa;\n  border-radius: 16rpx;\n}\n\n.legend-item {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n}\n\n.legend-color {\n  width: 24rpx;\n  height: 24rpx;\n  border-radius: 6rpx;\n  \n  &.available {\n    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);\n  }\n  \n  &.unavailable {\n    background: #e9ecef;\n  }\n  \n  &.booked {\n    background: linear-gradient(135deg, #FF5722 0%, #f4511e 100%);\n  }\n}\n\n.legend-text {\n  font-size: 24rpx;\n  color: #666666;\n}\n\n// 保存按钮\n.save-section {\n  text-align: center;\n  margin-bottom: 20rpx; // 为安全区域留出空间\n}\n\n.save-btn {\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-radius: 16rpx;\n  padding: 24rpx 40rpx;\n  box-shadow: 0 6rpx 20rpx rgba(115, 99, 255, 0.3);\n  transition: all 0.3s ease;\n  \n  &:active {\n    transform: scale(0.98);\n    box-shadow: 0 4rpx 16rpx rgba(115, 99, 255, 0.4);\n  }\n}\n\n.save-text {\n  color: #ffffff;\n  font-size: 30rpx;\n  font-weight: 600;\n}\n</style>","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/subPackages/partner/components/DataSelect.vue'\nwx.createPage(MiniProgramPage)"],"names":["companion_id","ref","loading","selectedDay","scheduleData","timeGridHeight","originalScheduleData","weekDays","getPageParams","pages","options","uni","callScheduleAPI","obj","response","getCompanionSchedule","setDefaultSelectedDay","_a","error","todayData","item","selectDay","index","resetCurrentDayData","currentDayOfWeek","originalDayData","currentDayData","isToday","dayOfWeek","dayData","getSelectedDayName","getCurrentDaySchedule","getDayStatus","schedule","availableCount","v","bookedCount","statusText","getTimeSlotClass","status","getStatusText","toggleTimeSlot","timeKey","currentStatus","setAllAvailable","setAllUnavailable","saveSchedule","saveData","saveCompanionSchedule","originalIndex","calculateTimeGridHeight","screenHeight","rect","onMounted","MiniProgramPage"],"mappings":"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"}