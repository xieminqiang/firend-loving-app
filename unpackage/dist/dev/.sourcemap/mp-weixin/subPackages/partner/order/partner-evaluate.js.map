{"version":3,"file":"partner-evaluate.js","sources":["subPackages/partner/order/partner-evaluate.vue","subPackages/partner/order/partner-evaluate.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"partner-evaluate-container\">\n      <!-- 主内容区域 -->\n      <view class=\"main-content\">\n        <scroll-view \n          class=\"scroll-container\" \n          scroll-y=\"true\"\n        >\n          <!-- 用户评价卡片 -->\n          <view class=\"user-comment-card modern-card\">\n            <view class=\"card-header\">\n              <view class=\"header-content\">\n                <view class=\"section-indicator\"></view>\n                <view class=\"header-text\">\n                  <text class=\"card-title\">用户评价</text>\n                  <text class=\"card-subtitle\">查看用户的服务体验反馈</text>\n                </view>\n              </view>\n            </view>\n            \n            <view class=\"comment-content\">\n              <!-- 评分显示 -->\n              <view class=\"rating-display\">\n                <text class=\"rating-label\">用户评分：</text>\n                <view class=\"stars\">\n                  <text \n                    v-for=\"i in 5\" \n                    :key=\"i\" \n                    class=\"star\"\n                    :class=\"{ active: i <= userComment.rating }\"\n                  >★</text>\n                </view>\n                <text class=\"rating-text\">{{ userComment.rating }}分</text>\n              </view>\n              \n              <!-- 评价文字 -->\n              <view class=\"comment-text-section\">\n                <text class=\"comment-text\">{{ userComment.comment }}</text>\n              </view>\n              \n              <!-- 评价图片 -->\n              <view v-if=\"userComment.comment_images && userComment.comment_images.length > 0\" class=\"comment-images-section\">\n                <view class=\"images-grid\">\n                  <view \n                    v-for=\"(image, index) in userComment.comment_images\" \n                    :key=\"index\"\n                    class=\"image-item\"\n                    @click=\"previewUserImage(index)\"\n                  >\n                    <image :src=\"proxy.$imgBaseUrl + image\" class=\"comment-image\" mode=\"aspectFill\" />\n                  </view>\n                </view>\n              </view>\n              \n              <!-- 评价时间 -->\n              <view class=\"comment-time\">\n                <text class=\"time-text\">{{ formatTime(userComment.comment_time) }}</text>\n              </view>\n            </view>\n          </view>\n  \n          <!-- 友伴师回复卡片 -->\n          <view v-if=\"companionReply\" class=\"companion-reply-card modern-card\">\n            <view class=\"card-header\">\n              <view class=\"header-content\">\n                <view class=\"section-indicator reply-indicator\"></view>\n                <view class=\"header-text\">\n                  <text class=\"card-title\">我的回复</text>\n                  <text class=\"card-subtitle\">您已回复此评价</text>\n                </view>\n              </view>\n            </view>\n            \n            <view class=\"reply-content\">\n              <view class=\"reply-text-section\">\n                <text class=\"reply-text\">{{ companionReply.comment }}</text>\n              </view>\n              \n              <!-- 回复图片 -->\n              <view v-if=\"companionReply.comment_images && companionReply.comment_images.length > 0\" class=\"reply-images-section\">\n                <view class=\"images-grid\">\n                  <view \n                    v-for=\"(image, index) in companionReply.comment_images\" \n                    :key=\"index\"\n                    class=\"image-item\"\n                    @click=\"previewReplyImage(index)\"\n                  >\n                    <image :src=\"proxy.$imgBaseUrl + image\" class=\"reply-image\" mode=\"aspectFill\" />\n                  </view>\n                </view>\n              </view>\n              \n              <!-- 回复时间 -->\n              <view class=\"reply-time\">\n                <text class=\"time-text\">{{ formatTime(companionReply.comment_time) }}</text>\n              </view>\n            </view>\n          </view>\n  \n          <!-- 回复输入卡片 -->\n          <view v-if=\"!companionReply\" class=\"reply-input-card modern-card\">\n            <view class=\"card-header\">\n              <view class=\"header-content\">\n                <view class=\"section-indicator\"></view>\n                <view class=\"header-text\">\n                  <text class=\"card-title\">回复评价</text>\n                  <text class=\"card-subtitle\">感谢用户评价，及时回复提升服务质量</text>\n                </view>\n              </view>\n            </view>\n            \n            <view class=\"reply-input-content\">\n              <!-- 回复输入框 -->\n              <view class=\"input-section\">\n                <textarea \n                  v-model=\"replyText\"\n                  placeholder=\"请回复用户的评价，表达感谢或说明情况...\" \n                  placeholder-class=\"input-placeholder\"\n                  class=\"reply-textarea\"\n                  maxlength=\"200\"\n                  :show-confirm-bar=\"false\"\n                />\n                <view class=\"char-count\">{{ replyText.length }}/200</view>\n              </view>\n              \n              <!-- 图片上传区域 -->\n              <view class=\"photo-section\">\n                <view class=\"photo-title\">\n                  <text class=\"title-text\">上传图片</text>\n                  <text class=\"title-desc\">最多上传3张图片</text>\n                </view>\n                \n                <view class=\"photo-gallery\">\n                  <view \n                    class=\"photo-item\" \n                    v-for=\"(photo, index) in photos\" \n                    :key=\"index\"\n                    @click=\"previewPhoto(index)\"\n                  >\n                    <image :src=\"proxy.$imgBaseUrl + photo\" class=\"photo-img\" mode=\"aspectFill\" />\n                    <view class=\"photo-overlay\">\n                      <view class=\"photo-remove\" @click.stop=\"deletePhoto(index)\">\n                        <text class=\"remove-text\">×</text>\n                      </view>\n                    </view>\n                  </view>\n                  \n                  <view \n                    class=\"photo-add\" \n                    v-if=\"photos.length < 3\"\n                    @click=\"addPhoto\"\n                  >\n                    <view class=\"add-content\">\n                      <view class=\"add-icon-circle\">\n                        <image src=\"@/static/icons/common/add_icon.png\" class=\"add-icon\" mode=\"aspectFit\" />\n                      </view>\n                      <text class=\"add-text\">添加图片</text>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n  \n          <view style=\"height: 200rpx;\"></view>\n        </scroll-view>\n      </view>\n  \n      <!-- 底部固定提交按钮 -->\n      <view v-if=\"!companionReply\" class=\"bottom-submit-section\">\n        <view class=\"submit-button-container\">\n          <view \n            class=\"bottom-submit-btn\" \n            :class=\"{ disabled: isSubmitting || !canSubmit }\"\n            @click=\"submitReply\"\n          >\n            <view class=\"submit-btn-content\">\n              <view v-if=\"isSubmitting\" class=\"submit-loading\">\n                <view class=\"loading-dots\">\n                  <view class=\"dot\"></view>\n                  <view class=\"dot\"></view>\n                  <view class=\"dot\"></view>\n                </view>\n              </view>\n  \n              <text class=\"submit-btn-text\" v-if=\"!isSubmitting\">提交回复</text>\n              <text class=\"submit-btn-text\" v-else>提交中...</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </template>\n  \n  <script setup>\nimport { ref, computed, onMounted, getCurrentInstance } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { uploadFile, getUploadResult } from '@/api/file.js'\nimport { createOrderComment, getOrderCommentList } from '@/api/order.js'\n\n// 获取全局属性\nconst { proxy } = getCurrentInstance()\n  \n  // 页面参数\n  const orderId = ref('')\n  const companionId = ref('')\n  \n  // 评价数据\n  const userComment = ref({})\n  const companionReply = ref(null)\n  const replyText = ref('')\n  const photos = ref([])\n  \n  // 提交状态\n  const isSubmitting = ref(false)\n  \n  // 计算属性：是否可以提交\n  const canSubmit = computed(() => {\n    return replyText.value.trim().length > 0\n  })\n  \n  // 页面加载\n  onLoad((options) => {\n    if (options.orderId) {\n      orderId.value = options.orderId\n    }\n    if (options.companion_id) {\n      companionId.value = options.companion_id\n    }\n    loadCommentList()\n  })\n  \n  // 加载评价列表\n  const loadCommentList = async () => {\n    try {\n      uni.showLoading({ title: '加载中...' })\n      \n      const response = await getOrderCommentList({ order_id: Number(orderId.value) })\n      \n      if (response.data.code === 0) {\n        const commentList = response.data.data.list || []\n        \n        // 分离用户评价和友伴师回复\n        userComment.value = commentList.find(item => item.is_companion === 0) || {}\n        companionReply.value = commentList.find(item => item.is_companion === 1) || null\n        \n        console.log('用户评价:', userComment.value)\n        console.log('友伴师回复:', companionReply.value)\n      } else {\n        throw new Error(response.data.msg || '获取评价失败')\n      }\n    } catch (error) {\n      console.error('加载评价失败:', error)\n      uni.showToast({\n        title: error.message || '加载失败',\n        icon: 'none'\n      })\n    } finally {\n      uni.hideLoading()\n    }\n  }\n  \n  // 添加图片\n  const addPhoto = () => {\n    const maxCount = 3 - photos.value.length\n    if (maxCount <= 0) {\n      uni.showToast({\n        title: '最多只能上传3张图片',\n        icon: 'none'\n      })\n      return\n    }\n  \n    uni.chooseImage({\n      count: maxCount,\n      sizeType: ['compressed'],\n      sourceType: ['album', 'camera'],\n      success: async (res) => {\n        // 显示上传进度\n        uni.showLoading({\n          title: '上传中...',\n          mask: true\n        })\n  \n        try {\n          // 逐个上传文件\n          const uploadPromises = res.tempFilePaths.map(async (filePath, index) => {\n            try {\n              // 获取文件信息\n              const fileInfo = await getFileInfo(filePath)\n              if (!fileInfo || !fileInfo.extension) {\n                throw new Error('无法获取文件信息')\n              }\n              \n              // 上传文件\n              const uploadResult = await uploadFile({\n                filePath: filePath,\n                name: `reply_${Date.now()}_${index}.${fileInfo.extension}`\n              })\n  \n              // 解析上传结果\n              const fileData = getUploadResult(uploadResult)\n              if (!fileData || !fileData.url) {\n                throw new Error('上传结果解析失败')\n              }\n  \n              // 返回上传后的URL\n              return fileData.url\n            } catch (error) {\n              console.error(`第${index + 1}张图片上传失败:`, error)\n              throw error\n            }\n          })\n  \n          // 等待所有文件上传完成\n          const uploadedUrls = await Promise.all(uploadPromises)\n          \n          // 将上传成功的URL添加到图片数组\n          photos.value.push(...uploadedUrls)\n          \n          uni.showToast({\n            title: `成功上传${uploadedUrls.length}张图片`,\n            icon: 'success'\n          })\n  \n        } catch (error) {\n          console.error('图片上传失败:', error)\n          uni.showToast({\n            title: '图片上传失败，请重试',\n            icon: 'none'\n          })\n        } finally {\n          uni.hideLoading()\n        }\n      },\n      fail: (error) => {\n        console.error('选择图片失败:', error)\n        uni.showToast({\n          title: '选择图片失败',\n          icon: 'none'\n        })\n      }\n    })\n  }\n  \n  // 获取文件信息\n  const getFileInfo = (filePath) => {\n    return new Promise((resolve, reject) => {\n      uni.getFileInfo({\n        filePath: filePath,\n        success: (res) => {\n          // 从文件路径中提取扩展名\n          const extension = filePath.split('.').pop().toLowerCase()\n          resolve({\n            size: res.size,\n            extension: extension\n          })\n        },\n        fail: (error) => {\n          console.error('获取文件信息失败:', error)\n          // 如果获取文件信息失败，使用默认扩展名\n          const extension = filePath.split('.').pop().toLowerCase() || 'jpg'\n          resolve({\n            size: 0,\n            extension: extension\n          })\n        }\n      })\n    })\n  }\n  \n  // 预览图片\n  const previewPhoto = (index) => {\n    const urls = photos.value.map(photo => proxy.$imgBaseUrl + photo)\n    uni.previewImage({\n      urls: urls,\n      current: index\n    })\n  }\n  \n  // 删除图片\n  const deletePhoto = (index) => {\n    photos.value.splice(index, 1)\n  }\n  \n  // 预览用户评价图片\n  const previewUserImage = (index) => {\n    const urls = userComment.value.comment_images.map(img => proxy.$imgBaseUrl + img)\n    uni.previewImage({\n      urls: urls,\n      current: index\n    })\n  }\n  \n  // 预览回复图片\n  const previewReplyImage = (index) => {\n    const urls = companionReply.value.comment_images.map(img => proxy.$imgBaseUrl + img)\n    uni.previewImage({\n      urls: urls,\n      current: index\n    })\n  }\n  \n  // 提交回复\n  const submitReply = async () => {\n    if (!canSubmit.value || isSubmitting.value) {\n      return\n    }\n  \n    isSubmitting.value = true\n    \n    try {\n      // 构建回复数据，按照API接口要求\n      const replyData = {\n        order_id: parseInt(orderId.value),\n        rating: 0, // 友伴师回复不需要评分\n        comment: replyText.value.trim(),\n        comment_images: photos.value,\n        is_anonymous: 0, // 友伴师回复不匿名\n        is_companion: 1 // 标识这是友伴师回复\n      }\n      \n      console.log('提交回复数据:', replyData)\n      \n      // 调用评价提交API\n      const response = await createOrderComment(replyData)\n      \n      if (response.data && response.data.code === 0) {\n        uni.showToast({\n          title: '回复提交成功',\n          icon: 'success',\n          duration: 2000\n        })\n        \n        // 延迟返回上一页\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1500)\n      } else {\n        throw new Error(response.data?.msg || '回复提交失败')\n      }\n      \n    } catch (error) {\n      console.error('提交回复失败:', error)\n      uni.showToast({\n        title: error.data?.msg || '提交失败，请重试',\n        icon: 'none'\n      })\n    } finally {\n      isSubmitting.value = false\n    }\n  }\n  \n  // 格式化时间\n  const formatTime = (timeStr) => {\n    if (!timeStr) return ''\n    \n    const date = new Date(timeStr)\n    const year = date.getFullYear()\n    const month = String(date.getMonth() + 1).padStart(2, '0')\n    const day = String(date.getDate()).padStart(2, '0')\n    const hours = String(date.getHours()).padStart(2, '0')\n    const minutes = String(date.getMinutes()).padStart(2, '0')\n    \n    return `${year}-${month}-${day} ${hours}:${minutes}`\n  }\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  .partner-evaluate-container {\n    height: 100vh;\n    background: linear-gradient(180deg, #f8f9fe 0%, #ffffff 100%);\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .main-content {\n    flex: 1;\n    overflow: hidden;\n  }\n  \n  .scroll-container {\n    width: 100%;\n    height: 100%;\n  }\n  \n  /* 现代卡片样式 */\n  .modern-card {\n    background: white;\n    border-radius: 18rpx;\n    margin: 20rpx;\n    box-shadow: 0 4rpx 18rpx rgba(115, 99, 255, 0.06);\n    border: 1rpx solid rgba(115, 99, 255, 0.08);\n    overflow: hidden;\n    position: relative;\n  }\n  \n  .card-header {\n    padding: 26rpx 20rpx 20rpx;\n    display: flex;\n    align-items: flex-start;\n    position: relative;\n    \n    &::after {\n      content: '';\n      position: absolute;\n      bottom: 0;\n      left: 20rpx;\n      right: 20rpx;\n      height: 1rpx;\n      background: linear-gradient(90deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 105, 222, 0.1) 100%);\n    }\n  }\n  \n  .header-content {\n    display: flex;\n    align-items: center;\n  }\n  \n  .section-indicator {\n    width: 6rpx;\n    height: 32rpx;\n    background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n    border-radius: 3rpx;\n    margin-right: 20rpx;\n    box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.3);\n    align-self: center;\n  }\n  \n  .reply-indicator {\n    background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);\n  }\n  \n  .header-text {\n    flex: 1;\n  }\n  \n  .card-title {\n    font-size: 28rpx;\n    font-weight: 500;\n    color: #1A1A1A;\n    margin-bottom: 6rpx;\n    letter-spacing: 0.3rpx;\n    line-height: 1.3;\n  }\n  \n  .card-subtitle {\n    font-size: 22rpx;\n    color: #666666;\n    opacity: 0.8;\n    line-height: 1.4;\n    margin-left: 20rpx;\n  }\n  \n  /* 用户评价内容样式 */\n  .comment-content {\n    padding: 20rpx;\n  }\n  \n  .rating-display {\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n    margin-bottom: 20rpx;\n  }\n  \n  .rating-label {\n    font-size: 24rpx;\n    color: #666666;\n    font-weight: 500;\n  }\n  \n  .stars {\n    display: flex;\n    gap: 4rpx;\n  }\n  \n  .star {\n    font-size: 32rpx;\n    color: #e0e0e0;\n    transition: color 0.3s;\n  }\n  \n  .star.active {\n    color: #ffd700;\n  }\n  \n  .rating-text {\n    font-size: 24rpx;\n    color: #7363FF;\n    font-weight: 600;\n  }\n  \n  .comment-text-section {\n    margin-bottom: 20rpx;\n  }\n  \n  .comment-text {\n    font-size: 26rpx;\n    color: #1A1A1A;\n    line-height: 1.6;\n    word-break: break-all;\n  }\n  \n  .comment-images-section {\n    margin-bottom: 20rpx;\n  }\n  \n  .images-grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 12rpx;\n  }\n  \n  .image-item {\n    aspect-ratio: 1;\n    border-radius: 12rpx;\n    overflow: hidden;\n    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n  }\n  \n  .comment-image {\n    width: 100%;\n    height: 100%;\n  }\n  \n  .comment-time {\n    text-align: right;\n  }\n  \n  .time-text {\n    font-size: 22rpx;\n    color: #999999;\n  }\n  \n  /* 友伴师回复样式 */\n  .reply-content {\n    padding: 20rpx;\n  }\n  \n  .reply-text-section {\n    margin-bottom: 20rpx;\n  }\n  \n  .reply-text {\n    font-size: 26rpx;\n    color: #1A1A1A;\n    line-height: 1.6;\n    word-break: break-all;\n  }\n  \n  .reply-images-section {\n    margin-bottom: 20rpx;\n  }\n  \n  .reply-image {\n    width: 100%;\n    height: 100%;\n  }\n  \n  .reply-time {\n    text-align: right;\n  }\n  \n  /* 回复输入样式 */\n  .reply-input-content {\n    padding: 20rpx;\n  }\n  \n  .input-section {\n    position: relative;\n    margin-bottom: 24rpx;\n  }\n  \n  .reply-textarea {\n    width: 100%;\n    height: 160rpx;\n    background: #f8f9fe;\n    border: 2rpx solid #e9ecf5;\n    border-radius: 14rpx;\n    padding: 20rpx;\n    font-size: 26rpx;\n    color: #1A1A1A;\n    transition: all 0.3s;\n    box-sizing: border-box;\n  }\n  \n  .reply-textarea:focus {\n    border-color: #7363FF;\n    background: rgba(115, 99, 255, 0.05);\n  }\n  \n  .char-count {\n    position: absolute;\n    bottom: 16rpx;\n    right: 20rpx;\n    font-size: 22rpx;\n    color: #999999;\n  }\n  \n  .input-placeholder {\n    color: #999999;\n    font-size: 26rpx;\n  }\n  \n  /* 图片上传区域样式 */\n  .photo-section {\n    margin-top: 24rpx;\n  }\n  \n  .photo-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16rpx;\n  }\n  \n  .title-text {\n    font-size: 24rpx;\n    color: #1A1A1A;\n    font-weight: 500;\n  }\n  \n  .title-desc {\n    font-size: 22rpx;\n    color: #999999;\n  }\n  \n  .photo-gallery {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 14rpx;\n  }\n  \n  .photo-item {\n    position: relative;\n    aspect-ratio: 1;\n    border-radius: 20rpx;\n    overflow: hidden;\n    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n  }\n  \n  .photo-img {\n    width: 100%;\n    height: 100%;\n  }\n  \n  .photo-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0%, transparent 100%);\n    opacity: 0;\n    transition: opacity 0.3s;\n  }\n  \n  .photo-item:active .photo-overlay {\n    opacity: 0.8;\n  }\n  \n  .photo-remove {\n    position: absolute;\n    top: 12rpx;\n    right: 12rpx;\n    width: 40rpx;\n    height: 40rpx;\n    background: rgba(255, 255, 255, 0.9);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\n  }\n  \n  .remove-text {\n    font-size: 24rpx;\n    color: #ff4757;\n    font-weight: bold;\n  }\n  \n  .photo-add {\n    position: relative;\n    aspect-ratio: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: linear-gradient(135deg, #f8f9fe 0%, #ffffff 100%);\n    border: 3rpx dashed rgba(115, 99, 255, 0.3);\n    border-radius: 20rpx;\n    transition: all 0.3s;\n    overflow: hidden;\n  }\n  \n  .photo-add:active {\n    transform: scale(0.95);\n    border-color: #7363FF;\n    background: rgba(115, 99, 255, 0.05);\n    \n    .add-icon-circle {\n      transform: scale(1.1);\n    }\n  }\n  \n  .add-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    z-index: 2;\n  }\n  \n  .add-icon-circle {\n    width: 70rpx;\n    height: 70rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  \n  .add-icon {\n    width: 32rpx;\n    height: 32rpx;\n    opacity: 0.9;\n  }\n  \n  .add-text {\n    font-size: 24rpx;\n    color: #666666;\n    font-weight: 600;\n    letter-spacing: 0.5rpx;\n  }\n  \n  /* 底部提交按钮样式 */\n  .bottom-submit-section {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(247, 248, 250, 0.95) 100%);\n    backdrop-filter: blur(20rpx);\n    -webkit-backdrop-filter: blur(20rpx);\n    padding: 20rpx 32rpx calc(20rpx + env(safe-area-inset-bottom));\n    border-top: 1rpx solid rgba(115, 99, 255, 0.1);\n    box-shadow: 0 -4rpx 20rpx rgba(115, 99, 255, 0.1);\n    z-index: 100;\n  }\n  \n  .submit-button-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  \n  .bottom-submit-btn {\n    width: 100%;\n    max-width: 600rpx;\n    background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n    border-radius: 24rpx;\n    padding: 20rpx 32rpx;\n    transition: all 0.3s ease;\n    box-shadow: 0 4rpx 12rpx rgba(115, 99, 255, 0.3);\n    \n    &:active:not(.disabled) {\n      transform: scale(0.95);\n      box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.4);\n    }\n    \n    &.disabled {\n      opacity: 0.6;\n      transform: none !important;\n      box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.2);\n    }\n  }\n  \n  .submit-btn-content {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  \n  .submit-loading {\n    width: 40rpx;\n    height: 40rpx;\n    margin-right: 12rpx;\n    border: 4rpx solid rgba(255, 255, 255, 0.3);\n    border-top: 4rpx solid rgba(255, 255, 255, 0.6);\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  .submit-btn-text {\n    font-size: 28rpx;\n    color: #FFFFFF;\n    font-weight: 600;\n    letter-spacing: 0.5rpx;\n  }\n  \n  .loading-dots {\n    display: flex;\n    justify-content: space-between;\n    width: 40rpx;\n    height: 12rpx;\n  }\n  \n  .dot {\n    width: 8rpx;\n    height: 8rpx;\n    background: white;\n    border-radius: 50%;\n    animation: blink 1s linear infinite;\n  }\n  \n  @keyframes blink {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n  }\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n</style>","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/subPackages/partner/order/partner-evaluate.vue'\nwx.createPage(MiniProgramPage)"],"names":["proxy","getCurrentInstance","orderId","ref","companionId","userComment","companionReply","replyText","photos","isSubmitting","canSubmit","computed","onLoad","options","loadCommentList","uni","response","getOrderCommentList","commentList","item","error","addPhoto","maxCount","res","uploadPromises","filePath","index","fileInfo","getFileInfo","uploadResult","uploadFile","fileData","getUploadResult","uploadedUrls","resolve","reject","extension","previewPhoto","urls","photo","deletePhoto","previewUserImage","img","previewReplyImage","submitReply","replyData","createOrderComment","_a","_b","formatTime","timeStr","date","year","month","day","hours","minutes","MiniProgramPage"],"mappings":"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"}