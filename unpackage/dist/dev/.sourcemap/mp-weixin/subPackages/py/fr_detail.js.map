{"version":3,"file":"fr_detail.js","sources":["subPackages/py/fr_detail.vue","subPackages/py/fr_detail.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"fr-detail\">\n\n  \n      <!-- 服务图片区域 -->\n      <view class=\"service-image-section\">\n        <image \n          :src=\"$imgBaseUrl + serviceData.service_image_url\" \n          class=\"service-image\" \n          mode=\"aspectFill\"\n          @error=\"onImageError\"\n        />\n        <view class=\"image-overlay\">\n          <view class=\"service-price-tag\">\n            <text class=\"price-symbol\">¥</text>\n            <text class=\"price-amount\">{{ serviceData.price || 0 }}</text>\n            <text class=\"price-unit\">/{{ serviceData.unit || '小时' }}起</text>\n          </view>\n        </view>\n      </view>\n  \n      <!-- 服务信息区域 -->\n      <view class=\"service-info-section\">\n        <view class=\"service-header\">\n          <text class=\"service-title\">{{ serviceData.service_name }}</text>\n        </view>\n  \n        <!-- 服务标签 -->\n        <view class=\"service-tags\" v-if=\"serviceData.service_tags && serviceData.service_tags.length > 0\">\n          <text \n            v-for=\"(tag, index) in serviceData.service_tags\" \n            :key=\"index\" \n            class=\"tag-item\"\n          >\n            {{ tag }}\n          </text>\n        </view>\n  \n        <!-- 服务描述 -->\n        <view class=\"service-description\">\n          <text class=\"description-title\">服务介绍</text>\n          <text class=\"description-content\">\n            我们提供专业的{{ serviceData.service_name }}服务，确保您获得最优质的体验。\n            我们的服务人员都经过专业培训，具备丰富的经验，能够为您提供贴心、周到的服务。\n          </text>\n        </view>\n  \n        <!-- 服务特色 -->\n        <view class=\"service-features\">\n          <text class=\"features-title\">服务特色</text>\n          <view class=\"feature-list\">\n            <view class=\"feature-item\">\n              <text class=\"feature-icon\">✓</text>\n              <text class=\"feature-text\">专业认证</text>\n            </view>\n            <view class=\"feature-item\">\n              <text class=\"feature-icon\">✓</text>\n              <text class=\"feature-text\">安全保障</text>\n            </view>\n            <view class=\"feature-item\">\n              <text class=\"feature-icon\">✓</text>\n              <text class=\"feature-text\">品质保证</text>\n            </view>\n            <view class=\"feature-item\">\n              <text class=\"feature-icon\">✓</text>\n              <text class=\"feature-text\">售后无忧</text>\n            </view>\n          </view>\n        </view>\n      </view>\n  \n      <!-- 底部操作区域 -->\n      <view class=\"bottom-actions\">\n        <view class=\"action-buttons\">\n          <view class=\"order-btn\" @click=\"goToOrder\">\n            <text class=\"btn-text\">立即下单</text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </template>\n  \n  <script setup>\n  import { ref, onMounted, computed } from 'vue'\n  import { useUserStore } from '@/stores/user.js'\n  \n  // 用户状态管理\n  const userStore = useUserStore()\n  \n  // 服务数据\n  const serviceData = ref({\n    service_id: '',\n    price_template_id: '',\n    companion_id: '',\n    level_order: '',\n    nickname: '',\n    service_name: '',\n    service_image_url: '',\n    price: 0,\n    unit: '小时',\n    service_tags: []\n  })\n  \n  // 获取页面参数\n  onMounted(() => {\n    // 获取页面参数\n    const pages = getCurrentPages()\n    const currentPage = pages[pages.length - 1]\n    const options = currentPage.options\n    \n    if (options) {\n      serviceData.value = {\n        service_id: options.service_id || '',\n        price_template_id: options.price_template_id || '',\n        companion_id: options.companion_id || '',\n        level_order: options.level_order || '',\n        nickname: options.nickname || '',\n        service_name: decodeURIComponent(options.service_name || ''),\n        service_image_url: decodeURIComponent(options.service_image_url || ''),\n        price: parseFloat(options.price) || 0,\n        unit: options.unit || '小时',\n        service_tags: options.service_tags ? JSON.parse(decodeURIComponent(options.service_tags)) : []\n      }\n    }\n    \n    console.log('服务详情数据:', serviceData.value)\n  })\n  \n  // 图片加载失败处理\n  const onImageError = () => {\n    console.log('图片加载失败')\n  }\n  \n  // 去下单\n  const goToOrder = () => {\n    // 检查登录状态\n    if (!userStore.token) {\n      uni.showModal({\n        title: '提示',\n        content: '请先登录后再下单',\n        confirmText: '去登录',\n        cancelText: '取消',\n        success: (res) => {\n          if (res.confirm) {\n            // 跳转到登录页面\n            uni.navigateTo({\n              url: '/subPackages/login/index'\n            })\n          }\n        }\n      })\n      return\n    }\n    \n    // 已登录，跳转到下单页面\n    console.log('跳转到下单页面，服务信息:', serviceData.value)\n    uni.navigateTo({\n      url: `/subPackages/order/submit?service_id=${serviceData.value.service_id}&price_template_id=${serviceData.value.price_template_id || ''}&companion_id=${serviceData.value.companion_id || 15}&level_order=${serviceData.value.level_order || ''}&nickname=${serviceData.value.nickname || ''}`\n    })\n  }\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  @import \"@/styles/variables.scss\";\n  \n  .fr-detail {\n    min-height: 100vh;\n    background: $bg-color-secondary;\n  }\n  \n  /* 服务图片区域 */\n  .service-image-section {\n    position: relative;\n    margin-top: 0;\n    height: 500rpx;\n    overflow: hidden;\n  }\n  \n  .service-image {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n  \n  .image-overlay {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.6));\n    padding: 40rpx 24rpx;\n  }\n\n  .service-price-tag {\n    display: flex;\n    align-items: baseline;\n    background: rgba(255, 255, 255, 0.95);\n    padding: 16rpx 24rpx;\n    border-radius: 24rpx;\n    backdrop-filter: blur(10rpx);\n    -webkit-backdrop-filter: blur(10rpx);\n    box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);\n  }\n\n  .price-symbol {\n    font-size: 24rpx;\n    color: $pricelight-color;\n    font-weight: 600;\n  }\n\n  .price-amount {\n    font-size: 36rpx;\n    color: $pricelight-color;\n    font-weight: 700;\n    margin: 0 4rpx;\n  }\n\n  .price-unit {\n    font-size: 20rpx;\n    color: $text-color-secondary;\n    font-weight: 500;\n  }\n\n  /* 服务信息区域 */\n  .service-info-section {\n    background: $bg-color-primary;\n    border-radius: 32rpx 32rpx 0 0;\n    margin-top: -32rpx;\n    padding: 40rpx 24rpx;\n    position: relative;\n    z-index: 10;\n  }\n\n  .service-header {\n    margin-bottom: 24rpx;\n  }\n\n  .service-title {\n    font-size: 36rpx;\n    font-weight: 700;\n    color: $text-color-primary;\n    line-height: 1.4;\n  }\n\n  /* 服务标签 */\n  .service-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 12rpx;\n    margin-bottom: 32rpx;\n  }\n\n  .tag-item {\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.08) 0%, rgba(255, 255, 255, 0.8) 100%);\n    color: $primary-color;\n    padding: 8rpx 16rpx;\n    border-radius: 20rpx;\n    font-size: 22rpx;\n    font-weight: 600;\n    border: 1rpx solid rgba(115, 99, 255, 0.15);\n  }\n\n  /* 服务描述 */\n  .service-description {\n    margin-bottom: 32rpx;\n  }\n\n  .description-title {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: $text-color-primary;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n\n  .description-content {\n    font-size: 26rpx;\n    color: $text-color-secondary;\n    line-height: 1.6;\n    display: block;\n  }\n\n  /* 服务特色 */\n  .service-features {\n    margin-bottom: 32rpx;\n  }\n\n  .features-title {\n    font-size: 28rpx;\n    font-weight: 600;\n    color: $text-color-primary;\n    margin-bottom: 20rpx;\n    display: block;\n  }\n\n  .feature-list {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 20rpx;\n  }\n\n  .feature-item {\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n  }\n\n  .feature-icon {\n    width: 32rpx;\n    height: 32rpx;\n    background: linear-gradient(135deg, $primary-color 0%, $highlight-color 100%);\n    color: white;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 20rpx;\n    font-weight: bold;\n  }\n\n  .feature-text {\n    font-size: 24rpx;\n    color: $text-color-secondary;\n    font-weight: 500;\n  }\n\n  /* 底部操作区域 */\n  .bottom-actions {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: $bg-color-primary;\n    padding: 24rpx;\n    border-top: 1rpx solid rgba(0, 0, 0, 0.06);\n    box-shadow: 0 -8rpx 24rpx rgba(0, 0, 0, 0.08);\n  }\n\n  .action-buttons {\n    display: flex;\n    justify-content: center;\n  }\n\n  .order-btn {\n    width: 100%;\n    background: linear-gradient(135deg, $primary-color 0%, $highlight-color 100%);\n    border-radius: 32rpx;\n    padding: 24rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 8rpx 24rpx rgba(115, 99, 255, 0.25);\n    transition: all 0.3s;\n  }\n\n  .order-btn:active {\n    transform: scale(0.95);\n    box-shadow: 0 12rpx 32rpx rgba(115, 99, 255, 0.35);\n  }\n\n  .btn-text {\n    color: white;\n    font-size: 28rpx;\n    font-weight: 600;\n  }\n</style>","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/subPackages/py/fr_detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["userStore","useUserStore","serviceData","ref","onMounted","pages","options","uni","onImageError","goToOrder","res","MiniProgramPage"],"mappings":"wHAuFE,MAAMA,EAAYC,EAAAA,aAAc,EAG1BC,EAAcC,EAAAA,IAAI,CACtB,WAAY,GACZ,kBAAmB,GACnB,aAAc,GACd,YAAa,GACb,SAAU,GACV,aAAc,GACd,kBAAmB,GACnB,MAAO,EACP,KAAM,KACN,aAAc,CAAE,CACpB,CAAG,EAGDC,EAAAA,UAAU,IAAM,CAEd,MAAMC,EAAQ,gBAAiB,EAEzBC,EADcD,EAAMA,EAAM,OAAS,CAAC,EACd,QAExBC,IACFJ,EAAY,MAAQ,CAClB,WAAYI,EAAQ,YAAc,GAClC,kBAAmBA,EAAQ,mBAAqB,GAChD,aAAcA,EAAQ,cAAgB,GACtC,YAAaA,EAAQ,aAAe,GACpC,SAAUA,EAAQ,UAAY,GAC9B,aAAc,mBAAmBA,EAAQ,cAAgB,EAAE,EAC3D,kBAAmB,mBAAmBA,EAAQ,mBAAqB,EAAE,EACrE,MAAO,WAAWA,EAAQ,KAAK,GAAK,EACpC,KAAMA,EAAQ,MAAQ,KACtB,aAAcA,EAAQ,aAAe,KAAK,MAAM,mBAAmBA,EAAQ,YAAY,CAAC,EAAI,CAAE,CAC/F,GAGHC,EAAA,MAAA,MAAA,MAAA,sCAAY,UAAWL,EAAY,KAAK,CAC5C,CAAG,EAGD,MAAMM,EAAe,IAAM,CACzBD,EAAAA,MAAA,MAAA,MAAA,sCAAY,QAAQ,CACrB,EAGKE,EAAY,IAAM,CAEtB,GAAI,CAACT,EAAU,MAAO,CACpBO,EAAAA,MAAI,UAAU,CACZ,MAAO,KACP,QAAS,WACT,YAAa,MACb,WAAY,KACZ,QAAUG,GAAQ,CACZA,EAAI,SAENH,EAAAA,MAAI,WAAW,CACb,IAAK,0BACnB,CAAa,CAEJ,CACT,CAAO,EACD,MACD,CAGDA,EAAY,MAAA,MAAA,MAAA,sCAAA,gBAAiBL,EAAY,KAAK,EAC9CK,EAAAA,MAAI,WAAW,CACb,IAAK,wCAAwCL,EAAY,MAAM,UAAU,sBAAsBA,EAAY,MAAM,mBAAqB,EAAE,iBAAiBA,EAAY,MAAM,cAAgB,EAAE,gBAAgBA,EAAY,MAAM,aAAe,EAAE,aAAaA,EAAY,MAAM,UAAY,EAAE,EACnS,CAAK,CACF,0ZC9JH,GAAG,WAAWS,CAAe"}