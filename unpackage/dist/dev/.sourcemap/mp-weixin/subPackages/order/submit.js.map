{"version":3,"file":"submit.js","sources":["subPackages/order/submit.vue","subPackages/order/submit.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"submit-order-container\">\n    <scroll-view \n      scroll-y=\"true\" \n      class=\"scroll-content\" \n    >\n      <!-- 地址选择 -->\n      <view class=\"section-card\">\n        <view class=\"section-item\" @click=\"selectAddress\">\n          <view class=\"item-left\">\n            <image src=\"/static/icons/friend/yuan_dingwei.png\" class=\"item-icon\" mode=\"aspectFit\" />\n            <text class=\"item-text\" :class=\"{ 'selected': selectedAddress !== '请选择地址' }\">{{ selectedAddress }}</text>\n          </view>\n          <image src=\"/static/icons/common/arrow-right.png\" class=\"arrow-icon\" mode=\"aspectFit\" />\n        </view>\n      </view>\n\n      <!-- 服务时间和出行方式 -->\n      <view class=\"section-card\">\n        <view class=\"section-item\" @click=\"selectServiceTime\">\n          <view class=\"item-left\">\n            <text class=\"item-text\">服务时间</text>\n          </view>\n          <view class=\"item-right\">\n            <text class=\"time-text\">{{ serviceTime }}</text>\n            <image src=\"/static/icons/common/arrow-right.png\" class=\"arrow-icon\" mode=\"aspectFit\" />\n          </view>\n        </view>\n        <view class=\"section-item\">\n          <view class=\"item-left\">\n            <text class=\"item-text\">出行方式</text>\n          </view>\n          <view class=\"item-right\">\n            <view class=\"radio-group\">\n              <view class=\"radio-item\" @click=\"selectTravelMethod('taxi')\">\n                <view class=\"radio-circle\" :class=\"{ active: travelMethod === 'taxi' }\">\n                  <view v-if=\"travelMethod === 'taxi'\" class=\"radio-dot\"></view>\n                </view>\n                <text class=\"radio-text\">出租车</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 服务项目 -->\n      <view class=\"section-card \" v-if=\"serviceInfo?.service\">\n        <view class=\"service-item\">\n          <image :src=\"$imgBaseUrl + serviceInfo?.service?.image_url\" class=\"service-img\" mode=\"aspectFill\" />\n          <view class=\"service-info\">\n            <text class=\"service-title\">{{ serviceInfo?.service?.name }}</text>\n            <view class=\"service-price-row\">\n              <text class=\"service-price\">¥{{ serviceInfo?.price_info?.unit_price }}</text>\n              <text class=\"service-duration\">/ {{ serviceInfo?.price_info?.unit}}</text>\n            </view>\n            <text class=\"service-provider\">{{ params.nickname}}</text>\n          </view>\n          <view class=\"quantity-selector\">\n            <view \n              class=\"quantity-btn minus\" \n              :class=\"{ disabled: quantity <= (serviceInfo?.price_info?.min_quantity || 1) }\"\n              @click=\"decreaseQuantity\"\n            >\n              <image src=\"/static/icons/friend/del_icon.png\" class=\"quantity-icon\" mode=\"aspectFit\" />\n            </view>\n            <text class=\"quantity-text\">{{ quantity }}</text>\n            <view class=\"quantity-btn plus\" @click=\"increaseQuantity\">\n              <image src=\"/static/icons/friend/add_icon.png\" class=\"quantity-icon\" mode=\"aspectFit\" />\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 费用 -->\n      <view class=\"section-card\">\n                <view class=\"section-item\">\n          <view class=\"item-left\">\n            <text class=\"item-text\">往返车费</text>\n          </view>\n          <view class=\"item-right\">\n            <text class=\"fare-text\">¥{{ roundTripFare.toFixed(2) }}</text>\n          </view>\n        </view>\n        <view class=\"fare-detail\">\n          <text class=\"fare-detail-text\">全程共{{ totalDistance }}km，出租出行收取来回车费，1km内，起步10元。里程计价1.5元/km</text>\n         \n        </view>\n      </view>\n\n      <!-- 订单备注 -->\n      <view class=\"section-card\">\n        <view class=\"section-item\">\n          <view class=\"item-left\">\n            <text class=\"item-text\">订单备注</text>\n          </view>\n          <view class=\"item-right\">\n            <input \n              v-model=\"orderNotes\" \n              placeholder=\"请输入备注信息\" \n              class=\"notes-input\"\n              maxlength=\"200\"\n            />\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n\n    <!-- 底部提交按钮 -->\n    <view class=\"action-buttons\">\n      <view class=\"action-container\">\n        <view class=\"price-summary\">\n          <text class=\"total-price\">合计: ¥{{ totalPrice.toFixed(2) }}</text>\n        </view>\n        <view class=\"submit-btn\" @click=\"submitOrder\">\n          提交订单\n        </view>\n      </view>\n    </view>\n\n        <!-- 时间选择弹框 -->\n    <uni-popup ref=\"timePickerPopup\" type=\"bottom\" :mask-click=\"true\" @close=\"showTimePicker = false\" round=\"20\">\n      <view class=\"time-picker-content\">\n        <!-- 日期导航栏 -->\n        <view class=\"day-filter\">\n          <scroll-view \n            class=\"day-scroll\" \n            scroll-x=\"true\" \n            show-scrollbar=\"false\" \n            :scroll-left=\"dayScrollLeft\" \n            :scroll-with-animation=\"dayScrollWithAnimation\"\n          >\n            <view class=\"day-tabs\">\n              <view \n                v-for=\"(day, index) in availableSchedule\" \n                :key=\"index\"\n                class=\"day-tab\"\n                :class=\"{ active: selectedDayIndex === index }\"\n                @click=\"switchDay(index)\"\n              >\n                <text class=\"day-name\">{{ day.day_name }}</text>\n                <text class=\"day-date\">{{ day.date }}</text>\n              </view>\n            </view>\n          </scroll-view>\n        </view>\n\n        <!-- 时间段列表 -->\n        <view class=\"time-slots-container\">\n          <view class=\"time-slots-grid\">\n            <view \n              v-for=\"(timeSlot, index) in getCurrentDayTimeSlots()\" \n              :key=\"index\"\n              class=\"time-slot-item\"\n              :class=\"{ \n                'available': timeSlot.status === 1,\n                'unavailable': timeSlot.status === 2,\n                'selected': selectedTimeSlot === timeSlot\n              }\"\n              @click=\"selectTimeSlot(timeSlot)\"\n            >\n              <text class=\"time-text\">{{ timeSlot.time }}</text>\n             \n            </view>\n         \n          </view>\n          <view style=\"height: 40rpx;\"></view>\n        </view>\n\n\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, nextTick } from 'vue'\nimport { getServiceInfo, calculateDistance, getCompanionAvailableSchedule, createOrderV2, orderParams } from '@/api/order.js'\n\n// 页面参数\nconst params = ref({})\n\n// 表单数据\nconst serviceTime = ref('')\nconst travelMethod = ref('taxi')\nconst quantity = ref(1)\nconst roundTripFare = ref(0.00)\nconst totalDistance = ref(0)\nconst orderNotes = ref('')\n\n// 时间选择相关数据\nconst showTimePicker = ref(false)\nconst availableSchedule = ref([])\nconst selectedDayIndex = ref(0)\nconst selectedTimeSlot = ref(null)\nconst dayScrollLeft = ref(0)\nconst dayScrollWithAnimation = ref(false)\nconst timePickerPopup = ref(null)\n\n// 地址选择相关数据\nconst selectedAddress = ref('请选择地址')\nconst selectedLocation = ref(null)\n\n// 服务信息\nconst serviceInfo = ref({\n\n})\n\n\n// 计算总价\nconst totalPrice = computed(() => {\n  const servicePrice = serviceInfo.value?.price_info?.unit_price * quantity.value || 0\n  const total = servicePrice + roundTripFare.value\n  return Number(total.toFixed(2))\n})\n\n// 加载服务信息\nconst loadServiceInfo = async () => {\n  try {\n    const { service_id, level_order, companion_id, price_template_id } = params.value\n    \n    if (!service_id || !level_order || !companion_id || !price_template_id) {\n      console.warn('缺少必要的参数')\n      return\n    }\n    \n    const response = await getServiceInfo({\n      service_id: Number(service_id)    ,\n      level_order: Number(level_order),\n      companion_id: Number(companion_id),\n      price_template_id: Number(price_template_id)\n    })\n    console.log(\"response.data\",response.data)\n    if (response.data.code === 0) {\n      const data = response.data.data\n      // 更新服务信息\n      serviceInfo.value = data\n      \n      // 设置默认数量为最小数量\n      const minQuantity = data?.price_info?.min_quantity || 1\n      quantity.value = minQuantity\n    } else {\n      throw new Error(response.data.msg || '获取服务信息失败')\n    }\n  } catch (error) {\n    console.error('加载服务信息失败:', error)\n    uni.showToast({\n      title: error.message || '加载服务信息失败',\n      icon: 'none'\n    })\n  }\n}\n\n// 获取友伴师微信 openid\n\n// 选择地址\nconst selectAddress = () => {\n  // #ifdef MP-WEIXIN\n  uni.chooseLocation({\n    success: async (res) => {\n      const address = res.address || res.name || '已选择位置'\n      console.log('手动选择位置', res)\n      \n      // 更新显示\n      selectedAddress.value = address\n      selectedLocation.value = {\n        latitude: res.latitude,\n        longitude: res.longitude,\n        address: address\n      }\n      \n      // 调用计算距离接口\n      await calculateOrderDistance(res.latitude, res.longitude)\n      \n    },\n    fail: (err) => {\n      if (err.errMsg && err.errMsg.indexOf('cancel') === -1) {\n        uni.showToast({\n          title: '获取位置失败',\n          icon: 'none'\n        })\n        console.error('获取位置失败:', err.errMsg)\n      }\n    }\n  })\n  // #endif\n  // #ifndef MP-WEIXIN\n  uni.showToast({\n    title: '请在微信小程序中使用地图选点',\n    icon: 'none'\n  })\n  // #endif\n}\n\n// 选择服务时间\nconst selectServiceTime = () => {\n  if (availableSchedule.value.length === 0) {\n    uni.showToast({\n      title: '暂无可用时间',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // 自动选择第一个有可用时间段的日期\n  selectedDayIndex.value = getFirstAvailableDayIndex()\n  \n  showTimePicker.value = true\n  \n  // 初始化日期导航滚动位置\n  nextTick(() => {\n    dayScrollWithAnimation.value = false;\n    dayScrollLeft.value = 0;\n    // 打开弹框\n    timePickerPopup.value.open();\n  });\n}\n\n\n\n// 切换选中的日期\nconst switchDay = (index) => {\n  selectedDayIndex.value = index\n  selectedTimeSlot.value = null\n  \n  // 开启滚动动画\n  dayScrollWithAnimation.value = true\n  \n  // 延迟执行滚动，确保DOM更新完成\n  nextTick(() => {\n    // 计算导航项的实际宽度（包括padding）\n    const itemWidth = uni.upx2px(140); // 每个导航项的宽度（rpx转px）\n    const containerWidth = uni.getWindowInfo().windowWidth;\n    const padding = uni.upx2px(40); // 左右padding\n    const availableWidth = containerWidth - padding;\n    \n    // 计算可视区域可以显示的导航项数量（估算值）\n    const visibleItems = Math.floor(availableWidth / itemWidth * 0.8);\n    \n    if (index > 2) {\n      // 计算最佳滚动位置：保持选中项稍微偏左，让用户可以看到右侧还有导航项\n      // 这里我们让选中的导航项位于可视区域的1/3处\n      const scrollPos = Math.max(0, index * itemWidth - visibleItems * itemWidth / 3);\n      dayScrollLeft.value = scrollPos;\n    } else {\n      // 如果是前几个导航项，滚回开始位置\n      dayScrollLeft.value = 0;\n    }\n    \n    // 滚动完成后关闭动画（可选，保持动画开启也可以）\n    setTimeout(() => {\n      dayScrollWithAnimation.value = false;\n    }, 300);\n  });\n}\n\n// 选择时间段\nconst selectTimeSlot = (timeSlot) => {\n  if (timeSlot.status !== 1) return // 只能选择可约的时间段\n  \n  selectedTimeSlot.value = timeSlot\n  const selectedDay = availableSchedule.value[selectedDayIndex.value]\n  serviceTime.value = `${selectedDay.day_name} ${selectedDay.date} ${timeSlot.time}`\n  timePickerPopup.value.close()\n  showTimePicker.value = false\n}\n\n// 获取第一个有可用时间段的日期索引\nconst getFirstAvailableDayIndex = () => {\n  if (availableSchedule.value.length === 0) return 0\n  \n  for (let i = 0; i < availableSchedule.value.length; i++) {\n    const daySchedule = availableSchedule.value[i]\n    const timeSlots = daySchedule?.time_slots || []\n    const hasAvailableSlots = timeSlots.some(slot => slot.status === 1)\n    \n    if (hasAvailableSlots) {\n      return i\n    }\n  }\n  \n  return 0 // 如果没有找到有可用时间段的日期，返回第一个\n}\n\n// 获取当前选中日期的可用时间段\nconst getCurrentDayTimeSlots = () => {\n  if (availableSchedule.value.length === 0) return []\n  return availableSchedule.value[selectedDayIndex.value]?.time_slots || []\n}\n\n// 选择出行方式\nconst selectTravelMethod = (method) => {\n  travelMethod.value = method\n}\n\n// 增加数量\nconst increaseQuantity = () => {\n  quantity.value++\n}\n\n// 减少数量\nconst decreaseQuantity = () => {\n  const minQuantity = serviceInfo.value?.price_info?.min_quantity || 1\n  if (quantity.value > minQuantity) {\n    quantity.value--\n  }\n}\n\n// 计算订单距离\nconst calculateOrderDistance = async (userLatitude, userLongitude) => {\n  try {\n    const requestData = {\n      companion_id: Number(params.value.companion_id),\n      user_latitude: userLatitude,\n      user_longitude: userLongitude\n    }\n    \n    console.log('计算距离请求参数:', requestData)\n    \n    const response = await calculateDistance(requestData)\n    \n    if (response.data && response.data.code === 0) {\n      const result = response.data.data\n      console.log('距离计算结果:', result)\n      \n      // 更新距离和车费信息\n      if (result.distance !== undefined) {\n        totalDistance.value = result.distance\n      }\n      if (result.transport_fee !== undefined) {\n        // 车费 = transport_fee * 2，注意计算精度\n        roundTripFare.value = Number((result.transport_fee * 2).toFixed(2))\n      }\n      \n   \n    } else {\n      console.error('计算距离失败:', response.data?.msg)\n      uni.showToast({\n        title: response.data?.msg || '计算距离失败',\n        icon: 'none'\n      })\n    }\n  } catch (error) {\n    console.error('计算距离接口调用失败:', error)\n    uni.showToast({\n      title: '计算距离失败，请重试',\n      icon: 'none'\n    })\n  }\n}\n\n// 查看计费规则\nconst viewBillingRules = () => {\n  uni.showToast({\n    title: '查看计费规则功能',\n    icon: 'none'\n  })\n}\n\n// 请求订阅消息权限\nconst requestSubscribeMessage = async () => {\n  const tmplIds = [\n    'zovIGlvjM10gOUEZjOB-lOQwISsM0PLqfMtIJPbWf4Y',\n    'vrMAJmeAOA0j3yRGX6AjNEJxqaJ2mvERTFlV89fK3GA'\n  ]\n  \n  try {\n    console.log('开始请求订阅消息权限')\n    \n    const res = await new Promise((resolve, reject) => {\n      uni.requestSubscribeMessage({\n        tmplIds: tmplIds,\n        success: (result) => {\n          console.log('订阅消息请求结果:', result)\n          resolve(result)\n        },\n        fail: (error) => {\n          console.error('订阅消息请求失败:', error)\n          reject(error)\n        }\n      })\n    })\n    \n    // 处理订阅结果\n    let acceptedCount = 0\n    let rejectedCount = 0\n    let allAccepted = true\n    \n    tmplIds.forEach(tmplId => {\n      if (res[tmplId] === 'accept') {\n        acceptedCount++\n      } else if (res[tmplId] === 'reject') {\n        rejectedCount++\n        allAccepted = false\n      } else {\n        // 用户点击了关闭按钮或其他情况，视为未授权\n        allAccepted = false\n      }\n    })\n    \n    if (acceptedCount > 0) {\n      console.log('用户同意订阅消息')\n      uni.showToast({\n        title: '已开启订单提醒',\n        icon: 'success'\n      })\n    }\n    \n    if (rejectedCount > 0) {\n      console.log('用户拒绝订阅消息')\n      // 引导用户去设置页面重新授权\n      return new Promise((resolve) => {\n        uni.showModal({\n          title: '订单提醒权限',\n          content: '为了您能及时接收订单状态通知，是否去设置页面重新授权？',\n          confirmText: '去设置',\n          cancelText: '暂不开启',\n          success: (modalRes) => {\n            if (modalRes.confirm) {\n              // 打开设置页面\n              uni.openSetting({\n                success: (settingRes) => {\n                  // 检查用户是否开启了订阅消息权限\n                  if (settingRes.authSetting['scope.subscribeMessage']) {\n                    // 用户同意订阅，再次请求\n                    uni.requestSubscribeMessage({\n                      tmplIds: tmplIds,\n                      success: (subscribeRes) => {\n                        console.log('重新授权成功:', subscribeRes)\n                        // 检查重新授权的结果\n                        let reAcceptedCount = 0\n                        let reAllAccepted = true\n                        tmplIds.forEach(tmplId => {\n                          if (subscribeRes[tmplId] === 'accept') {\n                            reAcceptedCount++\n                          } else {\n                            reAllAccepted = false\n                          }\n                        })\n                        \n                        if (reAcceptedCount > 0) {\n                          uni.showToast({\n                            title: '已开启订单提醒',\n                            icon: 'success'\n                          })\n                        }\n                        \n                        resolve(reAllAccepted)\n                      },\n                      fail: (err) => {\n                        console.log('重新授权失败:', err)\n                        resolve(false)\n                      }\n                    })\n                  } else {\n                    uni.showToast({\n                      title: '未开启订单提醒',\n                      icon: 'none'\n                    })\n                    resolve(false)\n                  }\n                },\n                fail: (err) => {\n                  console.error('打开设置页面失败:', err)\n                  resolve(false)\n                }\n              })\n            } else {\n              uni.showToast({\n                title: '未开启订单提醒',\n                icon: 'none'\n              })\n              resolve(false)\n            }\n          }\n        })\n      })\n    }\n    \n    if (acceptedCount === 0 && rejectedCount === 0) {\n      // 其他情况（如用户点击了关闭按钮等）\n      console.log('用户未明确选择订阅消息')\n      uni.showToast({\n        title: '未开启订单提醒',\n        icon: 'none'\n      })\n      return false\n    }\n    \n    return allAccepted\n  } catch (error) {\n    console.error('订阅消息请求异常:', error)\n    uni.showToast({\n      title: '订阅消息请求失败',\n      icon: 'none'\n    })\n    return false\n  }\n}\n\n// 提交订单\nconst submitOrder = async () => {\n  // 验证地址是否已选择\n  if (selectedAddress.value === '请选择地址') {\n    uni.showToast({\n      title: '请先选择服务地址',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // 验证服务时间是否已选择\n  if (!serviceTime.value) {\n    uni.showToast({\n      title: '请先选择服务时间',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // 先请求订阅消息权限\n  const subscribeResult = await requestSubscribeMessage()\n  \n  \n  \n  // 解析服务时间，提取日期和时间段\n  // 格式可能是 \"周一 2024-01-15 09:00\" 或 \"2024-01-15 09:00\"\n  const timeMatch = serviceTime.value.match(/(\\d{4}-\\d{2}-\\d{2})\\s+(.+)/)\n  if (!timeMatch) {\n    uni.showToast({\n      title: '服务时间格式错误',\n      icon: 'none'\n    })\n    return\n  }\n  \n  const serviceDate = timeMatch[1] // YYYY-MM-DD\n  const serviceTimeSlot = timeMatch[2] // 时间段\n  \n  const orderData = {\n    companion_id: Number(params.value.companion_id),\n    service_id: Number(params.value.service_id),\n    level_order: Number(params.value.level_order),\n    price_template_id: Number(params.value.price_template_id),\n    quantity: quantity.value,\n    service_address: selectedAddress.value,\n    service_date: serviceDate,\n    service_time: serviceTimeSlot,\n    remark: orderNotes.value,\n    user_latitude: selectedLocation.value?.latitude,\n    user_longitude: selectedLocation.value?.longitude\n  }\n  \n  console.log('提交订单数据:', orderData)\n  \n  uni.showLoading({\n    title: '提交中...'\n  })\n  \n  try {\n    // 调用创建订单接口\n    const response = await createOrderV2(orderData)\n    \n    if (response.data.code === 0) {\n      console.log('订单创建成功:', response.data)\n      \n      // 调用订单创建成功接口\n      try {\n        const orderParamsData = {\n          order_id: response.data.data.order_id,\n          payment_method: 1\n        }\n        const paramsResponse = await orderParams(orderParamsData)\n        \n        if (paramsResponse.data.code === 0) {\n          // 调用微信支付\n          uni.requestPayment({\n            provider: 'wxpay',\n            ...paramsResponse.data.data.pay_params,\n            success: async (res) => {\n              console.log('支付成功', res);\n              uni.showToast({\n                title: '支付成功',\n                icon: 'success',\n              });\n              \n              \n              // 支付成功后返回上一层\n              setTimeout(() => {\n                uni.navigateBack()\n              }, 1500)\n            },\n            fail: (err) => {\n              console.error('支付失败', JSON.stringify(err));\n              uni.showToast({\n                title: '支付失败',\n                icon: 'none'\n              })\n            },\n          });\n        } else {\n          throw new Error(paramsResponse.data.msg || '获取支付参数失败')\n        }\n      } catch (error) {\n        console.error('获取支付参数失败:', error)\n        uni.showToast({\n          title: error.message || '获取支付参数失败',\n          icon: 'none'\n        })\n      }\n    } else {\n      throw new Error(response.data.msg || '创建订单失败')\n    }\n  } catch (error) {\n    console.error('提交订单失败:', error)\n    uni.showToast({\n      title: error.message || '提交订单失败',\n      icon: 'none'\n    })\n  } finally {\n    uni.hideLoading()\n  }\n}\n\nonMounted(() => {\n  // 获取页面参数\n  const pages = getCurrentPages()\n  const currentPage = pages[pages.length - 1]\n  params.value = currentPage.options || {}\n  \n  console.log('订单提交页面参数:', params.value)\n  \n  // 加载服务信息\n  loadServiceInfo()\n  \n  \n  // 调用友伴师可用时间安排接口\n  if (params.value.companion_id) {\n    getCompanionAvailableSchedule(Number(params.value.companion_id))\n      .then(response => {\n        console.log('友伴师可用时间安排:', response)\n        if (response.data && response.data.code === 0) {\n          availableSchedule.value = response.data.data.schedule || []\n          // 自动选择第一个有可用时间段的日期\n          if (availableSchedule.value.length > 0) {\n            selectedDayIndex.value = getFirstAvailableDayIndex()\n          }\n        }\n      })\n      .catch(error => {\n        console.error('获取友伴师可用时间安排失败:', error)\n      })\n  }\n})\n</script>\n\n<style scoped>\n.submit-order-container {\n  min-height: 100vh;\n  background: #F8F8F8;\n  padding-bottom: calc(120rpx + env(safe-area-inset-bottom));\n}\n\n.scroll-content {\n  height: calc(100vh - 120rpx);\n  padding-bottom: 20rpx;\n}\n\n.section-card {\n  background: #fff;\n  margin: 20rpx;\n  border-radius: 16rpx;\n  overflow: hidden;\n\n}\n\n.section-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding:  24rpx;\n\n}\n\n.section-item:last-child {\n  border-bottom: none;\n}\n\n.item-left {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n}\n\n.item-icon {\n  width: 40rpx;\n  height: 40rpx;\n}\n\n.item-text {\n  font-size: 28rpx;\n  color: #1a1a1a;\n  font-weight: 500;\n}\n\n\n.item-right {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n}\n\n.arrow-icon {\n  width: 30rpx;\n  height: 30rpx;\n}\n\n.time-text {\n  font-size: 28rpx;\n  color: #7363FF;\n  font-weight: 500;\n}\n\n.radio-group {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n}\n\n.radio-item {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n}\n\n.radio-circle {\n  width: 32rpx;\n  height: 32rpx;\n  border: 2rpx solid #ddd;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.radio-circle.active {\n  border-color: #7363FF;\n}\n\n.radio-dot {\n  width: 16rpx;\n  height: 16rpx;\n  background: #7363FF;\n  border-radius: 50%;\n}\n\n.radio-text {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.service-card {\n  margin-top: 32rpx;\n}\n\n.service-item {\n  display: flex;\n  align-items: center;\n  padding: 24rpx;\n  gap: 20rpx;\n}\n\n.service-img {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 12rpx;\n  object-fit: cover;\n}\n\n.service-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6rpx;\n}\n\n.service-title {\n  font-size: 28rpx;\n  font-weight: 500;\n  color: #1a1a1a;\n}\n\n.service-price-row {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n}\n\n.service-price {\n  font-size: 32rpx;\n  color: #ff4757;\n  font-weight: 600;\n}\n\n.service-duration {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.service-provider {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.quantity-selector {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n}\n\n.quantity-btn {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.quantity-btn.minus {\n  background: #f0f0f0;\n}\n\n.quantity-btn.plus {\n  background: #7363FF;\n}\n\n.quantity-btn:active:not(.disabled) {\n  transform: scale(0.9);\n}\n\n.quantity-btn.disabled {\n  opacity: 0.4;\n  background: #e0e0e0;\n}\n\n.quantity-icon {\n  width: 100%;\n  height: 100%;\n}\n\n.quantity-text {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 500;\n  min-width: 40rpx;\n  text-align: center;\n}\n\n.fare-text {\n  font-size: 28rpx;\n  color: #ff4757;\n  font-weight: 500;\n}\n\n.fare-detail {\n  padding: 0 24rpx 24rpx 24rpx;\n}\n\n.fare-detail-text {\n  font-size: 24rpx;\n  color: #666;\n  line-height: 1.5;\n}\n\n.fare-link {\n  font-size: 24rpx;\n  color: #7363FF;\n  text-decoration: underline;\n}\n\n.notes-input {\n  flex: 1;\n  font-size: 28rpx;\n  color: #1a1a1a;\n  border: none;\n  outline: none;\n  background: transparent;\n  text-align: right;\n}\n\n.action-buttons {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, white 100%);\n  backdrop-filter: blur(20rpx);\n  -webkit-backdrop-filter: blur(20rpx);\n  padding: 24rpx;\n  padding-bottom: calc(24rpx + env(safe-area-inset-bottom));\n  border-top: 1rpx solid rgba(115, 99, 255, 0.1);\n  z-index: 100;\n}\n\n.action-container {\n  display: flex;\n  gap: 16rpx;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.price-summary {\n  flex: 1;\n}\n\n.total-price {\n  font-size: 32rpx;\n  color: #ff4757;\n  font-weight: 600;\n}\n\n.submit-btn {\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  color: #fff;\n  padding: 16rpx 32rpx;\n  border-radius: 99999rpx;\n  font-size: 26rpx;\n  font-weight: 500;\n  box-shadow: 0 4rpx 12rpx rgba(115, 99, 255, 0.3);\n  transition: all 0.3s ease;\n  border: 1rpx solid transparent;\n  box-sizing: border-box;\n  height: 72rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 120rpx;\n}\n\n.submit-btn:active {\n  background: linear-gradient(135deg, #6354e6 0%, #e55cc8 100%);\n  transform: scale(0.96);\n}\n\n/* 时间选择弹框样式 */\n.time-picker-content {\n  background: #ffffff;\n  border-radius: 20rpx 20rpx 0 0;\n  width: 100%;\n  height: 75vh;\n  position: relative;\n  z-index: 1001;\n}\n\n/* uni-popup 弹框圆角样式 */\n:deep(.uni-popup) {\n  border-radius: 20rpx 20rpx 0 0 !important;\n}\n\n\n/* 日期导航栏 */\n.day-filter {\n  background: #FFFFFF;\n  border-bottom: 1rpx solid #f0f0f0;\n  border-radius: 20rpx 20rpx 0 0\n\n}\n\n.day-scroll {\n  white-space: nowrap;\n}\n\n.day-tabs {\n  display: flex;\n  align-items: center;\n  height: 120rpx;\n  white-space: nowrap;\n  padding-left: 10rpx;\n  padding-right: 20rpx;\n  box-sizing: border-box;\n  position: relative;\n}\n\n.day-tab {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  padding: 20rpx;\n  box-sizing: border-box;\n  height: 45rpx;\n  flex-shrink: 0;\n  min-width: fit-content;\n}\n\n/* 去掉下划线 */\n\n.day-name {\n  font-size: 26rpx;\n  font-weight: 400;\n  color: #798079;\n  transition: color 0.3s ease;\n}\n\n.day-date {\n  font-size: 20rpx;\n  color: #999999;\n  transition: color 0.3s ease;\n  margin-top: 4rpx;\n}\n\n.day-tab.active .day-name {\n  font-size: 26rpx;\n  font-weight: 700;\n  color: #059C00;\n}\n\n.day-tab.active .day-date {\n  color: #059C00;\n}\n\n/* 时间段容器 */\n.time-slots-container {\n  padding: 32rpx;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n\n.time-slots-grid {\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  gap: 16rpx;\n}\n\n.time-slot-item {\n  background: #f8f9fa;\n  border: 2rpx solid #e9ecef;\n  border-radius: 12rpx;\n  padding: 16rpx 8rpx;\n  text-align: center;\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n\n.time-slot-item:active {\n  transform: scale(0.95);\n}\n\n.time-slot-item.available {\n  background: #ffffff;\n  border-color: #e9ecef;\n}\n\n.time-slot-item.available:hover {\n  border-color: #7363FF;\n}\n\n.time-slot-item.unavailable {\n  background: #f8f9fa;\n  border-color: #e9ecef;\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.time-slot-item.unavailable .time-text,\n.time-slot-item.unavailable .status-text {\n  color: #cccccc;\n}\n\n.time-slot-item.selected {\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-color: #7363FF;\n  box-shadow: 0 4rpx 16rpx rgba(115, 99, 255, 0.3);\n}\n\n.time-slot-item.selected .time-text,\n.time-slot-item.selected .status-text {\n  color: #ffffff;\n}\n\n.time-text {\n  font-size: 24rpx;\n  font-weight: 500;\n  color: #1a1a1a;\n  display: block;\n  margin-bottom: 4rpx;\n}\n\n.status-text {\n  font-size: 20rpx;\n  color: #666666;\n  display: block;\n}\n\n\n</style> ","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/subPackages/order/submit.vue'\nwx.createPage(MiniProgramPage)"],"names":["params","ref","serviceTime","travelMethod","quantity","roundTripFare","totalDistance","orderNotes","showTimePicker","availableSchedule","selectedDayIndex","selectedTimeSlot","dayScrollLeft","dayScrollWithAnimation","timePickerPopup","selectedAddress","selectedLocation","serviceInfo","totalPrice","computed","total","_b","_a","loadServiceInfo","service_id","level_order","companion_id","price_template_id","uni","response","getServiceInfo","data","minQuantity","error","selectAddress","res","address","calculateOrderDistance","err","selectServiceTime","getFirstAvailableDayIndex","nextTick","switchDay","index","itemWidth","containerWidth","padding","availableWidth","visibleItems","scrollPos","selectTimeSlot","timeSlot","selectedDay","i","daySchedule","slot","getCurrentDayTimeSlots","selectTravelMethod","method","increaseQuantity","decreaseQuantity","userLatitude","userLongitude","requestData","calculateDistance","result","requestSubscribeMessage","tmplIds","resolve","reject","acceptedCount","rejectedCount","allAccepted","tmplId","modalRes","settingRes","subscribeRes","reAcceptedCount","reAllAccepted","submitOrder","timeMatch","serviceDate","serviceTimeSlot","orderData","createOrderV2","orderParamsData","paramsResponse","orderParams","onMounted","pages","currentPage","getCompanionAvailableSchedule","MiniProgramPage"],"mappings":"6RAmLA,MAAMA,EAASC,EAAG,IAAC,EAAE,EAGfC,EAAcD,EAAG,IAAC,EAAE,EACpBE,EAAeF,EAAG,IAAC,MAAM,EACzBG,EAAWH,EAAG,IAAC,CAAC,EAChBI,EAAgBJ,EAAG,IAAC,CAAI,EACxBK,EAAgBL,EAAG,IAAC,CAAC,EACrBM,EAAaN,EAAG,IAAC,EAAE,EAGnBO,EAAiBP,EAAG,IAAC,EAAK,EAC1BQ,EAAoBR,EAAG,IAAC,EAAE,EAC1BS,EAAmBT,EAAG,IAAC,CAAC,EACxBU,EAAmBV,EAAG,IAAC,IAAI,EAC3BW,EAAgBX,EAAG,IAAC,CAAC,EACrBY,EAAyBZ,EAAG,IAAC,EAAK,EAClCa,EAAkBb,EAAG,IAAC,IAAI,EAG1Bc,EAAkBd,EAAG,IAAC,OAAO,EAC7Be,EAAmBf,EAAG,IAAC,IAAI,EAG3BgB,EAAchB,EAAAA,IAAI,CAExB,CAAC,EAIKiB,EAAaC,EAAQ,SAAC,IAAM,SAEhC,MAAMC,KADeC,GAAAC,EAAAL,EAAY,QAAZ,YAAAK,EAAmB,aAAnB,YAAAD,EAA+B,YAAajB,EAAS,OAAS,GACtDC,EAAc,MAC3C,OAAO,OAAOe,EAAM,QAAQ,CAAC,CAAC,CAChC,CAAC,EAGKG,EAAkB,SAAY,OAClC,GAAI,CACF,KAAM,CAAE,WAAAC,EAAY,YAAAC,EAAa,aAAAC,EAAc,kBAAAC,CAAiB,EAAK3B,EAAO,MAE5E,GAAI,CAACwB,GAAc,CAACC,GAAe,CAACC,GAAgB,CAACC,EAAmB,CACtEC,EAAAA,MAAa,MAAA,OAAA,sCAAA,SAAS,EACtB,MACD,CAED,MAAMC,EAAW,MAAMC,iBAAe,CACpC,WAAY,OAAON,CAAU,EAC7B,YAAa,OAAOC,CAAW,EAC/B,aAAc,OAAOC,CAAY,EACjC,kBAAmB,OAAOC,CAAiB,CACjD,CAAK,EAED,GADAC,EAAA,MAAA,MAAA,MAAA,sCAAY,gBAAgBC,EAAS,IAAI,EACrCA,EAAS,KAAK,OAAS,EAAG,CAC5B,MAAME,EAAOF,EAAS,KAAK,KAE3BZ,EAAY,MAAQc,EAGpB,MAAMC,IAAcV,EAAAS,GAAA,YAAAA,EAAM,aAAN,YAAAT,EAAkB,eAAgB,EACtDlB,EAAS,MAAQ4B,CACvB,KACM,OAAM,IAAI,MAAMH,EAAS,KAAK,KAAO,UAAU,CAElD,OAAQI,EAAO,CACdL,EAAAA,MAAA,MAAA,QAAA,sCAAc,YAAaK,CAAK,EAChCL,EAAAA,MAAI,UAAU,CACZ,MAAOK,EAAM,SAAW,WACxB,KAAM,MACZ,CAAK,CACF,CACH,EAKMC,EAAgB,IAAM,CAE1BN,EAAAA,MAAI,eAAe,CACjB,QAAS,MAAOO,GAAQ,CACtB,MAAMC,EAAUD,EAAI,SAAWA,EAAI,MAAQ,QAC3CP,EAAAA,MAAA,MAAA,MAAA,sCAAY,SAAUO,CAAG,EAGzBpB,EAAgB,MAAQqB,EACxBpB,EAAiB,MAAQ,CACvB,SAAUmB,EAAI,SACd,UAAWA,EAAI,UACf,QAASC,CACV,EAGD,MAAMC,EAAuBF,EAAI,SAAUA,EAAI,SAAS,CAEzD,EACD,KAAOG,GAAQ,CACTA,EAAI,QAAUA,EAAI,OAAO,QAAQ,QAAQ,IAAM,KACjDV,EAAAA,MAAI,UAAU,CACZ,MAAO,SACP,KAAM,MAChB,CAAS,EACDA,EAAA,MAAA,MAAA,QAAA,sCAAc,UAAWU,EAAI,MAAM,EAEtC,CACL,CAAG,CAQH,EAGMC,EAAoB,IAAM,CAC9B,GAAI9B,EAAkB,MAAM,SAAW,EAAG,CACxCmB,EAAAA,MAAI,UAAU,CACZ,MAAO,SACP,KAAM,MACZ,CAAK,EACD,MACD,CAGDlB,EAAiB,MAAQ8B,EAA2B,EAEpDhC,EAAe,MAAQ,GAGvBiC,EAAAA,WAAS,IAAM,CACb5B,EAAuB,MAAQ,GAC/BD,EAAc,MAAQ,EAEtBE,EAAgB,MAAM,MAC1B,CAAG,CACH,EAKM4B,EAAaC,GAAU,CAC3BjC,EAAiB,MAAQiC,EACzBhC,EAAiB,MAAQ,KAGzBE,EAAuB,MAAQ,GAG/B4B,EAAAA,WAAS,IAAM,CAEb,MAAMG,EAAYhB,EAAAA,MAAI,OAAO,GAAG,EAC1BiB,EAAiBjB,EAAAA,MAAI,cAAa,EAAG,YACrCkB,EAAUlB,EAAAA,MAAI,OAAO,EAAE,EACvBmB,EAAiBF,EAAiBC,EAGlCE,EAAe,KAAK,MAAMD,EAAiBH,EAAY,EAAG,EAEhE,GAAID,EAAQ,EAAG,CAGb,MAAMM,EAAY,KAAK,IAAI,EAAGN,EAAQC,EAAYI,EAAeJ,EAAY,CAAC,EAC9EhC,EAAc,MAAQqC,CAC5B,MAEMrC,EAAc,MAAQ,EAIxB,WAAW,IAAM,CACfC,EAAuB,MAAQ,EAChC,EAAE,GAAG,CACV,CAAG,CACH,EAGMqC,EAAkBC,GAAa,CACnC,GAAIA,EAAS,SAAW,EAAG,OAE3BxC,EAAiB,MAAQwC,EACzB,MAAMC,EAAc3C,EAAkB,MAAMC,EAAiB,KAAK,EAClER,EAAY,MAAQ,GAAGkD,EAAY,QAAQ,IAAIA,EAAY,IAAI,IAAID,EAAS,IAAI,GAChFrC,EAAgB,MAAM,MAAO,EAC7BN,EAAe,MAAQ,EACzB,EAGMgC,EAA4B,IAAM,CACtC,GAAI/B,EAAkB,MAAM,SAAW,EAAG,MAAO,GAEjD,QAAS4C,EAAI,EAAGA,EAAI5C,EAAkB,MAAM,OAAQ4C,IAAK,CACvD,MAAMC,EAAc7C,EAAkB,MAAM4C,CAAC,EAI7C,KAHkBC,GAAA,YAAAA,EAAa,aAAc,CAAE,GACX,KAAKC,GAAQA,EAAK,SAAW,CAAC,EAGhE,OAAOF,CAEV,CAED,MAAO,EACT,EAGMG,EAAyB,IAAM,OACnC,OAAI/C,EAAkB,MAAM,SAAW,EAAU,CAAE,IAC5Ca,EAAAb,EAAkB,MAAMC,EAAiB,KAAK,IAA9C,YAAAY,EAAiD,aAAc,CAAE,CAC1E,EAGMmC,EAAsBC,GAAW,CACrCvD,EAAa,MAAQuD,CACvB,EAGMC,EAAmB,IAAM,CAC7BvD,EAAS,OACX,EAGMwD,EAAmB,IAAM,SAC7B,MAAM5B,IAAcX,GAAAC,EAAAL,EAAY,QAAZ,YAAAK,EAAmB,aAAnB,YAAAD,EAA+B,eAAgB,EAC/DjB,EAAS,MAAQ4B,GACnB5B,EAAS,OAEb,EAGMiC,EAAyB,MAAOwB,EAAcC,IAAkB,SACpE,GAAI,CACF,MAAMC,EAAc,CAClB,aAAc,OAAO/D,EAAO,MAAM,YAAY,EAC9C,cAAe6D,EACf,eAAgBC,CACjB,EAEDlC,EAAAA,MAAA,MAAA,MAAA,sCAAY,YAAamC,CAAW,EAEpC,MAAMlC,EAAW,MAAMmC,EAAiB,kBAACD,CAAW,EAEpD,GAAIlC,EAAS,MAAQA,EAAS,KAAK,OAAS,EAAG,CAC7C,MAAMoC,EAASpC,EAAS,KAAK,KAC7BD,EAAAA,MAAY,MAAA,MAAA,sCAAA,UAAWqC,CAAM,EAGzBA,EAAO,WAAa,SACtB3D,EAAc,MAAQ2D,EAAO,UAE3BA,EAAO,gBAAkB,SAE3B5D,EAAc,MAAQ,QAAQ4D,EAAO,cAAgB,GAAG,QAAQ,CAAC,CAAC,EAI1E,MACMrC,EAAc,MAAA,MAAA,QAAA,sCAAA,WAAWN,EAAAO,EAAS,OAAT,YAAAP,EAAe,GAAG,EAC3CM,EAAAA,MAAI,UAAU,CACZ,QAAOP,EAAAQ,EAAS,OAAT,YAAAR,EAAe,MAAO,SAC7B,KAAM,MACd,CAAO,CAEJ,OAAQY,EAAO,CACdL,EAAAA,MAAc,MAAA,QAAA,sCAAA,cAAeK,CAAK,EAClCL,EAAAA,MAAI,UAAU,CACZ,MAAO,aACP,KAAM,MACZ,CAAK,CACF,CACH,EAWMsC,EAA0B,SAAY,CAC1C,MAAMC,EAAU,CACd,8CACA,6CACD,EAED,GAAI,CACFvC,EAAAA,MAAY,MAAA,MAAA,sCAAA,YAAY,EAExB,MAAMO,EAAM,MAAM,IAAI,QAAQ,CAACiC,EAASC,IAAW,CACjDzC,EAAAA,MAAI,wBAAwB,CAC1B,QAASuC,EACT,QAAUF,GAAW,CACnBrC,EAAAA,MAAA,MAAA,MAAA,sCAAY,YAAaqC,CAAM,EAC/BG,EAAQH,CAAM,CACf,EACD,KAAOhC,GAAU,CACfL,EAAAA,MAAA,MAAA,QAAA,sCAAc,YAAaK,CAAK,EAChCoC,EAAOpC,CAAK,CACb,CACT,CAAO,CACP,CAAK,EAGD,IAAIqC,EAAgB,EAChBC,EAAgB,EAChBC,EAAc,GAsBlB,OApBAL,EAAQ,QAAQM,GAAU,CACpBtC,EAAIsC,CAAM,IAAM,SAClBH,KACSnC,EAAIsC,CAAM,IAAM,UACzBF,IACAC,EAAc,GAKtB,CAAK,EAEGF,EAAgB,IAClB1C,EAAAA,wDAAY,UAAU,EACtBA,EAAAA,MAAI,UAAU,CACZ,MAAO,UACP,KAAM,SACd,CAAO,GAGC2C,EAAgB,GAClB3C,EAAAA,wDAAY,UAAU,EAEf,IAAI,QAASwC,GAAY,CAC9BxC,EAAAA,MAAI,UAAU,CACZ,MAAO,SACP,QAAS,8BACT,YAAa,MACb,WAAY,OACZ,QAAU8C,GAAa,CACjBA,EAAS,QAEX9C,EAAAA,MAAI,YAAY,CACd,QAAU+C,GAAe,CAEnBA,EAAW,YAAY,wBAAwB,EAEjD/C,EAAAA,MAAI,wBAAwB,CAC1B,QAASuC,EACT,QAAUS,GAAiB,CACzBhD,EAAAA,wDAAY,UAAWgD,CAAY,EAEnC,IAAIC,EAAkB,EAClBC,EAAgB,GACpBX,EAAQ,QAAQM,GAAU,CACpBG,EAAaH,CAAM,IAAM,SAC3BI,IAEAC,EAAgB,EAE5C,CAAyB,EAEGD,EAAkB,GACpBjD,EAAAA,MAAI,UAAU,CACZ,MAAO,UACP,KAAM,SAClC,CAA2B,EAGHwC,EAAQU,CAAa,CACtB,EACD,KAAOxC,GAAQ,CACbV,EAAAA,MAAA,MAAA,MAAA,sCAAY,UAAWU,CAAG,EAC1B8B,EAAQ,EAAK,CACd,CACvB,CAAqB,GAEDxC,EAAAA,MAAI,UAAU,CACZ,MAAO,UACP,KAAM,MAC5B,CAAqB,EACDwC,EAAQ,EAAK,EAEhB,EACD,KAAO9B,GAAQ,CACbV,EAAAA,MAAc,MAAA,QAAA,sCAAA,YAAaU,CAAG,EAC9B8B,EAAQ,EAAK,CACd,CACjB,CAAe,GAEDxC,EAAAA,MAAI,UAAU,CACZ,MAAO,UACP,KAAM,MACtB,CAAe,EACDwC,EAAQ,EAAK,EAEhB,CACX,CAAS,CACT,CAAO,GAGCE,IAAkB,GAAKC,IAAkB,GAE3C3C,EAAAA,MAAA,MAAA,MAAA,sCAAY,aAAa,EACzBA,EAAAA,MAAI,UAAU,CACZ,MAAO,UACP,KAAM,MACd,CAAO,EACM,IAGF4C,CACR,OAAQvC,EAAO,CACdL,OAAAA,EAAAA,MAAA,MAAA,QAAA,sCAAc,YAAaK,CAAK,EAChCL,EAAAA,MAAI,UAAU,CACZ,MAAO,WACP,KAAM,MACZ,CAAK,EACM,EACR,CACH,EAGMmD,EAAc,SAAY,SAE9B,GAAIhE,EAAgB,QAAU,QAAS,CACrCa,EAAAA,MAAI,UAAU,CACZ,MAAO,WACP,KAAM,MACZ,CAAK,EACD,MACD,CAGD,GAAI,CAAC1B,EAAY,MAAO,CACtB0B,EAAAA,MAAI,UAAU,CACZ,MAAO,WACP,KAAM,MACZ,CAAK,EACD,MACD,CAGuB,MAAMsC,EAAyB,EAMvD,MAAMc,EAAY9E,EAAY,MAAM,MAAM,4BAA4B,EACtE,GAAI,CAAC8E,EAAW,CACdpD,EAAAA,MAAI,UAAU,CACZ,MAAO,WACP,KAAM,MACZ,CAAK,EACD,MACD,CAED,MAAMqD,EAAcD,EAAU,CAAC,EACzBE,EAAkBF,EAAU,CAAC,EAE7BG,EAAY,CAChB,aAAc,OAAOnF,EAAO,MAAM,YAAY,EAC9C,WAAY,OAAOA,EAAO,MAAM,UAAU,EAC1C,YAAa,OAAOA,EAAO,MAAM,WAAW,EAC5C,kBAAmB,OAAOA,EAAO,MAAM,iBAAiB,EACxD,SAAUI,EAAS,MACnB,gBAAiBW,EAAgB,MACjC,aAAckE,EACd,aAAcC,EACd,OAAQ3E,EAAW,MACnB,eAAee,EAAAN,EAAiB,QAAjB,YAAAM,EAAwB,SACvC,gBAAgBD,EAAAL,EAAiB,QAAjB,YAAAK,EAAwB,SACzC,EAEDO,EAAAA,wDAAY,UAAWuD,CAAS,EAEhCvD,EAAAA,MAAI,YAAY,CACd,MAAO,QACX,CAAG,EAED,GAAI,CAEF,MAAMC,EAAW,MAAMuD,EAAa,cAACD,CAAS,EAE9C,GAAItD,EAAS,KAAK,OAAS,EAAG,CAC5BD,EAAA,MAAA,MAAA,MAAA,sCAAY,UAAWC,EAAS,IAAI,EAGpC,GAAI,CACF,MAAMwD,EAAkB,CACtB,SAAUxD,EAAS,KAAK,KAAK,SAC7B,eAAgB,CACjB,EACKyD,EAAiB,MAAMC,EAAW,YAACF,CAAe,EAExD,GAAIC,EAAe,KAAK,OAAS,EAE/B1D,EAAAA,MAAI,eAAe,CACjB,SAAU,QACV,GAAG0D,EAAe,KAAK,KAAK,WAC5B,QAAS,MAAOnD,GAAQ,CACtBP,0DAAY,OAAQO,CAAG,EACvBP,EAAAA,MAAI,UAAU,CACZ,MAAO,OACP,KAAM,SACtB,CAAe,EAID,WAAW,IAAM,CACfA,EAAAA,MAAI,aAAc,CACnB,EAAE,IAAI,CACR,EACD,KAAOU,GAAQ,CACbV,QAAc,MAAA,QAAA,sCAAA,OAAQ,KAAK,UAAUU,CAAG,CAAC,EACzCV,EAAAA,MAAI,UAAU,CACZ,MAAO,OACP,KAAM,MACtB,CAAe,CACF,CACb,CAAW,MAED,OAAM,IAAI,MAAM0D,EAAe,KAAK,KAAO,UAAU,CAExD,OAAQrD,EAAO,CACdL,EAAAA,MAAc,MAAA,QAAA,sCAAA,YAAaK,CAAK,EAChCL,EAAAA,MAAI,UAAU,CACZ,MAAOK,EAAM,SAAW,WACxB,KAAM,MAChB,CAAS,CACF,CACP,KACM,OAAM,IAAI,MAAMJ,EAAS,KAAK,KAAO,QAAQ,CAEhD,OAAQI,EAAO,CACdL,EAAAA,MAAA,MAAA,QAAA,sCAAc,UAAWK,CAAK,EAC9BL,EAAAA,MAAI,UAAU,CACZ,MAAOK,EAAM,SAAW,SACxB,KAAM,MACZ,CAAK,CACL,QAAY,CACRL,EAAAA,MAAI,YAAa,CAClB,CACH,EAEA4D,OAAAA,EAAAA,UAAU,IAAM,CAEd,MAAMC,EAAQ,gBAAiB,EACzBC,EAAcD,EAAMA,EAAM,OAAS,CAAC,EAC1CzF,EAAO,MAAQ0F,EAAY,SAAW,CAAE,EAExC9D,EAAY,MAAA,MAAA,MAAA,sCAAA,YAAa5B,EAAO,KAAK,EAGrCuB,EAAiB,EAIbvB,EAAO,MAAM,cACf2F,EAAAA,8BAA8B,OAAO3F,EAAO,MAAM,YAAY,CAAC,EAC5D,KAAK6B,GAAY,CAChBD,EAAAA,MAAA,MAAA,MAAA,sCAAY,aAAcC,CAAQ,EAC9BA,EAAS,MAAQA,EAAS,KAAK,OAAS,IAC1CpB,EAAkB,MAAQoB,EAAS,KAAK,KAAK,UAAY,CAAE,EAEvDpB,EAAkB,MAAM,OAAS,IACnCC,EAAiB,MAAQ8B,EAA2B,GAGhE,CAAO,EACA,MAAMP,GAAS,CACdL,EAAAA,MAAA,MAAA,QAAA,sCAAc,iBAAkBK,CAAK,CAC7C,CAAO,CAEP,CAAC,m0CC/uBD,GAAG,WAAW2D,EAAe"}