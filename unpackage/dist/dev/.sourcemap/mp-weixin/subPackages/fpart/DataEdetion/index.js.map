{"version":3,"file":"index.js","sources":["subPackages/fpart/DataEdetion/index.vue","subPackages/fpart/DataEdetion/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"data-edition-container\">\n\n    \n    <!-- ä¸»å†…å®¹åŒºåŸŸ -->\n    <view class=\"main-content\">\n      <scroll-view \n        class=\"scroll-container\" \n        scroll-y=\"true\"\n        refresher-enabled=\"true\"\n        :refresher-triggered=\"isRefreshing\"\n        @refresherrefresh=\"onRefresh\"\n        @refresherrestore=\"onRefreshRestore\"\n      >\n        <!-- è¡¨å•å†…å®¹ -->\n        <view class=\"form-container\">\n          <!-- ä¸ªäººä¿¡æ¯å¡ç‰‡ -->\n          <view class=\"info-card modern-card\">\n            <view class=\"card-header\">\n              <view class=\"header-content\">\n                <view class=\"section-indicator\"></view>\n                <view class=\"header-text\">\n                  <text class=\"card-title\">ä¸ªäººä¿¡æ¯</text>\n                  <text class=\"card-subtitle\">è®©å¤§å®¶æ›´äº†è§£ä½ </text>\n                </view>\n              </view>\n            </view>\n            \n            <view class=\"form-content\">\n              <!-- æ˜µç§° -->\n              <view class=\"input-group\">\n                <text class=\"input-label\">æ˜µç§°</text>\n                <view class=\"input-wrapper\">\n                  <input \n                    class=\"modern-input\" \n                    v-model=\"formData.nickname\" \n                    placeholder=\"ç»™è‡ªå·±èµ·ä¸ªå¥½å¬çš„æ˜µç§°å§~\" \n                    placeholder-class=\"input-placeholder\"\n                  />\n                  <view class=\"input-icon\">âœ¨</view>\n                </view>\n              </view>\n\n              <!-- æ€§åˆ« -->\n              <view class=\"input-group\">\n                <text class=\"input-label\">æ€§åˆ«</text>\n                <view class=\"gender-selector\">\n                  <view \n                    class=\"gender-chip\" \n                    :class=\"{ active: formData.gender === 'male' }\"\n                    @click=\"selectGender('male')\"\n                  >\n                    <image src=\"@/static/icons/friend/male.png\" class=\"gender-icon\" mode=\"aspectFit\" />\n                    <text class=\"chip-text\">ç”·ç”Ÿ</text>\n                  </view>\n                  <view \n                    class=\"gender-chip\" \n                    :class=\"{ active: formData.gender === 'female' }\"\n                    @click=\"selectGender('female')\"\n                  >\n                    <image src=\"@/static/icons/friend/female.png\" mode=\"aspectFit\" class=\"gender-icon\" />\n                    <text class=\"chip-text\">å¥³ç”Ÿ</text>\n                  </view>\n                </view>\n              </view>\n\n              <!-- åŸºæœ¬ä¿¡æ¯ - æ°´å¹³å¸ƒå±€ -->\n              <!-- å¹´é¾„ -->\n              <view class=\"input-group\">\n                <text class=\"input-label\">å¹´é¾„</text>\n                <view class=\"input-wrapper\">\n                  <input \n                    class=\"modern-input\" \n                    v-model=\"formData.age\" \n                    type=\"number\"\n                    placeholder=\"è¯·è¾“å…¥å¹´é¾„ (18-65å²)\" \n                    placeholder-class=\"input-placeholder\"\n                  />\n                  <view class=\"input-icon\">ğŸ‚</view>\n                </view>\n              </view>\n\n              <!-- èº«é«˜ -->\n              <view class=\"input-group\">\n                <text class=\"input-label\">èº«é«˜</text>\n                <view class=\"input-wrapper\">\n                  <input \n                    class=\"modern-input\" \n                    v-model=\"formData.height\" \n                    type=\"number\"\n                    placeholder=\"è¯·è¾“å…¥èº«é«˜ (å•ä½:cm)\" \n                    placeholder-class=\"input-placeholder\"\n                  />\n                  <view class=\"input-icon\">ğŸ“</view>\n                </view>\n              </view>\n\n              <!-- ä½“é‡ -->\n              <view class=\"input-group\">\n                <text class=\"input-label\">ä½“é‡</text>\n                <view class=\"input-wrapper\">\n                  <input \n                    class=\"modern-input\" \n                    v-model=\"formData.weight\" \n                    type=\"number\"\n                    placeholder=\"è¯·è¾“å…¥ä½“é‡ (å•ä½:kg)\" \n                    placeholder-class=\"input-placeholder\"\n                  />\n                  <view class=\"input-icon\">âš–ï¸</view>\n                </view>\n              </view>\n\n              <!-- ç”³è¯·åŒºåŸŸ -->\n              <view class=\"input-group\">\n                <text class=\"input-label\">ç”³è¯·åŒºåŸŸ</text>\n                <view class=\"input-wrapper\">\n                  <view class=\"city-input\" @click=\"showCitySelector\">\n                    <text class=\"city-display\" v-if=\"selectedCities.length === 0\">è¯·é€‰æ‹©æœåŠ¡åŒºåŸŸ</text>\n                    <text class=\"city-display\" v-else>å·²é€‰{{ selectedCities.length }}ä¸ªåŒºåŸŸ</text>\n                    <view class=\"input-icon city-icon\">ğŸ“</view>\n                  </view>\n                </view>\n              </view>\n              \n              <!-- å·²é€‰åŒºåŸŸå±•ç¤º -->\n              <view class=\"selected-cities\" v-if=\"selectedCities.length > 0\">\n                <view \n                  class=\"city-tag\" \n                  v-for=\"city in selectedCities\" \n                  :key=\"city\"\n                  @click=\"removeCityFromSelection(city)\"\n                >\n                  <text class=\"city-tag-text\">{{ city }}</text>\n                  <text class=\"city-tag-remove\">Ã—</text>\n                </view>\n              </view>\n            </view>\n          </view>\n\n          <!-- ç”Ÿæ´»ç…§ç‰‡å¡ç‰‡ -->\n          <view class=\"photo-card modern-card\">\n            <view class=\"card-header\">\n              <view class=\"header-content\">\n                <view class=\"section-indicator\"></view>\n                <view class=\"header-text\">\n                  <text class=\"card-title\">ç”Ÿæ´»ç…§ç‰‡</text>\n                  <text class=\"card-subtitle\">å±•ç¤ºæœ€çœŸå®ç¾å¥½çš„ä½  âœ¨</text>\n                </view>\n              </view>\n            </view>\n            \n            <view class=\"photo-gallery\">\n              <view \n                class=\"photo-item\" \n                v-for=\"(photo, index) in photos\" \n                :key=\"index\"\n                @click=\"previewPhoto(index)\"\n              >\n                <image :src=\"$imgBaseUrl + photo\" class=\"photo-img\" mode=\"aspectFill\" />\n                <view class=\"photo-overlay\">\n                  <view class=\"photo-remove\" @click.stop=\"deletePhoto(index)\">\n                    <text class=\"remove-text\">Ã—</text>\n                  </view>\n                </view>\n              </view>\n              <view \n                class=\"photo-add\" \n                v-if=\"photos.length < 6\"\n                @click=\"addPhoto\"\n              >\n                <view class=\"add-content\">\n                  <view class=\"add-icon-circle\">\n                    <image src=\"@/static/icons/common/add_icon.png\" class=\"add-icon\" mode=\"aspectFit\" />\n                  </view>\n                  <text class=\"add-text\">æ·»åŠ ç…§ç‰‡</text>\n                </view>\n              </view>\n            </view>\n          </view>\n\n          <!-- æœåŠ¡æŠ€èƒ½å¡ç‰‡ -->\n          <view class=\"skills-card modern-card\">\n            <view class=\"card-header\">\n              <view class=\"header-content\">\n                <view class=\"section-indicator\"></view>\n                <view class=\"header-text\">\n                  <text class=\"card-title\">æœåŠ¡æŠ€èƒ½</text>\n                  <text class=\"card-subtitle\">é€‰æ‹©ä½ æœ€æ“…é•¿çš„é™ªä¼´æ–¹å¼</text>\n                </view>\n              </view>\n            </view>\n            \n            <!-- åŠ è½½çŠ¶æ€ -->\n            <view v-if=\"servicesLoading\" class=\"services-loading\">\n              <view class=\"loading-spinner\"></view>\n              <text class=\"loading-text\">åŠ è½½æœåŠ¡æŠ€èƒ½ä¸­...</text>\n            </view>\n            \n            <!-- æ— åŸå¸‚é€‰æ‹©æç¤º -->\n            <view v-else-if=\"selectedCities.length === 0\" class=\"no-city-tip\">\n              <text class=\"tip-text\">è¯·å…ˆé€‰æ‹©æœåŠ¡åŒºåŸŸï¼Œç„¶åé€‰æ‹©æ‚¨æä¾›çš„æœåŠ¡æŠ€èƒ½</text>\n            </view>\n            \n            <!-- æœåŠ¡æŠ€èƒ½åˆ—è¡¨ -->\n            <view v-else-if=\"skillCategories.length > 0\" class=\"skills-wrapper\">\n              <view \n                v-for=\"category in skillCategories\" \n                :key=\"category.id\"\n                class=\"category-section\"\n              >\n                <!-- åˆ†ç±»æ ‡é¢˜ -->\n                <view class=\"category-header\">\n                  <text class=\"category-title\">{{ category.name }}</text>\n                </view>\n                \n                <!-- è¯¥åˆ†ç±»ä¸‹çš„æœåŠ¡æŠ€èƒ½ -->\n                <view class=\"skills-container\">\n                  <view \n                    class=\"skill-item\"\n                    :class=\"{ selected: selectedSkills.includes(service.id) }\"\n                    v-for=\"service in category.services\"\n                    :key=\"service.id\"\n                    @click=\"toggleSkill(service)\"\n                  >\n                    <view class=\"skill-content\">\n                      <text class=\"skill-name\">{{ service.name }}</text>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n            \n            <!-- æš‚æ— æœåŠ¡æç¤º -->\n            <view v-else class=\"no-services-tip\">\n              <text class=\"tip-text\">è¯¥åŒºåŸŸæš‚æ— å¯ç”³è¯·çš„æœåŠ¡ï¼Œè¯·é€‰æ‹©å…¶ä»–åŒºåŸŸ</text>\n            </view>\n          </view>\n\n          <!-- ä¸ªæ€§æ ‡ç­¾å¡ç‰‡ -->\n          <view class=\"personality-card modern-card\">\n            <view class=\"card-header\">\n              <view class=\"header-content\">\n                <view class=\"section-indicator\"></view>\n                <view class=\"header-text\">\n                  <text class=\"card-title\">ä¸ªæ€§æ ‡ç­¾</text>\n                  <text class=\"card-subtitle\">å±•ç°ä½ çš„ç‹¬ç‰¹é­…åŠ› âœ¨</text>\n                </view>\n              </view>\n            </view>\n            \n            <!-- å·²é€‰æ ‡ç­¾å±•ç¤º -->\n            <view v-if=\"selectedTags.length > 0\" class=\"selected-tags\">\n              <view \n                class=\"tag-item\" \n                v-for=\"tag in selectedTags\" \n                :key=\"tag.id\"\n                @click=\"removeTag(tag)\"\n              >\n                <text class=\"tag-text\">{{ tag.tag_name }}</text>\n                <text class=\"tag-remove\">Ã—</text>\n              </view>\n            </view>\n            \n            <!-- æ·»åŠ æ ‡ç­¾æŒ‰é’® -->\n            <view class=\"add-tags-section\">\n              <view \n                class=\"add-tags-btn\" \n                :class=\"{ disabled: selectedTags.length >= 5 }\"\n                @click=\"selectedTags.length < 5 ? showTagSelector() : null\"\n              >\n                <view class=\"add-icon\">+</view>\n                <text class=\"add-text\">æ·»åŠ ä¸ªæ€§æ ‡ç­¾</text>\n                <text class=\"tag-count\">({{ selectedTags.length }}/5)</text>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <view style=\"height: 200rpx;\"></view>\n      </scroll-view>\n    </view>\n\n    <!-- åº•éƒ¨å›ºå®šä¿å­˜æŒ‰é’® -->\n    <view class=\"bottom-save-section\">\n      <view class=\"save-button-container\">\n        <view \n          class=\"bottom-save-btn\" \n          :class=\"{ disabled: isSaving }\"\n          @click=\"saveChanges\"\n        >\n          <view class=\"save-btn-content\">\n            <view v-if=\"isSaving\" class=\"save-loading\">\n              <view class=\"loading-dots\">\n                <view class=\"dot\"></view>\n                <view class=\"dot\"></view>\n                <view class=\"dot\"></view>\n              </view>\n            </view>\n\n            <text class=\"save-btn-text\" v-if=\"!isSaving\">ä¿å­˜èµ„æ–™</text>\n            <text class=\"save-btn-text\" v-else>ä¿å­˜ä¸­...</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- åŸå¸‚é€‰æ‹©å¼¹çª— -->\n    <view v-if=\"showCityPicker\" class=\"city-picker-overlay\" @click=\"hideCitySelector\">\n      <view class=\"city-picker-container\" @click.stop>\n        <view class=\"city-picker-header\">\n          <text class=\"picker-title\">é€‰æ‹©æœåŠ¡åŒºåŸŸ</text>\n          <text class=\"picker-subtitle\">å¯é€‰æ‹©å¤šä¸ªæœåŠ¡åŒºåŸŸ</text>\n          <view class=\"picker-close\" @click=\"hideCitySelector\">\n            <text>âœ•</text>\n          </view>\n        </view>\n        <view class=\"city-picker-content\">\n          <!-- åŠ è½½çŠ¶æ€ -->\n          <view v-if=\"cityLoading\" class=\"loading-container\">\n            <view class=\"loading-spinner\"></view>\n            <text class=\"loading-text\">åŠ è½½æœåŠ¡åŒºåŸŸåˆ—è¡¨ä¸­...</text>\n          </view>\n          \n          <!-- åŸå¸‚åˆ—è¡¨ -->\n          <view v-else class=\"city-grid\">\n            <view \n              v-for=\"(cityItem, index) in cityList\" \n              :key=\"index\"\n              :class=\"['city-item', { \n                active: tempSelectedCities.includes(cityItem.name)\n              }]\"\n              @click=\"toggleCitySelection(cityItem.name)\"\n            >\n              <text class=\"city-name\">{{ cityItem.name }}</text>\n              <view v-if=\"tempSelectedCities.includes(cityItem.name)\" class=\"city-check\">âœ“</view>\n            </view>\n          </view>\n        </view>\n        <view class=\"picker-footer\">\n          <view class=\"selected-count\">å·²é€‰æ‹© {{ tempSelectedCities.length }} ä¸ªåŒºåŸŸ</view>\n          <view class=\"confirm-btn\" @click=\"confirmCitySelection\">\n            <text>ç¡®è®¤é€‰æ‹©</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- ä¸ªæ€§æ ‡ç­¾é€‰æ‹©å™¨å¼¹çª— -->\n    <view v-if=\"showTagPicker\" class=\"tag-picker-overlay\" @click=\"hideTagSelector\">\n      <view class=\"tag-picker-container\" @click.stop>\n        <view class=\"tag-picker-header\">\n          <text class=\"picker-title\">é€‰æ‹©ä¸ªæ€§æ ‡ç­¾</text>\n          <text class=\"picker-subtitle\">å±•ç°ä½ çš„ç‹¬ç‰¹é­…åŠ›</text>\n          <view class=\"picker-close\" @click=\"hideTagSelector\">\n            <text>âœ•</text>\n          </view>\n        </view>\n        \n        <!-- æ ‡ç­¾åˆ†ç±»å¯¼èˆª -->\n        <view class=\"tag-nav\">\n          <view \n            v-for=\"navItem in tagNavItems\" \n            :key=\"navItem.type\"\n            :class=\"['nav-item', { active: currentTagType === navItem.type }]\"\n            @click=\"switchTagType(navItem.type)\"\n          >\n            <text class=\"nav-text\">{{ navItem.name }}</text>\n          </view>\n        </view>\n        \n        <view class=\"tag-picker-content\">\n          <!-- æ ‡ç­¾æ•°é‡æç¤º -->\n          <view v-if=\"!tagsLoading && tempSelectedTags.length >= 5\" class=\"max-tags-tip\">\n            <text class=\"max-tags-text\">å·²è¾¾åˆ°æœ€å¤§æ ‡ç­¾æ•°é‡(5ä¸ª)ï¼Œè¯·ç§»é™¤éƒ¨åˆ†æ ‡ç­¾åç»§ç»­é€‰æ‹©</text>\n          </view>\n          \n          <!-- åŠ è½½çŠ¶æ€ -->\n          <view v-if=\"tagsLoading\" class=\"loading-container\">\n            <view class=\"loading-spinner\"></view>\n            <text class=\"loading-text\">åŠ è½½æ ‡ç­¾ä¸­...</text>\n          </view>\n          \n          <!-- æ ‡ç­¾åˆ—è¡¨ -->\n          <view v-else class=\"tag-grid\">\n            <view \n              v-for=\"tag in currentTagList\" \n              :key=\"tag.id\"\n              :class=\"['tag-grid-item', { \n                selected: isTagSelected(tag.id)\n              }]\"\n              @click=\"toggleTagSelection(tag)\"\n            >\n              <text class=\"tag-grid-text\">{{ tag.tag_name }}</text>\n              <view v-if=\"isTagSelected(tag.id)\" class=\"tag-grid-check\">âœ“</view>\n            </view>\n          </view>\n          \n          <!-- æš‚æ— æ ‡ç­¾æç¤º -->\n          <view v-if=\"!tagsLoading && currentTagList.length === 0\" class=\"no-tags-tip\">\n            <text class=\"tip-text\">æš‚æ— ç›¸å…³æ ‡ç­¾</text>\n          </view>\n        </view>\n        \n        <view class=\"picker-footer\">\n          <view class=\"selected-count\">å·²é€‰æ‹© {{ tempSelectedTags.length }}/5 ä¸ªæ ‡ç­¾</view>\n          <view class=\"confirm-btn\" @click=\"confirmTagSelection\">\n            <text>ç¡®è®¤é€‰æ‹©</text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, getCurrentInstance } from 'vue'\nimport { getApplicatioInfo, updateCompanionApplication, getServicesByCities, getPersonalityTags } from '@/api/user.js'\nimport { getCityList } from '@/api/home.js'\nimport { uploadFile, getUploadResult } from '@/api/file.js'\nimport { useUserStore } from '@/stores/user.js'\n\n// ç”¨æˆ·store\nconst userStore = useUserStore()\n\n// è·å–å½“å‰å®ä¾‹ä»¥è®¿é—®å…¨å±€å±æ€§\nconst { proxy } = getCurrentInstance()\n\n// çŠ¶æ€æ é«˜åº¦\nconst statusBarHeight = ref(0)\n\n// ä¸‹æ‹‰åˆ·æ–°çŠ¶æ€\nconst isRefreshing = ref(false)\n\n// ä¿å­˜çŠ¶æ€\nconst isSaving = ref(false)\n\n// è¡¨å•æ•°æ®\nconst formData = reactive({\n  nickname: '',\n  gender: '',\n  age: '',\n  height: '',\n  weight: '',\n  city: 'æ·±åœ³å¸‚'  // ä¿ç•™åŸæœ‰å­—æ®µç”¨äºå…¼å®¹\n})\n\n// åŸå¸‚é€‰æ‹©ç›¸å…³æ•°æ®\nconst showCityPicker = ref(false)\nconst selectedCities = ref([]) // å·²ç¡®è®¤é€‰æ‹©çš„åŸå¸‚\nconst tempSelectedCities = ref([]) // ä¸´æ—¶é€‰æ‹©çŠ¶æ€ï¼ˆå¼¹çª—ä¸­çš„é€‰æ‹©ï¼‰\nconst cityList = ref([]) // ä»APIè·å–åŸå¸‚åˆ—è¡¨\nconst cityLoading = ref(false) // åŸå¸‚åŠ è½½çŠ¶æ€\n\n// ç…§ç‰‡æ•°ç»„ - å­˜å‚¨ä¸Šä¼ åçš„æ–‡ä»¶URL\nconst photos = ref([])\n\n// æœåŠ¡æŠ€èƒ½ç›¸å…³æ•°æ®\nconst serviceSkills = ref([]) // ä»æ¥å£è·å–çš„æœåŠ¡åˆ—è¡¨\nconst selectedSkills = ref([]) // é€‰ä¸­çš„æœåŠ¡ID\nconst servicesLoading = ref(false) // æœåŠ¡åŠ è½½çŠ¶æ€\n\n// æœåŠ¡æŠ€èƒ½åˆ†ç»„æ•°æ®\nconst skillCategories = ref([]) // æŒ‰åˆ†ç±»åˆ†ç»„çš„æœåŠ¡æŠ€èƒ½\n\n// ä¸ªæ€§æ ‡ç­¾ç›¸å…³æ•°æ®\nconst selectedTags = ref([]) // å·²é€‰æ‹©çš„æ ‡ç­¾\nconst showTagPicker = ref(false) // æ ‡ç­¾é€‰æ‹©å™¨æ˜¾ç¤ºçŠ¶æ€\nconst tempSelectedTags = ref([]) // ä¸´æ—¶é€‰æ‹©çš„æ ‡ç­¾\nconst tagsLoading = ref(false) // æ ‡ç­¾åŠ è½½çŠ¶æ€\nconst currentTagType = ref(4) // å½“å‰æ ‡ç­¾ç±»å‹ï¼š4=ä¸ªæ€§ç‰¹è´¨\nconst currentTagList = ref([]) // å½“å‰æ ‡ç­¾ç±»å‹çš„æ ‡ç­¾åˆ—è¡¨\n\n// æ ‡ç­¾ç¼“å­˜ - ç”¨äºå­˜å‚¨å·²åŠ è½½çš„æ ‡ç­¾æ•°æ®\nconst tagsCache = ref(new Map()) // Map<tagType, tagList>\nconst cacheExpireTime = 5 * 60 * 1000 // ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼š5åˆ†é’Ÿ\nconst cacheTimestamps = ref(new Map()) // Map<tagType, timestamp>\n\n// æ ‡ç­¾åˆ†ç±»å¯¼èˆª\nconst tagNavItems = ref([\n  { type: 4, name: 'ä¸ªæ€§ç‰¹è´¨' },\n  { type: 5, name: 'æˆ‘çš„çˆ±å¥½' },\n  { type: 6, name: 'å¤–è²Œé£æ ¼' },\n  { type: 7, name: 'ä¸“ä¸šæŠ€èƒ½' },\n  { type: 8, name: 'çƒ­é—¨æ¨è' }\n])\n\n  // è·å–ç³»ç»Ÿä¿¡æ¯\nonMounted(async () => {\n  const info = uni.getSystemInfoSync()\n  statusBarHeight.value = info.statusBarHeight || 0\n  \n  // åŠ è½½åˆå§‹æ•°æ®\n  await loadInitialData()\n})\n\n// åŠ è½½åˆå§‹æ•°æ®\nconst loadInitialData = async () => {\n  try {\n    // å…ˆåŠ è½½åŸå¸‚åˆ—è¡¨ï¼Œå†åŠ è½½ç”³è¯·æ•°æ®ï¼ˆç¡®ä¿åŸå¸‚åˆ—è¡¨å¯ç”¨äºæœåŠ¡åŒºåŸŸå›æ˜¾ï¼‰\n    await loadCityList()\n    await loadApplicationData()\n  } catch (error) {\n    console.error('åŠ è½½åˆå§‹æ•°æ®å¤±è´¥:', error)\n    uni.showToast({\n      title: 'åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•',\n      icon: 'none'\n    })\n  }\n}\n\n  // åŠ è½½ç”³è¯·æ•°æ®\n  const loadApplicationData = async () => {\n    try {\n      const response = await getApplicatioInfo()\n    \n    if (response.data && response.data.code === 0 && response.data.data) {\n      const applicationData = response.data.data\n      \n      // å¡«å……è¡¨å•æ•°æ®\n      formData.nickname = applicationData.nickname || ''\n      formData.gender = applicationData.gender === 'ç”·' ? 'male' : 'female'\n      formData.age = applicationData.age ? String(applicationData.age) : ''\n      formData.height = applicationData.height ? String(applicationData.height) : ''\n      formData.weight = applicationData.weight ? String(applicationData.weight) : ''\n      \n      // å¡«å……ç…§ç‰‡\n      photos.value = applicationData.photos || []\n      \n      // å¡«å……æœåŠ¡åŒºåŸŸ\n      if (applicationData.service_areas && applicationData.service_areas.length > 0) {\n        console.log('å¼€å§‹å¤„ç†æœåŠ¡åŒºåŸŸå›æ˜¾:', {\n          service_areas: applicationData.service_areas,\n          cityList: cityList.value\n        })\n        \n        // å°†åŸå¸‚ä»£ç è½¬æ¢ä¸ºåŸå¸‚åç§°\n        const cityNames = applicationData.service_areas.map(cityCode => {\n          const city = cityList.value.find(c => c.code === Number(cityCode))\n          console.log(`æŸ¥æ‰¾åŸå¸‚ä»£ç  ${cityCode}:`, city)\n          return city ? city.name : null\n        }).filter(name => name !== null)\n        \n        selectedCities.value = cityNames\n        formData.city = cityNames[0] || 'æ·±åœ³å¸‚'\n        \n        console.log('æœåŠ¡åŒºåŸŸå›æ˜¾å®Œæˆ:', {\n          service_areas: applicationData.service_areas,\n          cityNames: cityNames,\n          selectedCities: selectedCities.value\n        })\n      }\n      \n      // å¡«å……æœåŠ¡æŠ€èƒ½\n      selectedSkills.value = applicationData.services || []\n      \n      // å¡«å……ä¸ªæ€§æ ‡ç­¾\n      if (applicationData.tags && applicationData.tags.length > 0) {\n        // è¿™é‡Œéœ€è¦æ ¹æ®æ ‡ç­¾åç§°è·å–å®Œæ•´çš„æ ‡ç­¾å¯¹è±¡\n        // æš‚æ—¶ä½¿ç”¨ç®€å•çš„æ ‡ç­¾å¯¹è±¡\n        selectedTags.value = applicationData.tags.map(tagName => ({\n          id: Date.now() + Math.random(), // ä¸´æ—¶ID\n          tag_name: tagName\n        }))\n      }\n      \n      // åŠ è½½æœåŠ¡æŠ€èƒ½åˆ—è¡¨\n      if (selectedCities.value.length > 0) {\n        await loadServicesByCity()\n      }\n      \n      console.log('ç”³è¯·æ•°æ®åŠ è½½æˆåŠŸ:', applicationData)\n    } else {\n      console.warn('è·å–ç”³è¯·æ•°æ®å¤±è´¥')\n    }\n  } catch (error) {\n    console.error('åŠ è½½ç”³è¯·æ•°æ®å¤±è´¥:', error)\n    uni.showToast({\n      title: 'åŠ è½½ç”³è¯·æ•°æ®å¤±è´¥',\n      icon: 'none'\n    })\n  }\n}\n\n// åŠ è½½æœåŠ¡æŠ€èƒ½åˆ—è¡¨\nconst loadServicesByCity = async () => {\n  if (selectedCities.value.length === 0) {\n    serviceSkills.value = []\n    skillCategories.value = []\n    return\n  }\n  \n  servicesLoading.value = true\n  try {\n    // è·å–åŸå¸‚ä»£ç åˆ—è¡¨\n    const cityCodes = selectedCities.value.map(cityName => {\n      const city = cityList.value.find(c => c.name === cityName)\n      return city ? city.code : null\n    }).filter(code => code !== null)\n    \n    if (cityCodes.length === 0) {\n      console.warn('æœªæ‰¾åˆ°æœ‰æ•ˆçš„åŸå¸‚ä»£ç ')\n      serviceSkills.value = []\n      skillCategories.value = []\n      return\n    }\n    \n    const response = await getServicesByCities(cityCodes)\n    \n    if (response.data && response.data.code === 0 && response.data.data) {\n      serviceSkills.value = response.data.data\n      \n      // æŒ‰åˆ†ç±»å¯¹æœåŠ¡æŠ€èƒ½è¿›è¡Œåˆ†ç»„\n      groupServicesByCategory()\n      \n      console.log('æœåŠ¡æŠ€èƒ½åˆ—è¡¨åŠ è½½æˆåŠŸ:', serviceSkills.value)\n      console.log('æœåŠ¡æŠ€èƒ½åˆ†ç»„:', skillCategories.value)\n    } else {\n      console.warn('è·å–æœåŠ¡æŠ€èƒ½åˆ—è¡¨å¤±è´¥')\n      serviceSkills.value = []\n      skillCategories.value = []\n    }\n  } catch (error) {\n    console.error('è·å–æœåŠ¡æŠ€èƒ½åˆ—è¡¨å¤±è´¥:', error)\n    serviceSkills.value = []\n    skillCategories.value = []\n  } finally {\n    servicesLoading.value = false\n  }\n}\n\n// æŒ‰åˆ†ç±»å¯¹æœåŠ¡æŠ€èƒ½è¿›è¡Œåˆ†ç»„\nconst groupServicesByCategory = () => {\n  const categoryMap = {}\n  \n  // æŒ‰åˆ†ç±»åˆ†ç»„\n  serviceSkills.value.forEach(service => {\n    const categoryId = service.category\n    const categoryName = service.category_name || 'å…¶ä»–'\n    \n    if (!categoryMap[categoryId]) {\n      categoryMap[categoryId] = {\n        id: categoryId,\n        name: categoryName,\n        services: []\n      }\n    }\n    \n    categoryMap[categoryId].services.push(service)\n  })\n  \n  // è½¬æ¢ä¸ºæ•°ç»„å¹¶æŒ‰åˆ†ç±»IDæ’åº\n  skillCategories.value = Object.values(categoryMap).sort((a, b) => a.id - b.id)\n}\n\n// åŠ è½½åŸå¸‚åˆ—è¡¨\nconst loadCityList = async () => {\n  cityLoading.value = true\n  try {\n    const response = await getCityList()\n    \n          if (response.data && response.data.code === 0 && response.data.data) {\n        // è½¬æ¢APIæ•°æ®æ ¼å¼ä¸ºç»„ä»¶éœ€è¦çš„æ ¼å¼\n        cityList.value = response.data.data.map(city => ({\n          name: city.name,\n          code: city.city_code // åŸå¸‚ä»£ç å­—æ®µ\n        }))\n        \n        console.log('èµ„æ–™ç¼–è¾‘é¡µé¢åŒºåŸŸåˆ—è¡¨åŠ è½½æˆåŠŸ:', cityList.value)\n        console.log('åŸå¸‚åˆ—è¡¨æ•°æ®ç»“æ„:', response.data.data)\n      } else {\n        console.warn('è·å–åŒºåŸŸåˆ—è¡¨å¤±è´¥')\n        cityList.value = []\n      }\n  } catch (error) {\n    console.error('è·å–åŒºåŸŸåˆ—è¡¨å¤±è´¥:', error)\n    cityList.value = []\n  } finally {\n    cityLoading.value = false\n  }\n}\n\n// é€‰æ‹©æ€§åˆ«\nconst selectGender = (gender) => {\n  formData.gender = gender\n}\n\n// æ˜¾ç¤ºåŸå¸‚é€‰æ‹©å™¨\nconst showCitySelector = () => {\n  // åˆå§‹åŒ–ä¸´æ—¶é€‰æ‹©çŠ¶æ€ä¸ºå½“å‰å·²é€‰æ‹©çš„åŸå¸‚\n  tempSelectedCities.value = [...selectedCities.value]\n  showCityPicker.value = true\n}\n\n// éšè—åŸå¸‚é€‰æ‹©å™¨ï¼ˆå–æ¶ˆé€‰æ‹©ï¼‰\nconst hideCitySelector = () => {\n  // é‡ç½®ä¸´æ—¶é€‰æ‹©çŠ¶æ€\n  tempSelectedCities.value = []\n  showCityPicker.value = false\n}\n\n// åˆ‡æ¢åŸå¸‚é€‰æ‹©çŠ¶æ€ï¼ˆä¸´æ—¶çŠ¶æ€ï¼‰\nconst toggleCitySelection = (cityName) => {\n  const index = tempSelectedCities.value.indexOf(cityName)\n  \n  if (index > -1) {\n    // å¦‚æœå·²é€‰ä¸­ï¼Œåˆ™å–æ¶ˆé€‰æ‹©\n    tempSelectedCities.value.splice(index, 1)\n  } else {\n    // å¦‚æœæœªé€‰ä¸­ï¼Œç›´æ¥æ·»åŠ \n    tempSelectedCities.value.push(cityName)\n  }\n  \n  // æä¾›è§¦è§‰åé¦ˆ\n  uni.vibrateShort({\n    type: 'light'\n  })\n}\n\n// ä»é€‰æ‹©ä¸­ç§»é™¤åŸå¸‚\nconst removeCityFromSelection = (cityName) => {\n  const index = selectedCities.value.indexOf(cityName)\n  if (index > -1) {\n    selectedCities.value.splice(index, 1)\n    \n    // æä¾›è§¦è§‰åé¦ˆ\n    uni.vibrateShort({\n      type: 'light'\n    })\n  }\n}\n\n// ç¡®è®¤åŸå¸‚é€‰æ‹©\nconst confirmCitySelection = async () => {\n  if (tempSelectedCities.value.length === 0) {\n    uni.showToast({\n      title: 'è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæœåŠ¡åŒºåŸŸ',\n      icon: 'none'\n    })\n    return\n  }\n  \n  // å°†ä¸´æ—¶é€‰æ‹©åº”ç”¨åˆ°æ­£å¼çŠ¶æ€\n  selectedCities.value = [...tempSelectedCities.value]\n  \n  // æ›´æ–°formDataä¸­çš„cityå­—æ®µï¼ˆå–ç¬¬ä¸€ä¸ªä½œä¸ºä¸»è¦åŸå¸‚ï¼‰\n  formData.city = selectedCities.value[0]\n  \n  // å…³é—­å¼¹çª—\n  showCityPicker.value = false\n  tempSelectedCities.value = []\n  \n  // æ¸…ç©ºä¹‹å‰é€‰æ‹©çš„æŠ€èƒ½å’Œåˆ†ç±»æ•°æ®\n  selectedSkills.value = []\n  skillCategories.value = []\n  \n  // åŠ è½½å¯¹åº”åŸå¸‚çš„æœåŠ¡æŠ€èƒ½\n  await loadServicesByCity()\n}\n\n// æ·»åŠ ç…§ç‰‡\nconst addPhoto = () => {\n  const maxCount = 6 - photos.value.length\n  if (maxCount <= 0) {\n    uni.showToast({\n      title: 'æœ€å¤šåªèƒ½ä¸Šä¼ 6å¼ ç…§ç‰‡',\n      icon: 'none'\n    })\n    return\n  }\n\n  uni.chooseImage({\n    count: maxCount,\n    sizeType: ['compressed'],\n    sourceType: ['album', 'camera'],\n    success: async (res) => {\n      // æ˜¾ç¤ºä¸Šä¼ è¿›åº¦\n      uni.showLoading({\n        title: 'ä¸Šä¼ ä¸­...',\n        mask: true\n      })\n\n      try {\n        // é€ä¸ªä¸Šä¼ æ–‡ä»¶\n        const uploadPromises = res.tempFilePaths.map(async (filePath, index) => {\n          try {\n            // è·å–æ–‡ä»¶ä¿¡æ¯\n            const fileInfo = await getFileInfo(filePath)\n            console.log(\"fileInfo\", fileInfo)\n            console.log(\"filePath\", filePath)\n            if (!fileInfo || !fileInfo.extension) {\n              throw new Error('æ— æ³•è·å–æ–‡ä»¶ä¿¡æ¯')\n            }\n            // ä¸Šä¼ æ–‡ä»¶\n            const uploadResult = await uploadFile({\n              filePath: filePath,\n              name: `photo_${Date.now()}_${index}.${fileInfo.extension}`\n            })\n\n            // è§£æä¸Šä¼ ç»“æœ\n            const fileData = getUploadResult(uploadResult)\n            if (!fileData || !fileData.url) {\n              throw new Error('ä¸Šä¼ ç»“æœè§£æå¤±è´¥')\n            }\n\n            // è¿”å›ä¸Šä¼ åçš„URL\n            return fileData.url\n          } catch (error) {\n            console.error(`ç¬¬${index + 1}å¼ ç…§ç‰‡ä¸Šä¼ å¤±è´¥:`, error)\n            throw error\n          }\n        })\n\n        // ç­‰å¾…æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ å®Œæˆ\n        const uploadedUrls = await Promise.all(uploadPromises)\n        \n        // å°†ä¸Šä¼ æˆåŠŸçš„URLæ·»åŠ åˆ°ç…§ç‰‡æ•°ç»„\n        photos.value.push(...uploadedUrls)\n        \n        uni.showToast({\n          title: `æˆåŠŸä¸Šä¼ ${uploadedUrls.length}å¼ ç…§ç‰‡`,\n          icon: 'success'\n        })\n\n      } catch (error) {\n        console.error('ç…§ç‰‡ä¸Šä¼ å¤±è´¥:', error)\n        uni.showToast({\n          title: 'ç…§ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•',\n          icon: 'none'\n        })\n      } finally {\n        uni.hideLoading()\n      }\n    },\n    fail: (error) => {\n      console.error('é€‰æ‹©ç…§ç‰‡å¤±è´¥:', error)\n      uni.showToast({\n        title: 'é€‰æ‹©ç…§ç‰‡å¤±è´¥',\n        icon: 'none'\n      })\n    }\n  })\n}\n\n// è·å–æ–‡ä»¶ä¿¡æ¯\nconst getFileInfo = (filePath) => {\n  return new Promise((resolve, reject) => {\n    uni.getFileInfo({\n      filePath: filePath,\n      success: (res) => {\n        // ä»æ–‡ä»¶è·¯å¾„ä¸­æå–æ‰©å±•å\n        const extension = filePath.split('.').pop().toLowerCase()\n        resolve({\n          size: res.size,\n          extension: extension\n        })\n      },\n      fail: (error) => {\n        console.error('è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥:', error)\n        // å¦‚æœè·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ‰©å±•å\n        const extension = filePath.split('.').pop().toLowerCase() || 'jpg'\n        resolve({\n          size: 0,\n          extension: extension\n        })\n      }\n    })\n  })\n}\n\n// é¢„è§ˆç…§ç‰‡\nconst previewPhoto = (index) => {\n  uni.previewImage({\n    urls: photos.value.map(photo => proxy.$imgBaseUrl + photo),\n    current: proxy.$imgBaseUrl + photos.value[index],\n    indicator: 'number',\n    loop: true,\n    show: true,\n    success: function(res) {\n      console.log('å›¾ç‰‡é¢„è§ˆæˆåŠŸ', res);\n    },\n    fail: function(err) {\n      console.error('å›¾ç‰‡é¢„è§ˆå¤±è´¥', err);\n    }\n  })\n}\n\n\n\n// åˆ é™¤ç…§ç‰‡\nconst deletePhoto = (index) => {\n  photos.value.splice(index, 1)\n}\n\n// åˆ‡æ¢æŠ€èƒ½é€‰æ‹©\nconst toggleSkill = (service) => {\n  const serviceId = service.id\n  const index = selectedSkills.value.indexOf(serviceId)\n  \n  if (index > -1) {\n    selectedSkills.value.splice(index, 1)\n  } else {\n    selectedSkills.value.push(serviceId)\n  }\n  \n  // æä¾›è§¦è§‰åé¦ˆ\n  uni.vibrateShort({\n    type: 'light'\n  })\n}\n\n// è¿”å›ä¸Šä¸€é¡µ\nconst goBack = () => {\n  uni.navigateBack({\n    delta: 1\n  })\n}\n\n// ä¸‹æ‹‰åˆ·æ–°å¤„ç†\nconst onRefresh = async () => {\n  isRefreshing.value = true\n  try {\n    await loadInitialData()\n\n  } catch (error) {\n    uni.showToast({\n      title: 'åˆ·æ–°å¤±è´¥',\n      icon: 'none',\n      duration: 1500\n    })\n  } finally {\n    isRefreshing.value = false\n  }\n}\n\nconst onRefreshRestore = () => {\n  isRefreshing.value = false\n}\n\n// ä¿å­˜æ›´æ”¹\nconst saveChanges = async () => {\n  // é˜²é‡å¤æäº¤\n  if (isSaving.value) {\n    return\n  }\n\n  // è¡¨å•éªŒè¯\n  if (!formData.nickname.trim()) {\n    uni.showToast({ title: 'è¯·è¾“å…¥æ˜µç§°', icon: 'none' })\n    return\n  }\n  \n  if (formData.nickname.length > 50) {\n    uni.showToast({ title: 'æ˜µç§°ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦', icon: 'none' })\n    return\n  }\n  \n  if (!formData.gender) {\n    uni.showToast({ title: 'è¯·é€‰æ‹©æ€§åˆ«', icon: 'none' })\n    return\n  }\n  \n  const age = parseInt(formData.age)\n  const height = parseInt(formData.height)\n  const weight = parseInt(formData.weight)\n  \n  if (!age || age < 18 || age > 65) {\n    uni.showToast({ title: 'å¹´é¾„å¿…é¡»åœ¨18-65å²ä¹‹é—´', icon: 'none' })\n    return\n  }\n  \n  if (!height || height < 100 || height > 250) {\n    uni.showToast({ title: 'èº«é«˜å¿…é¡»åœ¨100-250cmä¹‹é—´', icon: 'none' })\n    return\n  }\n  \n  if (!weight || weight < 30 || weight > 200) {\n    uni.showToast({ title: 'è¯·è¾“å…¥åˆç†çš„ä½“é‡', icon: 'none' })\n    return\n  }\n  \n  if (selectedCities.value.length === 0) {\n    uni.showToast({ title: 'è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæœåŠ¡åŒºåŸŸ', icon: 'none' })\n    return\n  }\n  \n  if (photos.value.length === 0) {\n    uni.showToast({ title: 'è¯·ä¸Šä¼ è‡³å°‘ä¸€å¼ ç”Ÿæ´»ç…§', icon: 'none' })\n    return\n  }\n  \n  if (photos.value.length > 9) {\n    uni.showToast({ title: 'æœ€å¤šåªèƒ½ä¸Šä¼ 9å¼ ç…§ç‰‡', icon: 'none' })\n    return\n  }\n  \n  if (selectedSkills.value.length === 0) {\n    uni.showToast({ title: 'è¯·è‡³å°‘é€‰æ‹©ä¸€é¡¹æœåŠ¡æŠ€èƒ½', icon: 'none' })\n    return\n  }\n  \n  // æ‰§è¡Œä¿å­˜\n  await doSave()\n}\n\n// æ‰§è¡Œä¿å­˜\nconst doSave = async () => {\n  isSaving.value = true\n  \n  try {\n    // è·å–åŸå¸‚ä»£ç åˆ—è¡¨å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ•°ç»„\n    const serviceAreaCodes = selectedCities.value.map(cityName => {\n      const city = cityList.value.find(c => c.name === cityName)\n      return city ? String(city.code) : null // è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n    }).filter(code => code !== null)\n    \n    if (serviceAreaCodes.length === 0) {\n      uni.showToast({\n        title: 'æœåŠ¡åŒºåŸŸæ•°æ®å¼‚å¸¸ï¼Œè¯·é‡æ–°é€‰æ‹©',\n        icon: 'none'\n      })\n      return\n    }\n    \n    // æ„å»ºç¬¦åˆæ¥å£è¦æ±‚çš„æ•°æ®æ ¼å¼\n    const submitData = {\n      nickname: formData.nickname.trim(),\n      gender: formData.gender === 'male' ? 'ç”·' : 'å¥³',\n      age: parseInt(formData.age),\n      height: parseInt(formData.height),\n      weight: parseInt(formData.weight),\n      service_areas: serviceAreaCodes, // æœåŠ¡åŒºåŸŸä»£ç å­—ç¬¦ä¸²æ•°ç»„\n      services: selectedSkills.value, // æœåŠ¡IDæ•°ç»„\n      can_accept_orders: 'N', // ä¸å…è®¸æ¥å•\n      photos: photos.value,\n      tags: selectedTags.value.map(tag => tag.tag_name), // ä¸ªæ€§æ ‡ç­¾åç§°æ•°ç»„\n      phone: userStore.userInfo.phone || '' // æ·»åŠ phoneå‚æ•°\n    }\n    \n    console.log('ä¿å­˜æ•°æ®:', submitData)\n    \n    // è°ƒç”¨æ¥å£\n    const response = await updateCompanionApplication(submitData)\n    \n    console.log('æ¥å£å“åº”:', response)\n    \n    // åˆ¤æ–­æ¥å£æ˜¯å¦æˆåŠŸ - éœ€è¦ response.data.code == 0\n    if (response && response.data && response.data.code === 0) {\n      // ä¿å­˜æˆåŠŸ\n      uni.showToast({\n        title: 'ä¿å­˜æˆåŠŸ',\n        icon: 'success',\n        duration: 2000\n      })\n      \n      // å‘é€äº‹ä»¶é€šçŸ¥ä¸ªäººä¸­å¿ƒé¡µé¢åˆ·æ–°ç”³è¯·ä¿¡æ¯\n      uni.$emit('applicationStatusChanged', {\n        status: 'updated',\n        message: 'èµ„æ–™æ›´æ–°æˆåŠŸ'\n      })\n      \n      // å»¶è¿Ÿè¿”å›ä¸Šä¸€é¡µ\n      setTimeout(() => {\n  uni.navigateBack()\n      }, 1500)\n    } else {\n      // æ¥å£è¿”å›å¤±è´¥\n      const errorMsg = (response && response.data && response.data.message) || 'ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'\n      \n      uni.showModal({\n        title: 'ä¿å­˜å¤±è´¥',\n        content: errorMsg,\n        showCancel: false,\n        confirmText: 'æˆ‘çŸ¥é“äº†'\n      })\n    }\n    \n  } catch (error) {\n    console.error('ä¿å­˜å¤±è´¥:', error)\n    \n    // æ ¹æ®é”™è¯¯ç±»å‹æ˜¾ç¤ºä¸åŒçš„æç¤ºä¿¡æ¯\n    let errorMessage = 'ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'\n    \n    if (error && error.message) {\n      if (error.message.includes('ç½‘ç»œ')) {\n        errorMessage = 'ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•'\n      } else if (error.message.includes('å‚æ•°')) {\n        errorMessage = 'ä¿å­˜ä¿¡æ¯æœ‰è¯¯ï¼Œè¯·æ£€æŸ¥åé‡è¯•'\n      } else {\n        errorMessage = error.message\n      }\n    }\n    \n    uni.showModal({\n      title: 'ä¿å­˜å¤±è´¥',\n      content: errorMessage,\n      showCancel: false,\n      confirmText: 'æˆ‘çŸ¥é“äº†'\n    })\n  } finally {\n    isSaving.value = false\n  }\n}\n\n// ä¸ªæ€§æ ‡ç­¾ç›¸å…³æ–¹æ³•\n// æ˜¾ç¤ºæ ‡ç­¾é€‰æ‹©å™¨\nconst showTagSelector = () => {\n  // åˆå§‹åŒ–ä¸´æ—¶é€‰æ‹©çŠ¶æ€ä¸ºå½“å‰å·²é€‰æ‹©çš„æ ‡ç­¾\n  tempSelectedTags.value = [...selectedTags.value]\n  showTagPicker.value = true\n  // åŠ è½½é»˜è®¤æ ‡ç­¾ç±»å‹ï¼ˆä¸ªæ€§ç‰¹è´¨ï¼‰çš„æ ‡ç­¾åˆ—è¡¨ï¼ˆä¼šå…ˆæ£€æŸ¥ç¼“å­˜ï¼‰\n  loadTagsByType(4)\n}\n\n// éšè—æ ‡ç­¾é€‰æ‹©å™¨\nconst hideTagSelector = () => {\n  // é‡ç½®ä¸´æ—¶é€‰æ‹©çŠ¶æ€\n  tempSelectedTags.value = []\n  showTagPicker.value = false\n}\n\n// åˆ‡æ¢æ ‡ç­¾ç±»å‹\nconst switchTagType = (tagType) => {\n  currentTagType.value = tagType\n  // åˆ‡æ¢åˆ†ç±»æ—¶åŠ è½½å¯¹åº”åˆ†ç±»çš„æ ‡ç­¾æ•°æ®ï¼ˆä¼šå…ˆæ£€æŸ¥ç¼“å­˜ï¼‰\n  loadTagsByType(tagType)\n}\n\n// æ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ\nconst isCacheValid = (tagType) => {\n  const timestamp = cacheTimestamps.value.get(tagType)\n  if (!timestamp) return false\n  \n  const now = Date.now()\n  return (now - timestamp) < cacheExpireTime\n}\n\n// ä»ç¼“å­˜è·å–æ ‡ç­¾æ•°æ®\nconst getTagsFromCache = (tagType) => {\n  return tagsCache.value.get(tagType) || []\n}\n\n// å°†æ ‡ç­¾æ•°æ®å­˜å…¥ç¼“å­˜\nconst setTagsToCache = (tagType, tagList) => {\n  tagsCache.value.set(tagType, tagList)\n  cacheTimestamps.value.set(tagType, Date.now())\n  console.log(`æ ‡ç­¾ç±»å‹${tagType}å·²ç¼“å­˜ï¼Œæ•°æ®é‡: ${tagList.length}`)\n}\n\n// æ¸…é™¤æŒ‡å®šç±»å‹çš„ç¼“å­˜\nconst clearTagCache = (tagType) => {\n  tagsCache.value.delete(tagType)\n  cacheTimestamps.value.delete(tagType)\n  console.log(`å·²æ¸…é™¤æ ‡ç­¾ç±»å‹${tagType}çš„ç¼“å­˜`)\n}\n\n// æ¸…é™¤æ‰€æœ‰æ ‡ç­¾ç¼“å­˜\nconst clearAllTagCache = () => {\n  tagsCache.value.clear()\n  cacheTimestamps.value.clear()\n  console.log('å·²æ¸…é™¤æ‰€æœ‰æ ‡ç­¾ç¼“å­˜')\n}\n\n// æ ¹æ®ç±»å‹åŠ è½½æ ‡ç­¾\nconst loadTagsByType = async (tagType, forceRefresh = false) => {\n  // å¦‚æœä¸æ˜¯å¼ºåˆ¶åˆ·æ–°ï¼Œæ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ\n  if (!forceRefresh && isCacheValid(tagType)) {\n    const cachedTags = getTagsFromCache(tagType)\n    if (cachedTags.length > 0) {\n      console.log(`ä½¿ç”¨ç¼“å­˜æ•°æ® - æ ‡ç­¾ç±»å‹${tagType}ï¼Œæ•°æ®é‡: ${cachedTags.length}`)\n      currentTagList.value = cachedTags\n      return\n    }\n  }\n  \n  tagsLoading.value = true\n  try {\n    console.log(`å¼€å§‹åŠ è½½æ ‡ç­¾ç±»å‹: ${tagType}`)\n    \n    // æ‰€æœ‰åˆ†ç±»éƒ½ä½¿ç”¨æ™®é€šæ ‡ç­¾æ¥å£\n    const params = { \n      tag_type: tagType, \n      page: 1, \n      pageSize: 60 \n    }\n    console.log('è¯·æ±‚å‚æ•°:', params)\n    \n    const response = await getPersonalityTags(params)\n    console.log('APIå“åº”:', response)\n    \n    if (response.data && response.data.code === 0 && response.data.data) {\n      // ç»Ÿä¸€å¤„ç†è¿”å›æ•°æ®\n      const tagList = response.data.data.list || response.data.data\n      currentTagList.value = tagList\n      \n      // å°†æ•°æ®å­˜å…¥ç¼“å­˜\n      setTagsToCache(tagType, tagList)\n      \n      console.log(`æ ‡ç­¾ç±»å‹${tagType}åŠ è½½æˆåŠŸ:`, tagList)\n    } else {\n      console.warn(`è·å–æ ‡ç­¾ç±»å‹${tagType}å¤±è´¥ï¼Œå“åº”æ•°æ®:`, response)\n      currentTagList.value = []\n    }\n  } catch (error) {\n    console.error(`è·å–æ ‡ç­¾ç±»å‹${tagType}å¤±è´¥:`, error)\n    console.error('é”™è¯¯è¯¦æƒ…:', error.response || error)\n    currentTagList.value = []\n  } finally {\n    tagsLoading.value = false\n  }\n}\n\n// æ£€æŸ¥æ ‡ç­¾æ˜¯å¦å·²é€‰ä¸­\nconst isTagSelected = (tagId) => {\n  return tempSelectedTags.value.some(tag => tag.id === tagId)\n}\n\n// åˆ‡æ¢æ ‡ç­¾é€‰æ‹©çŠ¶æ€\nconst toggleTagSelection = (tag) => {\n  const index = tempSelectedTags.value.findIndex(t => t.id === tag.id)\n  \n  if (index > -1) {\n    // å¦‚æœå·²é€‰ä¸­ï¼Œåˆ™å–æ¶ˆé€‰æ‹©\n    tempSelectedTags.value.splice(index, 1)\n  } else {\n    // å¦‚æœæœªé€‰ä¸­ï¼Œæ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶\n    if (tempSelectedTags.value.length >= 5) {\n      uni.showToast({\n        title: 'æœ€å¤šåªèƒ½é€‰æ‹©5ä¸ªæ ‡ç­¾',\n        icon: 'none'\n      })\n      return\n    }\n    // æ·»åŠ æ ‡ç­¾\n    tempSelectedTags.value.push(tag)\n  }\n  \n  // æä¾›è§¦è§‰åé¦ˆ\n  uni.vibrateShort({\n    type: 'light'\n  })\n}\n\n// ç¡®è®¤æ ‡ç­¾é€‰æ‹©\nconst confirmTagSelection = () => {\n  // å°†ä¸´æ—¶é€‰æ‹©åº”ç”¨åˆ°æ­£å¼çŠ¶æ€\n  selectedTags.value = [...tempSelectedTags.value]\n  \n  // å…³é—­å¼¹çª—\n  showTagPicker.value = false\n  tempSelectedTags.value = []\n  \n  uni.showToast({\n    title: `å·²é€‰æ‹©${selectedTags.value.length}ä¸ªæ ‡ç­¾`,\n    icon: 'success'\n  })\n}\n\n// ç§»é™¤æ ‡ç­¾\nconst removeTag = (tag) => {\n  const index = selectedTags.value.findIndex(t => t.id === tag.id)\n  if (index > -1) {\n    selectedTags.value.splice(index, 1)\n    \n    // æä¾›è§¦è§‰åé¦ˆ\n    uni.vibrateShort({\n      type: 'light'\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.data-edition-container {\n  height: 100vh;\n  background: linear-gradient(180deg, #f8f9fe 0%, #ffffff 100%);\n  display: flex;\n  flex-direction: column;\n}\n\n.status-bar {\n  background: #FFFFFF;\n}\n\n.nav-bar {\n  background: #FFFFFF;\n  height: 88rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 32rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\n}\n\n.back-btn {\n  display: flex;\n  align-items: center;\n  padding: 12rpx 16rpx;\n  border-radius: 20rpx;\n  background: rgba(0, 0, 0, 0.04);\n  transition: all 0.2s;\n}\n\n.back-btn:active {\n  background: rgba(0, 0, 0, 0.08);\n  transform: scale(0.96);\n}\n\n.back-icon {\n  width: 32rpx;\n  height: 32rpx;\n  opacity: 0.8;\n}\n\n.back-text {\n  font-size: 26rpx;\n  color: #1A1A1A;\n  font-weight: 500;\n  margin-left: 8rpx;\n}\n\n.nav-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #1A1A1A;\n  text-align: center;\n  flex: 1;\n}\n\n.save-btn {\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-radius: 24rpx;\n  padding: 12rpx 24rpx;\n  transition: all 0.3s ease;\n  box-shadow: 0 4rpx 12rpx rgba(115, 99, 255, 0.3);\n  \n  &:active:not(.disabled) {\n    transform: scale(0.95);\n    box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.4);\n  }\n  \n  &.disabled {\n    opacity: 0.6;\n    transform: none !important;\n    box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.2);\n  }\n}\n\n.save-text {\n  font-size: 26rpx;\n  color: #FFFFFF;\n  font-weight: 600;\n}\n\n.main-content {\n  flex: 1;\n  overflow: hidden;\n}\n\n.scroll-container {\n  width: 100%;\n  height: 100%;\n}\n\n.form-container {\n  padding: 24rpx 20rpx 200rpx;\n}\n\n/* ç°ä»£å¡ç‰‡æ ·å¼ */\n.modern-card {\n  background: white;\n  border-radius: 18rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 0 4rpx 18rpx rgba(115, 99, 255, 0.06);\n  border: 1rpx solid rgba(115, 99, 255, 0.08);\n  overflow: hidden;\n  position: relative;\n}\n\n.card-header {\n  padding: 26rpx 20rpx 20rpx;\n  display: flex;\n  align-items: flex-start;\n  position: relative;\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    left: 20rpx;\n    right: 20rpx;\n    height: 1rpx;\n    background: linear-gradient(90deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 105, 222, 0.1) 100%);\n  }\n}\n\n.header-content {\n  display: flex;\n  align-items: center;\n}\n\n.section-indicator {\n  width: 6rpx;\n  height: 32rpx;\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-radius: 3rpx;\n  margin-right: 20rpx;\n  box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.3);\n  align-self: center;\n}\n\n.header-text {\n  flex: 1;\n}\n\n.card-title {\n  font-size: 28rpx;\n  font-weight: 500;\n  color: #1A1A1A;\n  margin-bottom: 6rpx;\n  letter-spacing: 0.3rpx;\n  line-height: 1.3;\n}\n\n.card-subtitle {\n  font-size: 22rpx;\n  color: #666666;\n  opacity: 0.8;\n  line-height: 1.4;\n  margin-left: 20rpx;\n}\n\n/* è¡¨å•å†…å®¹ */\n.form-content {\n  padding: 20rpx 20rpx 20rpx;\n}\n\n.input-group {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20rpx;\n  gap: 20rpx;\n}\n\n.input-label {\n  font-size: 24rpx;\n  font-weight: 500;\n  color: #1A1A1A;\n  width: 110rpx;\n  flex-shrink: 0;\n  text-align: left;\n}\n\n.input-wrapper {\n  position: relative;\n  flex: 1;\n}\n\n.modern-input {\n  width: 100%;\n  height: 80rpx;\n  background: #f8f9fe;\n  border: 2rpx solid #e9ecf5;\n  border-radius: 14rpx;\n  padding: 0 20rpx;\n  font-size: 26rpx;\n  color: #1A1A1A;\n  transition: all 0.3s;\n}\n\n.modern-input:focus {\n  border-color: #7363FF;\n  background: rgba(115, 99, 255, 0.05);\n}\n\n/* æ€§åˆ«é€‰æ‹©å™¨ - æ°´å¹³å¸ƒå±€ä¼˜åŒ– */\n.gender-selector {\n  display: flex;\n  gap: 16rpx;\n  width: 100%;\n}\n\n.gender-chip {\n  flex: 1;\n  height: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #f8f9fe;\n  border: 2rpx solid #e9ecf5;\n  border-radius: 14rpx;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  \n  /* æ·»åŠ å¾®å¦™çš„æ¸å˜èƒŒæ™¯ */\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(248, 249, 254, 0.8) 100%);\n    opacity: 0;\n    transition: opacity 0.3s;\n  }\n  \n  &.active {\n    border-color: #7363FF;\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 105, 222, 0.1) 100%);\n    transform: translateY(-2rpx);\n    box-shadow: 0 6rpx 20rpx rgba(115, 99, 255, 0.25);\n    \n    &::before {\n      opacity: 1;\n    }\n    \n    .gender-icon {\n      transform: scale(1.1);\n    }\n    \n    .chip-text {\n      color: #7363FF;\n      font-weight: 500;\n    }\n  }\n  \n  &:active {\n    transform: scale(0.98);\n  }\n}\n\n.gender-icon {\n  width: 32rpx;\n  height: 32rpx;\n  margin-right: 10rpx;\n  transition: transform 0.3s ease;\n  position: relative;\n  z-index: 2;\n}\n\n.chip-text {\n  font-size: 24rpx;\n  color: #1A1A1A;\n  font-weight: 400;\n  transition: all 0.3s ease;\n  position: relative;\n  z-index: 2;\n}\n\n/* è¾“å…¥æ¡†å›¾æ ‡ */\n.input-icon {\n  position: absolute;\n  top: 50%;\n  right: 24rpx;\n  transform: translateY(-50%);\n  font-size: 28rpx;\n  opacity: 0.7;\n  transition: all 0.3s ease;\n  z-index: 2;\n}\n\n.modern-input:focus + .input-icon {\n  opacity: 1;\n  transform: translateY(-50%) scale(1.1);\n}\n\n/* åŸå¸‚é€‰æ‹©å™¨æ ·å¼ */\n.city-input {\n  width: 100%;\n  height: 80rpx;\n  background: #f8f9fe;\n  border: 2rpx solid #e9ecf5;\n  border-radius: 14rpx;\n  padding: 0 20rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  transition: all 0.3s;\n  position: relative;\n  \n  &:active {\n    transform: scale(0.98);\n    border-color: #7363FF;\n    background: rgba(115, 99, 255, 0.05);\n  }\n}\n\n.city-display {\n  font-size: 26rpx;\n  color: #1A1A1A;\n  font-weight: 400;\n  flex: 1;\n}\n\n.city-icon {\n  position: static !important;\n  transform: none !important;\n  font-size: 24rpx;\n  opacity: 0.8;\n}\n\n/* ç…§ç‰‡ç”»å»Š */\n.photo-gallery {\n  padding: 20rpx;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 14rpx;\n}\n\n.photo-item {\n  position: relative;\n  aspect-ratio: 1;\n  border-radius: 20rpx;\n  overflow: hidden;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n}\n\n.photo-img {\n  width: 100%;\n  height: 100%;\n}\n\n.photo-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0%, transparent 100%);\n  opacity: 1;\n  transition: opacity 0.3s;\n}\n\n.photo-item:active .photo-overlay {\n  opacity: 0.8;\n}\n\n.photo-remove {\n  position: absolute;\n  top: 12rpx;\n  right: 12rpx;\n  width: 40rpx;\n  height: 40rpx;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\n}\n\n.remove-text {\n  font-size: 24rpx;\n  color: #ff4757;\n  font-weight: bold;\n}\n\n.photo-add {\n  position: relative;\n  aspect-ratio: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #f8f9fe 0%, #ffffff 100%);\n  border: 3rpx dashed rgba(115, 99, 255, 0.3);\n  border-radius: 20rpx;\n  transition: all 0.3s;\n  overflow: hidden;\n}\n\n.photo-add:active {\n  transform: scale(0.95);\n  border-color: #7363FF;\n  background: rgba(115, 99, 255, 0.05);\n  \n  .add-icon-circle {\n    transform: scale(1.1);\n    box-shadow: 0 6rpx 20rpx rgba(115, 99, 255, 0.4);\n  }\n}\n\n.add-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  z-index: 2;\n}\n\n.add-icon-circle {\n  width: 70rpx;\n  height: 70rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.add-icon {\n  width: 32rpx;\n  height: 32rpx;\n  opacity: 0.9;\n}\n\n.add-text {\n  font-size: 24rpx;\n  color: #666666;\n  font-weight: 600;\n  letter-spacing: 0.5rpx;\n}\n\n/* æœåŠ¡æŠ€èƒ½æ•´ä½“å®¹å™¨ */\n.skills-wrapper {\n  padding: 20rpx;\n}\n\n/* åˆ†ç±»åŒºå— */\n.category-section {\n  margin-bottom: 32rpx;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n\n/* åˆ†ç±»æ ‡é¢˜ */\n.category-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 16rpx;\n  padding: 0 4rpx;\n}\n\n.category-title {\n  font-size: 26rpx;\n  font-weight: 500;\n  color: #1A1A1A;\n  flex: 1;\n}\n\n/* æŠ€èƒ½å®¹å™¨ - æ”¹ä¸ºä¸‰åˆ—å¸ƒå±€ */\n.skills-container {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12rpx;\n}\n\n.skill-item {\n  position: relative;\n  padding: 20rpx 12rpx;\n  background: #f8f9fe;\n  border: 2rpx solid #e9ecf5;\n  border-radius: 14rpx;\n  overflow: hidden;\n  \n  &.selected {\n    border-color: #7363FF;\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 105, 222, 0.1) 100%);\n  }\n}\n\n.skill-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n\n.skill-name {\n  font-size: 22rpx;\n  color: #1A1A1A;\n  font-weight: 400;\n  line-height: 1.3;\n  text-align: center;\n  word-break: break-all;\n}\n\n/* æœåŠ¡åŠ è½½çŠ¶æ€æ ·å¼ */\n.services-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60rpx 40rpx;\n  text-align: center;\n}\n\n.no-city-tip, .no-services-tip {\n  padding: 60rpx 40rpx;\n  text-align: center;\n}\n\n.tip-text {\n  font-size: 24rpx;\n  color: #999999;\n  line-height: 1.5;\n}\n\n/* ä¸ªæ€§æ ‡ç­¾å¡ç‰‡æ ·å¼ */\n.personality-card {\n  margin-bottom: 20rpx;\n}\n\n.selected-tags {\n  padding: 20rpx;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12rpx;\n}\n\n.tag-item {\n  display: flex;\n  align-items: center;\n  background: linear-gradient(135deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 105, 222, 0.1) 100%);\n  border: 1rpx solid rgba(115, 99, 255, 0.2);\n  border-radius: 20rpx;\n  padding: 8rpx 16rpx;\n  transition: all 0.3s ease;\n  \n  &:active {\n    transform: scale(0.95);\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.15) 0%, rgba(255, 105, 222, 0.15) 100%);\n  }\n}\n\n.tag-text {\n  font-size: 22rpx;\n  color: #7363FF;\n  font-weight: 500;\n  margin-right: 8rpx;\n}\n\n.tag-remove {\n  font-size: 24rpx;\n  color: rgba(115, 99, 255, 0.6);\n  font-weight: 600;\n  width: 24rpx;\n  height: 24rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.8);\n  transition: all 0.3s ease;\n}\n\n.add-tags-section {\n  padding: 20rpx;\n}\n\n.add-tags-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #f8f9fe 0%, #ffffff 100%);\n  border: 3rpx dashed rgba(115, 99, 255, 0.3);\n  border-radius: 20rpx;\n  padding: 24rpx;\n  transition: all 0.3s;\n  \n  &:active:not(.disabled) {\n    transform: scale(0.95);\n    border-color: #7363FF;\n    background: rgba(115, 99, 255, 0.05);\n  }\n  \n  &.disabled {\n    opacity: 0.5;\n    border-color: rgba(115, 99, 255, 0.1);\n    background: rgba(248, 249, 254, 0.5);\n    cursor: not-allowed;\n    \n    .add-icon {\n      background: #cccccc;\n    }\n    \n    .add-text, .tag-count {\n      color: #999999;\n    }\n  }\n}\n\n.add-icon {\n  width: 40rpx;\n  height: 40rpx;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n \n}\n\n.add-text {\n  font-size: 26rpx;\n  color: #666666;\n  font-weight: 500;\n}\n\n.tag-count {\n  font-size: 22rpx;\n  color: #999999;\n  margin-left: 8rpx;\n}\n\n/* å·²é€‰åŸå¸‚æ ‡ç­¾æ ·å¼ */\n.selected-cities {\n  margin-top: 20rpx;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12rpx;\n  padding: 0 20rpx 0 0; /* å³ä¾§ç•™ç™½ä¿æŒå¯¹é½ */\n}\n\n.city-tag {\n  display: flex;\n  align-items: center;\n  background: linear-gradient(135deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 105, 222, 0.1) 100%);\n  border: 1rpx solid rgba(115, 99, 255, 0.2);\n  border-radius: 20rpx;\n  padding: 8rpx 16rpx;\n  transition: all 0.3s ease;\n  \n  &:active {\n    transform: scale(0.95);\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.15) 0%, rgba(255, 105, 222, 0.15) 100%);\n  }\n}\n\n.city-tag-text {\n  font-size: 22rpx;\n  color: #7363FF;\n  font-weight: 500;\n  margin-right: 8rpx;\n}\n\n.city-tag-remove {\n  font-size: 24rpx;\n  color: rgba(115, 99, 255, 0.6);\n  font-weight: 600;\n  width: 24rpx;\n  height: 24rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.8);\n  transition: all 0.3s ease;\n}\n\n/* åŸå¸‚é€‰æ‹©å¼¹çª—æ ·å¼ */\n.city-picker-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(8rpx);\n  -webkit-backdrop-filter: blur(8rpx);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  animation: fadeIn 0.3s ease-out;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes slideUp {\n  from { \n    transform: translateY(100rpx);\n    opacity: 0;\n  }\n  to { \n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n.city-picker-container {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(247, 248, 250, 0.95) 100%);\n  backdrop-filter: blur(20rpx);\n  -webkit-backdrop-filter: blur(20rpx);\n  padding: 32rpx;\n  border-radius: 32rpx;\n  width: 85%;\n  max-width: 640rpx;\n  max-height: 80vh;\n  box-shadow: 0 20rpx 60rpx rgba(115, 99, 255, 0.2);\n  border: 1rpx solid rgba(115, 99, 255, 0.1);\n  animation: slideUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.city-picker-header {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 32rpx;\n  position: relative;\n  padding-bottom: 24rpx;\n  border-bottom: 1rpx solid rgba(115, 99, 255, 0.1);\n}\n\n.picker-title {\n  font-size: 30rpx;\n  font-weight: 400;\n  color: #1A1A1A;\n  margin-bottom: 8rpx;\n}\n\n.picker-subtitle {\n  font-size: 22rpx;\n  color: #666666;\n  opacity: 0.8;\n  margin-bottom: 16rpx;\n}\n\n.picker-close {\n  position: absolute;\n  top: -8rpx;\n  right: 0;\n  width: 48rpx;\n  height: 48rpx;\n  background: linear-gradient(135deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 255, 255, 0.8) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24rpx;\n  color: #666666;\n  font-weight: 600;\n  transition: all 0.3s;\n  border: 1rpx solid rgba(115, 99, 255, 0.15);\n  \n  &:active {\n    transform: scale(0.9);\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.15) 0%, rgba(255, 255, 255, 0.9) 100%);\n  }\n}\n\n.city-picker-content {\n  flex: 1;\n  overflow-y: auto;\n  margin-bottom: 24rpx;\n}\n\n/* åŠ è½½çŠ¶æ€æ ·å¼ */\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80rpx 40rpx;\n  text-align: center;\n}\n\n.loading-spinner {\n  width: 60rpx;\n  height: 60rpx;\n  border: 6rpx solid rgba(115, 99, 255, 0.1);\n  border-top: 6rpx solid #7363FF;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 24rpx;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n  font-size: 24rpx;\n  color: #666666;\n  font-weight: 500;\n}\n\n.city-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16rpx;\n}\n\n.city-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20rpx 16rpx;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(247, 248, 250, 0.6) 100%);\n  border: 1rpx solid rgba(115, 99, 255, 0.1);\n  border-radius: 20rpx;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  box-sizing: border-box;\n  \n  &.active {\n    border-color: #7363FF;\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.15) 0%, rgba(255, 105, 222, 0.1) 100%);\n    \n    .city-name {\n      color: #7363FF;\n      font-weight: 500;\n    }\n  }\n  \n  &:active:not(.disabled) {\n    transform: scale(0.98);\n  }\n}\n\n.city-name {\n  flex: 1;\n  font-size: 26rpx;\n  color: #1A1A1A;\n  font-weight: 400;\n  letter-spacing: 0.5rpx;\n  transition: all 0.3s ease;\n}\n\n.city-check {\n  width: 24rpx;\n  height: 24rpx;\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16rpx;\n  color: white;\n  font-weight: 700;\n  box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.3);\n  animation: checkBounce 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  margin-left: 12rpx;\n  flex-shrink: 0;\n}\n\n@keyframes checkBounce {\n  0% { transform: scale(0); }\n  50% { transform: scale(1.2); }\n  100% { transform: scale(1); }\n}\n\n.picker-footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-top: 20rpx;\n  border-top: 1rpx solid rgba(115, 99, 255, 0.1);\n}\n\n.selected-count {\n  font-size: 24rpx;\n  color: #666666;\n  font-weight: 500;\n}\n\n.confirm-btn {\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  color: white;\n  border-radius: 24rpx;\n  padding: 12rpx 32rpx;\n  font-size: 24rpx;\n  font-weight: 600;\n  box-shadow: 0 6rpx 20rpx rgba(115, 99, 255, 0.3);\n  transition: all 0.3s ease;\n  \n  &:active {\n    transform: scale(0.95);\n    box-shadow: 0 4rpx 16rpx rgba(115, 99, 255, 0.4);\n  }\n}\n\n/* ä¸ªæ€§æ ‡ç­¾é€‰æ‹©å™¨å¼¹çª—æ ·å¼ */\n.tag-picker-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(8rpx);\n  -webkit-backdrop-filter: blur(8rpx);\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n  z-index: 1000;\n  animation: fadeIn 0.3s ease-out;\n}\n\n.tag-picker-container {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(247, 248, 250, 0.95) 100%);\n  backdrop-filter: blur(20rpx);\n  -webkit-backdrop-filter: blur(20rpx);\n  padding: 32rpx;\n  border-radius: 32rpx 32rpx 0 0;\n  width: 100%;\n  height: 75%;\n  box-shadow: 0 20rpx 60rpx rgba(115, 99, 255, 0.2);\n  border: 1rpx solid rgba(115, 99, 255, 0.1);\n  animation: slideUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.tag-picker-header {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 24rpx;\n  position: relative;\n  padding-bottom: 20rpx;\n  border-bottom: 1rpx solid rgba(115, 99, 255, 0.1);\n}\n\n/* æ ‡ç­¾åˆ†ç±»å¯¼èˆª */\n.tag-nav {\n  display: flex;\n  background: rgba(115, 99, 255, 0.05);\n  border-radius: 16rpx;\n  padding: 4rpx;\n  margin-bottom: 24rpx;\n  overflow-x: auto;\n}\n\n.nav-item {\n  flex: 1;\n  min-width: 120rpx;\n  padding: 12rpx 16rpx;\n  border-radius: 12rpx;\n  text-align: center;\n  white-space: nowrap;\n  \n  &.active {\n    background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n    box-shadow: 0 4rpx 12rpx rgba(115, 99, 255, 0.3);\n    \n    .nav-text {\n      color: white;\n      font-weight: 600;\n    }\n  }\n}\n\n.nav-text {\n  font-size: 24rpx;\n  color: #666666;\n  font-weight: 500;\n  transition: all 0.3s ease;\n}\n\n.tag-picker-content {\n  flex: 1;\n  overflow-y: auto;\n  margin-bottom: 24rpx;\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n.tag-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12rpx;\n}\n\n.tag-grid-item {\n  position: relative;\n  padding: 16rpx 12rpx;\n  background: #f8f9fe;\n  border: 2rpx solid #e9ecf5;\n  border-radius: 14rpx;\n  overflow: hidden;\n  min-height: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &.selected {\n    border-color: #7363FF;\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.1) 0%, rgba(255, 105, 222, 0.1) 100%);\n  }\n}\n\n.tag-grid-text {\n  font-size: 22rpx;\n  color: #1A1A1A;\n  font-weight: 400;\n  line-height: 1.3;\n  text-align: center;\n  word-break: break-all;\n}\n\n.tag-grid-check {\n  position: absolute;\n  top: 8rpx;\n  right: 8rpx;\n  width: 28rpx;\n  height: 28rpx;\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16rpx;\n  color: white;\n  font-weight: 700;\n  box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.3);\n  animation: checkBounce 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n.no-tags-tip {\n  padding: 60rpx 40rpx;\n  text-align: center;\n}\n\n/* æœ€å¤§æ ‡ç­¾æ•°é‡æç¤ºæ ·å¼ */\n.max-tags-tip {\n  padding: 20rpx 40rpx;\n  text-align: center;\n  background: rgba(255, 105, 222, 0.1);\n  border-radius: 12rpx;\n  margin: 20rpx;\n  border: 1rpx solid rgba(255, 105, 222, 0.2);\n}\n\n.max-tags-text {\n  font-size: 24rpx;\n  color: #FF69DE;\n  font-weight: 500;\n  line-height: 1.4;\n}\n\n.input-placeholder {\n  color: #999999;\n  font-size: 26rpx;\n}\n\n/* åº•éƒ¨å›ºå®šä¿å­˜æŒ‰é’®æ ·å¼ */\n.bottom-save-section {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(247, 248, 250, 0.95) 100%);\n  backdrop-filter: blur(20rpx);\n  -webkit-backdrop-filter: blur(20rpx);\n  padding: 20rpx 32rpx calc(20rpx + env(safe-area-inset-bottom));\n  border-top: 1rpx solid rgba(115, 99, 255, 0.1);\n  box-shadow: 0 -4rpx 20rpx rgba(115, 99, 255, 0.1);\n  z-index: 100;\n}\n\n.save-button-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.bottom-save-btn {\n  width: 100%;\n  max-width: 600rpx;\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-radius: 24rpx;\n  padding: 20rpx 32rpx;\n  transition: all 0.3s ease;\n  box-shadow: 0 4rpx 12rpx rgba(115, 99, 255, 0.3);\n  \n  &:active:not(.disabled) {\n    transform: scale(0.95);\n    box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.4);\n  }\n  \n  &.disabled {\n    opacity: 0.6;\n    transform: none !important;\n    box-shadow: 0 2rpx 8rpx rgba(115, 99, 255, 0.2);\n  }\n}\n\n.save-btn-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.save-loading {\n  width: 40rpx;\n  height: 40rpx;\n  margin-right: 12rpx;\n  border: 4rpx solid rgba(255, 255, 255, 0.3);\n  border-top: 4rpx solid rgba(255, 255, 255, 0.6);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.save-icon {\n  width: 32rpx;\n  height: 32rpx;\n  margin-right: 12rpx;\n  font-size: 20rpx;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.save-btn-text {\n  font-size: 28rpx;\n  color: #FFFFFF;\n  font-weight: 600;\n  letter-spacing: 0.5rpx;\n}\n\n.loading-dots {\n  display: flex;\n  justify-content: space-between;\n  width: 40rpx;\n  height: 12rpx;\n}\n\n.dot {\n  width: 8rpx;\n  height: 8rpx;\n  background: white;\n  border-radius: 50%;\n  animation: blink 1s linear infinite;\n}\n\n@keyframes blink {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n</style> ","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/subPackages/fpart/DataEdetion/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["cacheExpireTime","userStore","useUserStore","proxy","getCurrentInstance","statusBarHeight","ref","isRefreshing","isSaving","formData","reactive","showCityPicker","selectedCities","tempSelectedCities","cityList","cityLoading","photos","serviceSkills","selectedSkills","servicesLoading","skillCategories","selectedTags","showTagPicker","tempSelectedTags","tagsLoading","currentTagType","currentTagList","tagsCache","cacheTimestamps","tagNavItems","onMounted","info","uni","loadInitialData","loadCityList","loadApplicationData","error","response","getApplicatioInfo","applicationData","cityNames","cityCode","city","c","name","tagName","loadServicesByCity","cityCodes","cityName","code","getServicesByCities","groupServicesByCategory","categoryMap","service","categoryId","categoryName","a","b","getCityList","selectGender","gender","showCitySelector","hideCitySelector","toggleCitySelection","index","removeCityFromSelection","confirmCitySelection","addPhoto","maxCount","res","uploadPromises","filePath","fileInfo","getFileInfo","uploadResult","uploadFile","fileData","getUploadResult","uploadedUrls","resolve","reject","extension","previewPhoto","photo","err","deletePhoto","toggleSkill","serviceId","onRefresh","onRefreshRestore","saveChanges","age","height","weight","doSave","serviceAreaCodes","submitData","tag","updateCompanionApplication","errorMsg","errorMessage","showTagSelector","loadTagsByType","hideTagSelector","switchTagType","tagType","isCacheValid","timestamp","getTagsFromCache","setTagsToCache","tagList","forceRefresh","cachedTags","params","getPersonalityTags","isTagSelected","tagId","toggleTagSelection","t","confirmTagSelection","removeTag","MiniProgramPage"],"mappings":"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"}