{"version":3,"file":"record-detail.js","sources":["subPackages/balance/record-detail.vue","subPackages/balance/record-detail.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"detail-container\">\n    <!-- 提现状态卡片 -->\n    <view class=\"status-card\">\n      <view class=\"status-icon\">\n        <image \n          src=\"/static/icons/profile/yue.png\" \n          class=\"icon-image\" \n          mode=\"aspectFit\"\n        />\n      </view>\n      <view class=\"status-info\">\n        <view class=\"status-title\">提现到微信零钱</view>\n        <view class=\"status-amount\">-{{ formatAmount(recordData.amount) }}</view>\n        <view class=\"status-text\">\n          <text v-if=\"recordData.transfer_state === 'FAIL' && recordData.fail_reason === 'OVERDUE_CLOSE'\">\n            超时未完成确认收款，余额已退回\n          </text>\n          <text v-else-if=\"recordData.transfer_state === 'FAIL'\">\n            提现失败\n          </text>\n          <text v-else>\n            {{ recordData.transfer_state_desc || '' }}\n          </text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 详细信息列表 -->\n    <view class=\"info-list\">\n      <view class=\"info-item\">\n        <view class=\"info-label\">商户单号</view>\n        <view class=\"info-value\">{{ recordData.out_bill_no || '暂无' }}</view>\n      </view>\n      \n      <view class=\"info-item\">\n        <view class=\"info-label\">提现时间</view>\n        <view class=\"info-value\">{{ formatTime(recordData.created_at) }}</view>\n      </view>\n      \n      <view class=\"info-item\">\n        <view class=\"info-label\">更新时间</view>\n        <view class=\"info-value\">{{ formatTime(recordData.updated_at) }}</view>\n      </view>\n      \n      <view class=\"info-item\">\n        <view class=\"info-label\">过期时间</view>\n        <view class=\"info-value\">{{ formatTime(recordData.expire_time) }}</view>\n      </view>\n      \n      <view class=\"info-item\">\n        <view class=\"info-label\">提现金额</view>\n        <view class=\"info-value amount\">¥{{ formatAmount(recordData.amount) }}</view>\n      </view>\n      \n      <view class=\"info-item\">\n        <view class=\"info-label\">提现状态</view>\n        <view class=\"info-value status\">\n          <text v-if=\"recordData.transfer_state === 'FAIL' && recordData.fail_reason === 'OVERDUE_CLOSE'\">\n            超时关闭\n          </text>\n          <text v-else-if=\"recordData.transfer_state === 'FAIL'\">\n            失败\n          </text>\n          <text v-else>\n            {{ recordData.transfer_state_desc || '处理中' }}\n          </text>\n        </view>\n      </view>\n      \n      <view v-if=\"recordData.fail_reason\" class=\"info-item\">\n        <view class=\"info-label\">失败原因</view>\n        <view class=\"info-value fail-reason\">{{ recordData.fail_reason === 'OVERDUE_CLOSE' ? \"超时未完成确认收款，余额已退回\" : \"提现失败\"}}</view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\n\n// 响应式数据\nconst recordData = ref({})\n\n// 获取页面参数\nconst getPageData = () => {\n  const pages = getCurrentPages()\n  const currentPage = pages[pages.length - 1]\n  const data = currentPage.options?.data\n  \n  if (data) {\n    try {\n      recordData.value = JSON.parse(decodeURIComponent(data))\n      console.log('提现记录详情:', recordData.value)\n    } catch (error) {\n      console.error('解析数据失败:', error)\n      uni.showToast({\n        title: '数据解析失败',\n        icon: 'none'\n      })\n    }\n  }\n}\n\n// 格式化金额（分转元）\nconst formatAmount = (amountInCents) => {\n  if (!amountInCents && amountInCents !== 0) return '0.00'\n  return (amountInCents / 100).toFixed(2)\n}\n\n// 格式化时间\nconst formatTime = (timeStr) => {\n  if (!timeStr) return '暂无'\n  const date = new Date(timeStr)\n  const year = date.getFullYear()\n  const month = (date.getMonth() + 1).toString()\n  const day = date.getDate().toString()\n  const hour = date.getHours().toString().padStart(2, '0')\n  const minute = date.getMinutes().toString().padStart(2, '0')\n  return `${year}年${month}月${day}日 ${hour}:${minute}`\n}\n\n// 组件挂载时获取数据\nonMounted(() => {\n  getPageData()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.detail-container {\n  background: #f8f8f8;\n  min-height: 100vh;\n  padding: 20rpx;\n}\n\n.status-card {\n  background: #ffffff;\n  border-radius: 16rpx;\n  padding: 40rpx;\n  margin-bottom: 20rpx;\n  display: flex;\n  align-items: center;\n  \n  .status-icon {\n    margin-right: 30rpx;\n    \n    .icon-image {\n      width: 80rpx;\n      height: 80rpx;\n      border-radius: 40rpx;\n    }\n  }\n  \n  .status-info {\n    flex: 1;\n    \n    .status-title {\n      font-size: 28rpx;\n      color: #666666;\n      margin-bottom: 16rpx;\n    }\n    \n    .status-amount {\n      font-size: 48rpx;\n      font-weight: 700;\n      color: #1a1a1a;\n      margin-bottom: 16rpx;\n    }\n    \n    .status-text {\n      font-size: 24rpx;\n      color: #ff4757;\n    }\n  }\n}\n\n.info-list {\n  background: #ffffff;\n  border-radius: 16rpx;\n  padding: 0 40rpx;\n  \n  .info-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 30rpx 0;\n    border-bottom: 1rpx solid #f0f0f0;\n    \n    &:last-child {\n      border-bottom: none;\n    }\n    \n    .info-label {\n      font-size: 28rpx;\n      color: #666666;\n      font-weight: 500;\n    }\n    \n    .info-value {\n      font-size: 28rpx;\n      color: #1a1a1a;\n      text-align: right;\n      max-width: 400rpx;\n      word-break: break-all;\n      \n      &.transfer-bill {\n        font-family: monospace;\n        font-size: 24rpx;\n        color: #007aff;\n      }\n      \n      &.amount {\n        font-weight: 600;\n        color: #1a1a1a;\n      }\n      \n      &.status {\n        color: #ff4757;\n      }\n      \n      &.fail-reason {\n        color: #ff4757;\n        font-size: 24rpx;\n      }\n    }\n  }\n}\n</style>","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/subPackages/balance/record-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["recordData","ref","getPageData","pages","data","_a","uni","error","formatAmount","amountInCents","formatTime","timeStr","date","year","month","day","hour","minute","onMounted","MiniProgramPage"],"mappings":"8HAkFA,MAAMA,EAAaC,EAAG,IAAC,EAAE,EAGnBC,EAAc,IAAM,OACxB,MAAMC,EAAQ,gBAAiB,EAEzBC,GAAOC,EADOF,EAAMA,EAAM,OAAS,CAAC,EACjB,UAAZ,YAAAE,EAAqB,KAElC,GAAID,EACF,GAAI,CACFJ,EAAW,MAAQ,KAAK,MAAM,mBAAmBI,CAAI,CAAC,EACtDE,EAAY,MAAA,MAAA,MAAA,8CAAA,UAAWN,EAAW,KAAK,CACxC,OAAQO,EAAO,CACdD,EAAAA,MAAc,MAAA,QAAA,8CAAA,UAAWC,CAAK,EAC9BD,EAAAA,MAAI,UAAU,CACZ,MAAO,SACP,KAAM,MACd,CAAO,CACF,CAEL,EAGME,EAAgBC,GAChB,CAACA,GAAiBA,IAAkB,EAAU,QAC1CA,EAAgB,KAAK,QAAQ,CAAC,EAIlCC,EAAcC,GAAY,CAC9B,GAAI,CAACA,EAAS,MAAO,KACrB,MAAMC,EAAO,IAAI,KAAKD,CAAO,EACvBE,EAAOD,EAAK,YAAa,EACzBE,GAASF,EAAK,SAAQ,EAAK,GAAG,SAAU,EACxCG,EAAMH,EAAK,QAAO,EAAG,SAAU,EAC/BI,EAAOJ,EAAK,SAAU,EAAC,SAAQ,EAAG,SAAS,EAAG,GAAG,EACjDK,EAASL,EAAK,WAAY,EAAC,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC3D,MAAO,GAAGC,CAAI,IAAIC,CAAK,IAAIC,CAAG,KAAKC,CAAI,IAAIC,CAAM,EACnD,EAGAC,OAAAA,EAAAA,UAAU,IAAM,CACdhB,EAAa,CACf,CAAC,k4BC5HD,GAAG,WAAWiB,CAAe"}