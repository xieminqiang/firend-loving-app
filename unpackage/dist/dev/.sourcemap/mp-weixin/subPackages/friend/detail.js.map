{"version":3,"file":"detail.js","sources":["subPackages/friend/detail.vue","subPackages/friend/detail.vue?type=page"],"sourcesContent":["<template>\n    <scroll-view class=\"personal-data-container\" scroll-y=\"true\" @scroll=\"handleScroll\">\n      <!-- 优化后的头部信息区 -->\n      <view class=\"profile-header-block\">\n        <view class=\"header-row\">\n                      <view class=\"left-group\">\n              <view class=\"avatar-wrap\">\n              <image :src=\"proxy.$imgBaseUrl + user.avatar\" class=\"avatar\" mode=\"aspectFill\" />\n              <view class=\"online-dot\"></view>\n            </view>\n            <view class=\"profile-meta\">\n              <view class=\"nickname-row\">\n                <text class=\"nickname\">{{ user.nickname }}</text>\n                <image v-if=\"user.verified && currentLevel\" :src=\"currentLevel?.icon_url\" class=\"verified-icon\" mode=\"aspectFit\" />\n                <text v-if=\"currentLevel?.level_name\" class=\"level-tag\">{{ currentLevel?.level_name }}</text>\n              </view>\n             <view class=\"user-tags\" v-if=\"user.tags && user.tags.length > 0\">\n                <text v-for=\"tag in user.tags\" :key=\"tag\" class=\"user-tag\">{{ tag }}</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <!-- 轮播图及服务标签 -->\n      <view class=\"carousel-header-wrap\">\n       <view class=\"profile-meta-topbar\">\n          <view class=\"meta-left\">\n            <image :src=\"user.gender === '女' ? '/static/icons/friend/white_nv.png' : '/static/icons/friend/white_nan.png'\" class=\"meta-topbar-icon\" mode=\"aspectFit\" />\n            <text>{{ user.age }}岁 | {{ user.weight }}kg | {{ user.height }}cm</text>\n          </view>\n          <view class=\"meta-right\" v-if=\"user.distance !== ''\">\n            <image src=\"/static/icons/friend/white_dingwei.png\" class=\"meta-topbar-icon\" mode=\"aspectFit\" />\n            <text>{{ user.distance }}</text>\n          </view>\n        </view>\n        <swiper class=\"banner-swiper-inner\" :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"4000\" :duration=\"500\">\n          <swiper-item v-for=\"(item, idx) in banners\" :key=\"idx\">\n            <image \n              :src=\"proxy.$imgBaseUrl + item.img\" \n              class=\"banner-img\" \n              mode=\"aspectFill\"\n              @click=\"previewImage(idx)\"\n            />\n          </swiper-item>\n        </swiper>\n        <!-- 轮播图下方服务标签 -->\n       <view class=\"service-tags-bar\">\n          <view class=\"service-tag-item\">\n            <image src=\"/static/icons/profile/handshake.png\" class=\"service-tag-icon\" mode=\"aspectFit\" />\n            <text>真人面试</text>\n          </view>\n          <view class=\"service-tag-item\">\n            <image src=\"/static/icons/profile/credit-card.png\" class=\"service-tag-icon\" mode=\"aspectFit\" />\n            <text>实名认证</text>\n          </view>\n          <view class=\"service-tag-item\">\n            <image src=\"/static/icons/profile/lse_icon.png\" class=\"service-tag-icon\" mode=\"aspectFit\" />\n            <text>绿色服务</text>\n          </view>\n        </view>\n      </view>\n      <!-- 顶部tab栏和内容区 -->\n     <view class=\"profile-tabs\" :class=\"{ 'sticky-tabs': isTabsSticky }\">\n        <u-tabs\n          :list=\"tabsList\"\n          :current=\"activeTab\"\n          @change=\"handleTabChange\"\n          lineWidth=\"60\"\n          lineHeight=\"2\"\n          :lineColor=\"`linear-gradient(90deg, rgba(115, 99, 255, 1) 0%, rgba(255, 105, 222, 1) 100%)`\"\n          :activeStyle=\"{\n            color: '#7363FF',\n            fontWeight: '500',\n            fontSize: '28rpx'\n          }\"\n          :inactiveStyle=\"{\n            color: '#1A1A1A',\n            fontWeight: '400',\n            fontSize: '28rpx'\n          }\"\n          itemStyle=\"padding: 16rpx 50rpx; height: auto; border-radius: 30rpx;\"\n        ></u-tabs>\n      </view>\n      <view class=\"profile-tab-content\">\n        <!-- 提供项目 -->\n        <view v-show=\"activeTab === 0\">\n          <view v-if=\"services.length > 0\" class=\"service-list\">\n          <view class=\"service-item\" v-for=\"item in services\" :key=\"item.title\">\n            <image  :src=\"proxy.$imgBaseUrl + item.service_image_url\"  class=\"service-img\" mode=\"aspectFill\" />\n            <view class=\"service-info\">\n              <view class=\"service-title-row\">\n                <text class=\"service-title\">{{ item.service_name}}</text>\n              </view>\n              <view class=\"service-tags\">\n                <text v-for=\"tag in item.service_tags\" :key=\"tag\" class=\"service-tag\">{{ tag }}</text>\n              </view>\n              <view class=\"service-bottom-row\">\n                <text class=\"service-price\">{{ item.price }}元/{{ item.unit || '小时' }}起</text>\n                <view class=\"order-btn\" @click=\"goToSubmit(item)\">去下单</view>\n              </view>\n            </view>\n          </view>\n        </view>\n          <view v-else class=\"empty-state-profile\">\n            <image src=\"/static/images/empty.png\" class=\"empty-icon\" mode=\"aspectFit\" />\n            <text class=\"empty-text-profile\">~暂无服务项目~</text>\n          </view>\n        </view>\n        <!-- TA的动态 -->\n        <view v-show=\"activeTab === 1\">\n          <view v-if=\"momentsLoading\" class=\"loading-state\">\n            <text class=\"loading-text\">加载中...</text>\n          </view>\n          <view v-else-if=\"momentsList.length > 0\" class=\"moments-list\">\n            <view v-for=\"(item, index) in momentsList\" :key=\"index\" class=\"moment-item\">\n              <view class=\"moment-left\">\n                <view class=\"moment-day\">{{ item.moments_info?.time_date }}</view>\n                <view class=\"moment-time\">{{ item.moments_info?.time_time }}</view>\n              </view>\n              <view class=\"moment-right\">\n                <!-- 文案 -->\n                <view class=\"copywriting\">\n                  <view>{{ item.moments_info?.content }}</view>\n                  \n                  <!-- 照片 -->\n                  <view>\n                    <PictureDisplay v-if=\"item.moments_info?.file_list\" :list=\"item.moments_info?.file_list\"\n                      :topicList=\"item.moments_info?.topic_list\" @playVideo=\"handlePlayVideo\"></PictureDisplay>\n                  </view>\n                </view>\n                \n                <!-- 底部 -->\n                <view class=\"foot\">\n                  <view class=\"foot-right\">\n                    <!-- 点赞 -->\n                    <view class=\"icon-item\">\n                      <image v-if=\"!item.moments_info?.is_praised\" src=\"@/static/square/love.png\" mode=\"\"\n                        class=\"foot-image\" @tap=\"handlePraise(item)\">\n                      </image>\n                      <image v-if=\"item.moments_info?.is_praised\" src=\"@/static/square/active-love.png\" mode=\"\"\n                        class=\"foot-image\" @tap=\"handlePraise(item)\">\n                      </image>\n                      <view class=\"icon-title\">{{ item.moments_info?.praise_num || 0 }}</view>\n                    </view>\n                    <!-- 评论 -->\n                    <view class=\"icon-item icon-item-center\" @tap=\"toRecord(item)\">\n                      <image src=\"@/static/square/message.png\" mode=\"\" class=\"foot-image\"></image>\n                      <view class=\"icon-title\">{{ item.moments_info?.comments_num || 0 }}</view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view v-else class=\"empty-state-profile\">\n            <image src=\"/static/images/empty.png\" class=\"empty-icon\" mode=\"aspectFit\" />\n            <text class=\"empty-text-profile\">~暂无动态~</text>\n          </view>\n        </view>\n        <!-- 客户评价 -->\n        <view v-show=\"activeTab === 2\">\n          <view v-if=\"commentsLoading\" class=\"loading-state\">\n            <text class=\"loading-text\">加载中...</text>\n          </view>\n          <view v-else-if=\"commentsList.length > 0\" class=\"comments-container\">\n            <view v-for=\"comment in commentsList\" :key=\"comment.id\" class=\"comment-card\">\n              <!-- 用户信息头部 -->\n              <view class=\"comment-header\">\n                <view class=\"user-info\">\n                  <u-avatar \n                    :src=\"comment.is_anonymous ? '' : (proxy.$imgBaseUrl + comment.user_img)\" \n                    size=\"40\"\n                    shape=\"circle\"\n                  />\n                  <view class=\"user-details\">\n                    <text class=\"user-name\">\n                      {{ comment.is_anonymous ? '匿名用户' : comment.user_nickname }}\n                    </text>\n                    <view class=\"rating-section\">\n                      <view class=\"stars\">\n                        <text v-for=\"n in 5\" :key=\"n\" :class=\"['star', { filled: n <= comment.rating }]\">★</text>\n                      </view>\n                     \n                    </view>\n                  </view>\n                </view>\n                <text class=\"comment-date\">{{ formatCommentDate(comment.comment_time) }}</text>\n              </view>\n              \n              \n              <!-- 评论内容 -->\n              <view class=\"comment-content\">{{ comment.comment }}</view>\n              \n              <!-- 评论图片 -->\n              <view v-if=\"comment.comment_images && comment.comment_images.length > 0\" class=\"comment-images\">\n                <view \n                  v-for=\"(image, imgIdx) in comment.comment_images\" \n                  :key=\"imgIdx\" \n                  class=\"comment-image-item\"\n                  @click=\"previewCommentImage(imgIdx, comment.comment_images)\"\n                >\n                  <image :src=\"proxy.$imgBaseUrl + image\" class=\"comment-image\" mode=\"aspectFill\" />\n                </view>\n              </view>\n              \n            </view>\n          </view>\n          <view v-else class=\"empty-state-profile\">\n            <image src=\"/static/images/empty.png\" class=\"empty-icon\" mode=\"aspectFit\" />\n            <text class=\"empty-text-profile\">~暂无评价~</text>\n          </view>\n        </view>\n      </view> \n       <view style=\"height: 50rpx;\"></view>\n    </scroll-view>\n\n    <!-- 视频播放弹框 -->\n    <u-popup :show=\"popupShow\" mode=\"center\" :safeAreaInsetBottom=\"false\">\n      <view class=\"video-popup-content\">\n        <video \n          class=\"video-player\" \n          :src=\"currentVideoPath\" \n          :controls=\"false\" \n          :show-center-play-btn=\"false\"\n          :show-fullscreen-btn=\"false\"\n          :show-progress=\"true\"\n          :enable-progress-gesture=\"true\"\n          autoplay>\n        </video>\n        <!-- 关闭按钮 -->\n        <view class=\"close-btn\" @tap=\"closeVideoPopup\">\n          <image src=\"/static/find/close2.png\" mode=\"widthFix\" class=\"close-icon\"></image>\n        </view>\n      </view>\n    </u-popup>\n  </template>\n  \n  <script setup>\nimport { ref, computed, onMounted, onUnmounted, getCurrentInstance } from 'vue'\nimport { getCityServices } from '@/api/friends.js'\nimport { getMomentsByCompanion, praiseMoment, getCompanionCommentList } from '@/api/discover.js'\nimport { useLevelStore } from '@/stores/level.js'\nimport { useUserStore } from '@/stores/user.js'\nimport PictureDisplay from '@/components/common/PictureDisplay.vue'\n\n  // 获取页面参数\n  const params = ref({})\n\n  // 获取当前实例以访问全局属性\n  const { proxy } = getCurrentInstance()\n\n  // 获取level store\n  const levelStore = useLevelStore()\n  \n  // 用户状态管理\n  const userStore = useUserStore()\n  \n  // 登录状态判断\n  const isLoggedIn = computed(() => {\n    return userStore.userInfo && Object.keys(userStore.userInfo).length > 0\n  })\n  \n  // 用户信息\n  const userInfo = computed(() => {\n    if (isLoggedIn.value) {\n      return userStore.userInfo\n    }\n  })\n  \n  // 导航到登录页面\n  const navigateToLogin = () => {\n    uni.navigateTo({\n      url: '/subPackages/login/index'\n    })\n  }\n\n  const tabs = ['提供项目', 'TA的动态', '客户评价']\n  const activeTab = ref(0)\n  \n  // u-tabs 需要的数据格式\n  const tabsList = computed(() => {\n    return tabs.map(tab => ({\n      name: tab\n    }))\n  })\n  \n  // u-tabs 切换处理函数\n  const handleTabChange = (item) => {\n    // u-tabs 传递的是对象，包含 name, rect, index 等属性\n    let index, newTab\n    \n    if (typeof item === 'object' && item !== null) {\n      // 如果是对象，使用 index 属性\n      index = item.index\n      newTab = item.name\n    } else if (typeof item === 'number') {\n      // 如果是数字，直接使用\n      index = item\n      newTab = tabs[index]\n    } else {\n      console.error('Invalid tab change item:', item)\n      return\n    }\n    \n    // 添加边界检查\n    if (index < 0 || index >= tabs.length) {\n      console.error('Invalid tab index:', index)\n      return\n    }\n    \n    if (!newTab) {\n      console.error('Tab not found for index:', index, 'item:', item)\n      return\n    }\n    \n    console.log('Tab changed to:', newTab, 'index:', index)\n    activeTab.value = index\n  }\n  \n  function switchTab(idx) {\n    activeTab.value = idx\n  }\n\nconst user = ref({})\nconst banners = ref([])\nconst services = ref([])\nconst momentsList = ref([])\nconst momentsLoading = ref(false)\nconst commentsList = ref([])\nconst commentsLoading = ref(false)\n\n// 视频播放弹框相关状态\nconst popupShow = ref(false)\nconst currentVideoPath = ref('')\n\n// 吸顶相关状态\nconst isTabsSticky = ref(false)\n\n  // 计算当前等级信息\n  const currentLevel = computed(() => {\n    if (!user.value.level_order || !levelStore.sortedServiceLevels.length) {\n      return null\n    }\n    return levelStore.sortedServiceLevels.find(level => level.level_order === user.value.level_order)\n  })\n\n  // 获取友伴师评论列表\n  const getCommentsData = async () => {\n    if (!params.value.id) return\n    \n    try {\n      commentsLoading.value = true\n      const requestParams = {\n        companion_id: parseInt(params.value.id),\n        page: 1,\n         rating: 5,\n        page_size: 20\n      }\n      \n      const response = await getCompanionCommentList(requestParams)\n      console.log('评论列表响应:', response)\n      \n      if (response.data && response.data.code === 0) {\n        const data = response.data.data\n        if (data && data.list) {\n          commentsList.value = data.list\n          console.log('评论列表数据:', commentsList.value)\n        }\n      } else {\n        console.error('获取评论列表失败:', response.data?.message || '未知错误')\n      }\n    } catch (error) {\n      console.error('获取评论列表异常:', error)\n    } finally {\n      commentsLoading.value = false\n    }\n  }\n\n  // 跳转到提交订单页面\n  // 传递参数说明：\n  // service_id: 服务项目ID\n  // price_template_id: 价格模板ID\n  // application_id: 友伴师ID\n  // level_order: 友伴师等级序号\n  // nickname: 友伴师昵称\n  const goToSubmit = (item) => {\n    // 检查登录状态\n    if (!isLoggedIn.value) {\n      uni.showToast({\n        title: '请先登录',\n        icon: 'none',\n        duration: 2000\n      })\n      navigateToLogin()\n      return\n    }\n    \n    uni.navigateTo({\n      url: `/subPackages/order/submit?service_id=${item.service_id}&price_template_id=${item.price_template_id || ''}&companion_id=${params.value.id}&level_order=${user.value.level_order || ''}&nickname=${user.value.nickname}`\n    })\n  }\n\n  // 获取城市服务信息\nconst getCityServicesData = async () => {\n  try {\n    const requestParams = {\n      city_code: params.value.city_code,\n      application_id: params.value.id\n    }\n    \n    // 添加经纬度参数\n    if (params.value.latitude && params.value.longitude) {\n      requestParams.latitude = parseFloat(params.value.latitude)\n      requestParams.longitude = parseFloat(params.value.longitude)\n    }\n    \n    const response = await getCityServices(requestParams)\n      \n      console.log('城市服务信息响应:', response)\n       getHeaderBgHeight() \n      if (response.data && response.data.code === 0) {\n        // 处理返回的数据\n        const data = response.data.data\n        console.log('城市服务数据:', data)\n        \n        // 更新用户信息\n        if (data) {\n                  user.value = {\n          avatar: data.avatar,\n          nickname: data.nickname || '未知用户',\n          verified: true,\n       \n          age: data.age ,\n          weight: data.weight ,\n          height: data.height,\n          distance: data.distance ,\n          tags: data.tags || [], // 添加用户标签\n          level_order: data.level_order, // 添加等级序号\n          levelIcon: '', // 先设为空，通过computed获取\n          gender: data.gender || '' // 添加性别字段\n        }\n          \n          // 更新轮播图数据\n          if (data.photos && data.photos.length > 0) {\n            banners.value = data.photos.map(photo => ({\n              img: photo\n            }))\n          }\n          \n          // 更新服务列表数据\n          if (data.services && data.services.length > 0) {\n            services.value = data.services\n          }\n       \n\n        }\n      } else {\n        console.error('获取城市服务失败:', response.data?.message || '未知错误')\n      }\n    } catch (error) {\n      console.error('获取城市服务异常:', error)\n    }\n  }\n\n  // 获取友伴师动态列表\n  const getMomentsData = async () => {\n    if (!params.value.id) return\n    \n    try {\n      momentsLoading.value = true\n      const requestParams = {\n        companion_id: parseInt(params.value.id),\n        page: 1,\n        page_size: 50\n      }\n      \n      const response = await getMomentsByCompanion(requestParams)\n      console.log('动态列表响应:', response)\n      \n      if (response.data && response.data.code === 0) {\n        const data = response.data.data\n        if (data && data.moments_list) {\n          momentsList.value = data.moments_list\n          console.log('动态列表数据:', momentsList.value)\n        }\n      } else {\n        console.error('获取动态列表失败:', response.data?.message || '未知错误')\n      }\n    } catch (error) {\n      console.error('获取动态列表异常:', error)\n    } finally {\n      momentsLoading.value = false\n    }\n  }\n\n  // 预览图片\n  const previewImage = (index) => {\n    uni.previewImage({\n      urls: banners.value.map(item => proxy.$imgBaseUrl + item.img),\n      current: proxy.$imgBaseUrl + banners.value[index].img,\n      indicator: 'number',\n      loop: true,\n      show: true,\n      success: function(res) {\n        console.log('图片预览成功', res);\n      },\n      fail: function(err) {\n        console.error('图片预览失败', err);\n      }\n    });\n  };\n\n  // 预览动态图片\n  const previewMomentImage = (index, fileList) => {\n    const imageUrls = fileList\n      .filter(file => !file.is_video)\n      .map(file => file.path);\n    \n    if (imageUrls.length > 0) {\n      uni.previewImage({\n        urls: imageUrls,\n        current: imageUrls[index],\n        indicator: 'number',\n        loop: true,\n        show: true,\n        success: function(res) {\n          console.log('动态图片预览成功', res);\n        },\n        fail: function(err) {\n          console.error('动态图片预览失败', err);\n        }\n      });\n    }\n  };\n\n  // 处理视频播放\n  const handlePlayVideo = (videoPath) => { \n    console.log('播放视频:', videoPath)\n    currentVideoPath.value = videoPath\n    popupShow.value = true\n  }\n\n  // 关闭视频弹框\n  const closeVideoPopup = () => {\n    popupShow.value = false\n    currentVideoPath.value = ''\n  }\n\n  // 点赞处理\n  const handlePraise = async (val) => {\n    try {\n      // 先更新本地状态，提供即时反馈\n      const wasPraised = val.moments_info.is_praised\n      val.moments_info.is_praised = !wasPraised\n      \n      if (val.moments_info.is_praised) {\n        val.moments_info.praise_num = parseInt(val.moments_info.praise_num) + 1\n      } else {\n        val.moments_info.praise_num = Math.max(0, parseInt(val.moments_info.praise_num) - 1)\n      }\n      \n      // 调用API接口\n      const response = await praiseMoment({\n        target_id: val.moments_info.moments_id\n      })\n      \n      if (response.data && response.data.code === 0) {\n        // API调用成功，本地状态已经更新\n        console.log('点赞成功')\n      } else {\n        // API调用失败，回滚本地状态\n        val.moments_info.is_praised = wasPraised\n        if (wasPraised) {\n          val.moments_info.praise_num = parseInt(val.moments_info.praise_num) + 1\n        } else {\n          val.moments_info.praise_num = Math.max(0, parseInt(val.moments_info.praise_num) - 1)\n        }\n        \n        uni.showToast({\n          title: '点赞失败，请重试',\n          icon: 'none'\n        })\n      }\n    } catch (error) {\n      console.error('点赞失败:', error)\n      // 发生错误，回滚本地状态\n      const wasPraised = val.moments_info.is_praised\n      val.moments_info.is_praised = !wasPraised\n      if (wasPraised) {\n        val.moments_info.praise_num = parseInt(val.moments_info.praise_num) + 1\n      } else {\n        val.moments_info.praise_num = Math.max(0, parseInt(val.moments_info.praise_num) - 1)\n      }\n      \n      uni.showToast({\n        title: '网络错误，请重试',\n        icon: 'none'\n      })\n    }\n  }\n\n  // 去评论\n  const toRecord = (item) => {\n    uni.navigateTo({\n      url: '/subPackages/record/comment',\n      success(res) {\n        // 通过eventChannel向被打开页面传送数据\n        res.eventChannel.emit('getRecord', {\n          data: item\n        })\n      }\n    })\n  }\n\n  // 格式化评论日期\n  const formatCommentDate = (dateString) => {\n    if (!dateString) return ''\n    const date = new Date(dateString)\n    const now = new Date()\n    const diffTime = now - date\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24))\n    \n    if (diffDays === 0) {\n      return '今天'\n    } else if (diffDays === 1) {\n      return '昨天'\n    } else if (diffDays < 7) {\n      return `${diffDays}天前`\n    } else {\n      return dateString.split(' ')[0] // 返回日期部分\n    }\n  }\n\n  // 预览评论图片\n  const previewCommentImage = (index, images) => {\n    const imageUrls = images.map(img => proxy.$imgBaseUrl + img)\n    uni.previewImage({\n      urls: imageUrls,\n      current: index,\n      indicator: 'number',\n      loop: true,\n      show: true,\n      success: function(res) {\n        console.log('评论图片预览成功', res);\n      },\n      fail: function(err) {\n        console.error('评论图片预览失败', err);\n      }\n    });\n  }\n\n  // 滚动监听处理\n  const handleScroll = (e) => {\n    const scrollTop = e.detail.scrollTop\n\n    \tif (scrollTop >= headerBgHeight.value ) {\n\t isTabsSticky.value = true;\n\t} else {\n\t\t isTabsSticky.value= false;\n\t}\n  }\n\nconst headerBgHeight = ref(0)\n\tconst getHeaderBgHeight = () => {\n\t\tuni.createSelectorQuery()\n\t\t\t.select('.profile-tabs') // 选择器\n\t\t\t.boundingClientRect(rect => {\n\t\t\t\tif (rect) {\n\t\t\t\t\theaderBgHeight.value = rect.top\n\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\t.exec()\n\t}\n\n  onMounted(async () => {\n  // 确保服务等级列表已加载\n  await levelStore.fetchServiceLevels()\n  \n  // 获取页面参数\n  const pages = getCurrentPages()\n  const currentPage = pages[pages.length - 1]\n  params.value = currentPage.options || {}\n  \n  console.log('页面参数:', params.value)\n  console.log('经纬度参数:', {\n    latitude: params.value.latitude,\n    longitude: params.value.longitude\n  })\n  \n  // 调用城市服务接口\n  if (params.value.id && params.value.city_code) {\n    getCityServicesData()\n  }\n  \n  // 调用动态列表接口\n  if (params.value.id) {\n    getMomentsData()\n  }\n  \n  // 调用评论列表接口\n  if (params.value.id) {\n    getCommentsData()\n  }\n  \n  // 不需要延迟获取位置，使用固定值更可靠\n})\n\nonUnmounted(() => {\n  // 清理工作\n})\n  </script>\n  \n  <style scoped>\n  .personal-data-container {\n    background: #fff;\n    height: 100vh;\n    font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;\n  }\n  .profile-header-block {\n    margin-top: 0;\n\n    border-radius: 0 0 32rpx 32rpx;\n    box-shadow: 0 4rpx 24rpx rgba(115,99,255,0.06);\n    padding: 0rpx 0rpx 24rpx 20rpx;\n    margin-bottom: 0;\n    position: relative;\n    z-index: 11;\n  }\n  .header-row {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n  .left-group {\n    display: flex;\n    align-items: flex-start;\n    flex: 1;\n    min-width: 0;\n    padding-right: 20rpx; /* 为胶囊按钮留出空间 */\n  }\n\n  .avatar-wrap {\n    position: relative;\n    margin-right: 18rpx;\n  }\n  .avatar {\n    width: 72rpx;\n    height: 72rpx;\n    border-radius: 50%;\n \n    object-fit: cover;\n\n  }\n  .online-dot {\n    position: absolute;\n    right: 6rpx;\n    bottom: 6rpx;\n    width: 16rpx;\n    height: 16rpx;\n    background: #19c37c;\n    border: 2rpx solid #fff;\n    border-radius: 50%;\n  }\n  .profile-meta {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    min-width: 0;\n    flex: 1;\n  }\n  .nickname-row {\n    display: flex;\n    align-items: center;\n    gap: 10rpx;\n  }\n  .nickname {\n    font-size: 26rpx;\n    font-weight: 600;\n    color: #222;\n    margin-right: 4rpx;\n    max-width: 200rpx;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .verified-icon {\n    width:40rpx;\n    height: 40rpx;\n   \n  }\n  .level-tag {\n    background: linear-gradient(90deg, #7363FF 0%, #FF69DE 100%);\n    color: #fff;\n    border-radius: 8rpx;\n    padding: 2rpx 10rpx;\n    font-size: 18rpx;\n  }\n  \n  .user-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8rpx;\n    margin-top: 8rpx;\n    max-width: 100%;\n    word-break: break-all;\n    margin-right: 20rpx;\n  }\n  \n  .user-tag {\n    font-size: 18rpx;\n    color: #7363FF;\n    background: rgba(115, 99, 255, 0.1);\n    padding: 4rpx 10rpx;\n    border-radius: 12rpx;\n    border: 1rpx solid rgba(115, 99, 255, 0.2);\n    white-space: nowrap;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .carousel-header-wrap {\n    position: relative;\n    width: 100%;\n  }\n  .banner-swiper-inner {\n    width: 100%;\n    height: 420rpx;\n    overflow: hidden;\n  }\n  .banner-img {\n    width: 100%;\n    height: 420rpx;\n    object-fit: cover;\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  }\n  \n  .banner-img:active {\n    transform: scale(0.98);\n  }\n  .profile-meta-topbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 12;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 24rpx;\n    height: 56rpx;\n    background: rgba(0,0,0,0.38);\n    color: #fff;\n    font-size: 26rpx;\n    font-weight: 500;\n    box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.10);\n    backdrop-filter: blur(8rpx);\n  }\n  .meta-left, .meta-right {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n    font-size: 24rpx;\n  }\n  .meta-topbar-icon {\n    width: 28rpx;\n    height: 28rpx;\n  }\n  .service-tags-bar {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 9;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    background: rgba(0,0,0,0.38);\n    padding: 18rpx 0 12rpx 0;\n    backdrop-filter: blur(8rpx);\n  }\n  .service-tag-item {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n    color: #fff;\n    font-size: 24rpx;\n    font-weight: 500;\n  }\n  .service-tag-icon {\n    width: 32rpx;\n    height: 32rpx;\n  }\n  .service-section {\n    margin-top: 24rpx;\n    padding: 0 24rpx;\n  }\n  .service-tabs {\n    display: flex;\n    border-bottom: 2rpx solid #f0f0f0;\n    margin-bottom: 18rpx;\n  }\n  .tab {\n    font-size: 28rpx;\n    color: #888;\n    margin-right: 32rpx;\n    padding-bottom: 12rpx;\n  }\n  .tab.active {\n    color: #7363FF;\n    border-bottom: 4rpx solid #7363FF;\n    font-weight: 600;\n  }\n  .service-list {\n    display: flex;\n    flex-direction: column;\n    gap: 20rpx;\n  }\n  .service-item {\n    display: flex;\n   \n    align-items: center;\n  }\n  .service-img {\n    width: 120rpx;\n    height: 120rpx;\n    border-radius: 12rpx;\n    object-fit: cover;\n    margin-right: 18rpx;\n  }\n  .service-info {\n    flex: 1;\n  }\n  .service-title-row {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 8rpx;\n  }\n  .service-title {\n    font-size: 24rpx;\n color: #1a1a1a;\n    font-weight: 500;\n  }\n  .service-hot {\n    font-size: 20rpx;\n    color: #ff4757;\n    margin-left: 12rpx;\n  }\n  .service-tags {\n    display: flex;\n    gap: 12rpx;\n    margin-bottom: 8rpx;\n  }\n  .service-tag {\n    font-size: 18rpx;\n    color: #1a1a1a;\n    padding: 2rpx 12rpx;\n    border-radius: 16rpx;\n    font-weight: 600;\n    border: 1rpx solid rgba(108, 117, 125, 0.12);\n\n  }\n\n  .service-bottom-row {\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n  }\n  .service-price {\n    font-size: 24rpx;\n    color: #ff4757;\n    font-weight: 600;\n  }\n  .order-btn {\n    padding: 12rpx 36rpx;\n    background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n    color: #fff;\n    font-weight: 600;\n    font-size: 26rpx;\n    border-radius: 9999rpx;\n    box-shadow: 0 4rpx 12rpx rgba(115,99,255,0.18);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-width: 160rpx;\n    min-height: 56rpx;\n    border: none;\n    margin-left: 18rpx;\n    transition: background 0.2s;\n  }\n  .order-btn:active {\n    opacity: 0.85;\n  }\n  .profile-tabs {\n    margin: 12rpx 32rpx 8rpx;\n    position: relative;\n    z-index: 2;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n   \n  }\n  \n  .profile-tabs.sticky-tabs {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 100;\n    margin: 0;\n    padding: 12rpx 32rpx 8rpx;\n    background: #fff;\n  \n  }\n  .profile-tab-content {\n    min-height: 320rpx;\n    background: #fff;\n    border-radius: 24rpx;\n    margin: 30rpx 24rpx 24rpx 24rpx;\n    box-sizing: border-box;\n    \n  }\n  .empty-state-profile {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 120rpx 60rpx;\n    text-align: center;\n  }\n\n\n  .empty-icon {\n  width: 200rpx;\n  height: 200rpx;\n  margin-bottom: 32rpx;\n  opacity: 0.6;\n}\n  .empty-text-profile {\n    font-size: 28rpx;\n    color: #9999;\n    font-weight: 600;\n    margin-bottom: 16rpx;\n  }\n  /* 评论容器 */\n  .comments-container {\n    padding: 0rpx;\n  }\n  \n  .comment-card {\n    background: #fff;\n    border-radius: 24rpx;\n    margin-bottom: 20rpx;\n    padding: 28rpx;\n    border: 1rpx solid rgba(115, 99, 255, 0.08);\n  }\n  \n  /* 评论头部 */\n  .comment-header {\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    margin-bottom: 16rpx;\n  }\n  \n  .user-info {\n    display: flex;\n    align-items: flex-start;\n    flex: 1;\n  }\n  \n  .comment-avatar {\n    margin-right: 18rpx;\n    flex-shrink: 0;\n  }\n  \n  .user-details {\n    flex: 1;\n    min-width: 0;\n    margin-left: 20rpx;\n  }\n  \n  .user-name {\n    font-size: 28rpx;\n    color: #222;\n    font-weight: 600;\n\n    display: block;\n  }\n  \n  .rating-section {\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n  }\n  \n  .stars {\n    display: flex;\n    align-items: center;\n  }\n  \n  .star {\n    font-size: 26rpx;\n    color: #e0e0e0;\n    margin-right: 2rpx;\n  }\n  \n  .star.filled {\n    color: #FFB400;\n  }\n  \n  .rating-text {\n    font-size: 22rpx;\n    color: #7363FF;\n    font-weight: 500;\n  }\n  \n  .comment-date {\n    font-size: 22rpx;\n    color: #999;\n    flex-shrink: 0;\n    margin-left: 16rpx;\n  }\n  \n  \n  /* 评论内容 */\n  .comment-content {\n    font-size: 26rpx;\n    color: #333;\n    line-height: 1.6;\n    margin-bottom: 16rpx;\n  }\n  \n  /* 评论图片 */\n  .comment-images {\n    display: flex;\n    gap: 12rpx;\n    margin-bottom: 16rpx;\n    flex-wrap: wrap;\n  }\n  \n  .comment-image-item {\n    width: 120rpx;\n    height: 120rpx;\n    border-radius: 12rpx;\n    overflow: hidden;\n    box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n  }\n  \n  .comment-image {\n    width: 100%;\n    height: 100%;\n  }\n  \n  .bottom-fixed-btn {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 99;\n    background: #fff;\n    box-shadow: 0 -2rpx 12rpx rgba(115,99,255,0.06);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 24rpx 0 env(safe-area-inset-bottom, 24rpx) 0;\n  }\n\n  /* 动态列表样式 */\n  .loading-state {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 60rpx 0;\n  }\n  .loading-text {\n    font-size: 28rpx;\n    color: #999;\n  }\n  .moments-list {\n    padding: 0 24rpx;\n  }\n  .moment-item {\n    display: flex;\n    padding: 20rpx 0 20rpx 0rpx;\n    border-bottom: 1rpx solid #f0f0f0;\n  }\n  .moment-item:last-child {\n    border-bottom: none;\n  }\n  .moment-left {\n    display: flex;\n    flex-direction: column;\n    margin-right: 24rpx;\n    min-width: 120rpx;\n  }\n  .moment-day {\n    font-size: 32rpx;\n    font-weight: 400;\n    color: #b3b3b3;\n    margin-bottom: 4rpx;\n  }\n  .moment-time {\n    font-size: 20rpx;\n    font-weight: 300;\n    color: #b3b3b3;\n  }\n  .moment-right {\n    flex: 1;\n    min-width: 0;\n  }\n  .copywriting {\n    padding-left: 0;\n    padding-top: 20rpx;\n    padding-right: 20rpx;\n    font-size: 24rpx;\n    color: rgba(26, 26, 26, 1);\n    box-sizing: border-box;\n    overflow: hidden;\n  }\n  .foot {\n    margin-top: 20rpx;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    margin-left: 0;\n  }\n  .foot-image {\n    width: 44rpx;\n    height: 44rpx;\n  }\n  .foot-right {\n    display: flex;\n  }\n  .icon-item {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .icon-title {\n    margin-left: 12rpx;\n    font-size: 20rpx;\n    font-weight: 500;\n    color: rgba(153, 153, 153, 1);\n  }\n  .icon-item-center {\n    margin-left: 50rpx;\n    margin-right: 20rpx;\n  }\n\n  /* 视频播放弹框样式 */\n  .video-popup-content {\n    width: 100vw;\n    background: transparent;\n    padding: 0;\n    margin: 0;\n  }\n  \n  .video-player {\n    width: 100vw;\n    height: 100vh;\n    background: transparent;\n    border: none;\n    outline: none;\n    display: block;\n  }\n\n  .close-btn {\n    position: absolute;\n    bottom: 40rpx;\n    left: 50%;\n    transform: translateX(-50%);\n    z-index: 1000;\n    width: 80rpx;\n    height: 80rpx;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: rgba(255, 255, 255, 1);\n    border-radius: 50%;\n  }\n\n  .close-icon {\n    width: 40rpx;\n    height: 40rpx;\n  }\n\n  /* 确保u-popup没有默认样式 */\n  :deep(.u-popup__content) {\n    background-color: transparent !important;\n    padding: 0 !important;\n    margin: 0 !important;\n    border: none !important;\n  }\n\n  /* 确保视频元素没有默认样式 */\n  :deep(video) {\n    background-color: transparent !important;\n    border: none !important;\n    outline: none !important;\n    vertical-align: top !important;\n  }\n  </style> ","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/subPackages/friend/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["PictureDisplay","params","ref","proxy","getCurrentInstance","levelStore","useLevelStore","userStore","useUserStore","isLoggedIn","computed","navigateToLogin","uni","tabs","activeTab","tabsList","tab","handleTabChange","item","index","newTab","user","banners","services","momentsList","momentsLoading","commentsList","commentsLoading","popupShow","currentVideoPath","isTabsSticky","currentLevel","level","getCommentsData","requestParams","response","getCompanionCommentList","data","_a","error","goToSubmit","getCityServicesData","getCityServices","getHeaderBgHeight","photo","getMomentsData","getMomentsByCompanion","previewImage","res","err","handlePlayVideo","videoPath","closeVideoPopup","handlePraise","val","wasPraised","praiseMoment","toRecord","formatCommentDate","dateString","date","diffTime","diffDays","previewCommentImage","images","imageUrls","img","handleScroll","e","headerBgHeight","rect","onMounted","pages","currentPage","onUnmounted","MiniProgramPage"],"mappings":"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"}