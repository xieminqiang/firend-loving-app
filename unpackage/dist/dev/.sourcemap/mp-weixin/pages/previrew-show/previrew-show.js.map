{"version":3,"file":"previrew-show.js","sources":["pages/previrew-show/previrew-show.vue","pages/previrew-show/previrew-show.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"previrew-show\">\n\t\t<!-- 自定义导航栏 -->\n\t\t<view class=\"previrew-show-nav\" >\n\t\t\t<view class=\"nav-content\">\n\t\t\t\t<view class=\"nav-left\" @click=\"backsquare\">\n\t\t\t\t\t<image class=\"nav-icon\" src=\"~@/static/find/back.png\" mode=\"\"></image>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"nav-center\">\n\t\t\t\t\t<text class=\"nav-title\">{{ currentNum + 1 }}/{{ showList.length }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"nav-right\">\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<view class=\"swiper-bxo\" @tap=\"handleTopHeight\">\n\t\t\t<swiper class=\"swiper\" :current=\"currentNum\" @change=\"swiperChange\" @touchstart=\"handleTouchStart\"\n\t\t\t\t@touchend=\"handleTouchEnd\" @transition=\"handleTransition\">\n\t\t\t\t<swiper-item v-for=\"(item, index) in showList\" :key=\"item.path\">\n\t\t\t\t\t<movable-area class=\"movable-area\" scale-area>\n\t\t\t\t\t\t<movable-view class=\"movable-view\" direction=\"all\" :inertia=\"true\" damping=\"100\" scale=\"true\"\n\t\t\t\t\t\t\tscale-min=\"1\" scale-max=\"4\" :scale-value=\"scale\">\n\t\t\t\t\t\t\t<scroll-view scroll-y=\"true\" class=\"uni-scroll-view\">\n\t\t\t\t\t\t\t\t<view class=\"scroll-view\">\n\t\t\t\t\t\t\t\t\t<image :key=\"index\" class=\"scroll-view-image\" :src=\"$imgBaseUrl + item.path\" mode=\"widthFix\"\n\t\t\t\t\t\t\t\t\t\t@longpress=\"onLongpress(item)\" />\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</scroll-view>\n\t\t\t\t\t\t</movable-view>\n\t\t\t\t\t</movable-area>\n\t\t\t\t</swiper-item>\n\t\t\t</swiper>\n\t\t</view>\n\t</view>\n\n\t<!-- 分享 -->\n\t<!-- <share-cpn :show=\"showShare\" :shareData=\"showShareData\" @changeShowShare=\"handleShowShare\"></share-cpn> -->\n\n\t<!-- 保存 -->\n\t<u-popup :show=\"saveShow\" mode=\"bottom\">\n\t\t<view class=\"my-shwo-cal\" @tap=\"handleSave\">\n\t\t\t保存到相册\n\t\t</view>\n\t\t<view class=\"my-shwo-cal\" @tap=\"saveShow\n\t\t = false\">\n\t\t\t取消\n\t\t</view>\n\t</u-popup>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tgetCurrentInstance,\n\t} from 'vue'\n\timport {\n\t\tonLoad,\n\t} from '@dcloudio/uni-app'\n\n\tconst showList = ref([])\n\n\tconst currentNum = ref(0)\n\n\tconst scale = ref(1)\n\n\tconst isVideo = ref(false)\n\n\tconst isZooming = ref(false)\n\t\n\tconst topHeight = ref(200)\n\t\n\tconst isTopHeight = ref(false)\n\t\n\t// 保存图片的路径\n\tconst saveFilePath = ref('')\n\n\t// 分享\n\t// const showShare = ref(false)\n\n\t// 保存\n\tconst saveShow = ref(false)\n\n\t// $instance => this\n\tconst $instance = ref(getCurrentInstance().proxy)\n\n\tonLoad(() => {\n\t\tconst eventChannel = $instance.value.getOpenerEventChannel();\n\t\teventChannel.on('previrewList', function(data) {\n\t\t\tshowList.value = data.urls\n\t\t\tcurrentNum.value = data.urls.findIndex(item => item.path === data.url);\n\t\t})\n\t})\n\n\t//图片改变\n\tconst swiperChange = (e) => {\n\t\tcurrentNum.value = e.detail.current;\n\t}\n\n\tconst handleTouchStart = () => {\n\t\tisZooming.value = true;\n\t}\n\n\tconst handleTouchEnd = () => {\n\t\tisZooming.value = false;\n\t}\n\n\tconst handleTransition = () => {\n\t\tisVideo.value = false\n\t}\n\n\t//监听长按\n\tconst onLongpress = (e) => {\n\t\tsaveShow.value = true\n\t\tsaveFilePath.value = e.path\n\t}\n\n\t// 保存到相册\n\tconst handleSave = () => {\n\t\tuni.saveImageToPhotosAlbum({\n\t\t\tfilePath: saveFilePath.value,\n\t\t\tsuccess: function() {\n\t\t\t\tsaveShow.value = false\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '保存成功~'\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t}\n\t\n\t// 点击图片\n\tconst handleTopHeight = () => {\n\t\tif(isTopHeight.value) {\n\t\t\ttopHeight.value = -200\n\t\t\tisTopHeight.value = !isTopHeight.value\n\t\t} else {\n\t\t\ttopHeight.value = 0\n\t\t\tisTopHeight.value = !isTopHeight.value\n\t\t}\n\t}\n\n\tconst backsquare = () => {\n\t\tuni.navigateBack({\n\t\t\tdelta: 1\n\t\t})\n\t}\n\n\t// 分享\n\t// const handleShare = () => {\n\t// \tshowShare.value = true\n\t// }\n\n\t// const handleShowShare = (val) => {\n\t// \tshowShare.value = val\n\t// }\n</script>\n\n<style lang=\"scss\" scoped>\n\t.previrew-show {\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tbackground-color: rgba(0, 0, 0, 1);\n\t\tposition: relative;\n\n\t\t\t.previrew-show-nav {\n\t\ttransition-duration: 500ms;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 80rpx;\n\t\tright: 0;\n\t\tz-index: 1000;\n\n\t\t.nav-content {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t\tpadding: 20rpx 24rpx;\n\t\t\tbackground-color: rgba(0, 0, 0, 0.8);\n\t\t\tbackdrop-filter: blur(10rpx);\n\t\t\t-webkit-backdrop-filter: blur(10rpx);\n\t\t}\n\n\t\t.nav-left {\n\t\t\twidth: 200rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t}\n\n\t\t.nav-center {\n\t\t\tflex: 1;\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t.nav-title {\n\t\t\tfont-size: 28rpx;\n\t\t\tfont-weight: 500;\n\t\t\tcolor: rgba(255, 255, 255, 1);\n\t\t}\n\n\t\t.nav-right {\n\t\t\twidth: 200rpx;\n\t\t\ttext-align: right;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t}\n\n\t\t.nav-icon {\n\t\t\twidth: 48rpx;\n\t\t\theight: 48rpx;\n\t\t}\n\t}\n\n\t\t.swiper-bxo {\n\t\t\t// width: 100%;\n\t\t\t// height: 100%;\n\t\t\tposition: fixed;\n\t\t\ttop: 180rpx;\n\t\t\tbottom: 180rpx;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\n\t\t\t.swiper {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\n\t\t\t\tswiper-item {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\n\t\t\t\t\t.movable-area {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\n\t\t\t\t\t\t.movable-view {\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 100%;\n\n\t\t\t\t\t\t\t.scroll-view {\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\t\tposition: relative;\n\n\t\t\t\t\t\t\t\t.scroll-view-play {\n\t\t\t\t\t\t\t\t\tz-index: 9999;\n\t\t\t\t\t\t\t\t\twidth: 50rpx;\n\t\t\t\t\t\t\t\t\theight: 50rpx;\n\t\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\t\ttop: 50%;\n\t\t\t\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t.scroll-view-image {\n\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t.scroll-view-video {\n\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t\theight: 90%;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.trends-image-four {\n\t\t\t\t\tposition: relative;\n\n\t\t\t\t\t.trends-image-one-play {\n\t\t\t\t\t\tz-index: 9999;\n\t\t\t\t\t\twidth: 50rpx;\n\t\t\t\t\t\theight: 50rpx;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 50%;\n\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\t.my-shwo-cal {\n\t\tmargin: 0 24rpx 24rpx;\n\t\theight: 100rpx;\n\t\tline-height: 100rpx;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t\t// color: #7363FF;\n\t\ttext-align: center;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 20rpx;\n\n\t\t&:active {\n\t\t\tcolor: #7363FF;\n\t\t\tbackground-color: #f2f2f2;\n\t\t}\n\t}\n\n\t:deep(.u-popup__content) {\n\t\tbackground-color: transparent;\n\t}\n\n\tF:deep(.u-swiper) {\n\t\tbackground-color: rgba(0, 0, 0, 1) !important;\n\t}\n</style>","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/previrew-show/previrew-show.vue'\nwx.createPage(MiniProgramPage)"],"names":["showList","ref","currentNum","scale","isVideo","isZooming","topHeight","isTopHeight","saveFilePath","saveShow","$instance","getCurrentInstance","onLoad","data","item","swiperChange","e","handleTouchStart","handleTouchEnd","handleTransition","onLongpress","handleSave","uni","handleTopHeight","backsquare","MiniProgramPage"],"mappings":"8PA6DC,MAAMA,EAAWC,EAAG,IAAC,EAAE,EAEjBC,EAAaD,EAAG,IAAC,CAAC,EAElBE,EAAQF,EAAG,IAAC,CAAC,EAEbG,EAAUH,EAAG,IAAC,EAAK,EAEnBI,EAAYJ,EAAG,IAAC,EAAK,EAErBK,EAAYL,EAAG,IAAC,GAAG,EAEnBM,EAAcN,EAAG,IAAC,EAAK,EAGvBO,EAAeP,EAAG,IAAC,EAAE,EAMrBQ,EAAWR,EAAG,IAAC,EAAK,EAGpBS,EAAYT,EAAAA,IAAIU,EAAkB,mBAAA,EAAG,KAAK,EAEhDC,EAAAA,OAAO,IAAM,CACSF,EAAU,MAAM,sBAAqB,EAC7C,GAAG,eAAgB,SAASG,EAAM,CAC9Cb,EAAS,MAAQa,EAAK,KACtBX,EAAW,MAAQW,EAAK,KAAK,UAAUC,GAAQA,EAAK,OAASD,EAAK,GAAG,CACxE,CAAG,CACH,CAAE,EAGD,MAAME,EAAgBC,GAAM,CAC3Bd,EAAW,MAAQc,EAAE,OAAO,OAC5B,EAEKC,EAAmB,IAAM,CAC9BZ,EAAU,MAAQ,EAClB,EAEKa,EAAiB,IAAM,CAC5Bb,EAAU,MAAQ,EAClB,EAEKc,EAAmB,IAAM,CAC9Bf,EAAQ,MAAQ,EAChB,EAGKgB,EAAeJ,GAAM,CAC1BP,EAAS,MAAQ,GACjBD,EAAa,MAAQQ,EAAE,IACvB,EAGKK,EAAa,IAAM,CACxBC,EAAAA,MAAI,uBAAuB,CAC1B,SAAUd,EAAa,MACvB,QAAS,UAAW,CACnBC,EAAS,MAAQ,GACjBa,EAAAA,MAAI,UAAU,CACb,KAAM,OACN,MAAO,OACZ,CAAK,CACD,CACJ,CAAG,CACD,EAGKC,EAAkB,IAAM,CAC1BhB,EAAY,OACdD,EAAU,MAAQ,KAClBC,EAAY,MAAQ,CAACA,EAAY,QAEjCD,EAAU,MAAQ,EAClBC,EAAY,MAAQ,CAACA,EAAY,MAElC,EAEKiB,EAAa,IAAM,CACxBF,EAAAA,MAAI,aAAa,CAChB,MAAO,CACV,CAAG,CACD,6VClJF,GAAG,WAAWG,CAAe"}