{"version":3,"file":"profile.js","sources":["pages/tabbar/home/components/profile.vue","/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/tabbar/home/components/profile.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"profile-container\">\n    <!-- 可滚动内容区域 -->\n    <scroll-view \n      class=\"scroll-container\" \n      scroll-y=\"true\"\n      refresher-enabled=\"true\"\n      :refresher-triggered=\"isRefreshing\"\n      @refresherrefresh=\"onRefresh\"\n      @refresherrestore=\"onRefreshRestore\"\n    >\n\n      <!-- 顶部个人信息区 -->\n      <view class=\"profile-header\" :style=\"{ paddingTop: statusBarHeight + 'px' }\" >\n          <!-- 已登录状态 -->\n          <view v-if=\"isLoggedIn\" class=\"user-profile\" @click=\"navigateToUserDetail\">\n            <view class=\"avatar-container\">\n              <view class=\"avatar-circle\">\n                <image v-if=\"userInfo.head_img\" :src=\"$imgBaseUrl + userInfo.head_img\" class=\"avatar-img\" mode=\"aspectFill\" />\n                <text v-else class=\"avatar-placeholder\">{{ userInfo.nickname || '' }}</text>\n                <view class=\"avatar-border\"></view>\n              </view>\n              <view class=\"online-indicator\"></view>\n            </view>\n            <view class=\"user-details\">\n              <view class=\"name-row\">\n                <view class=\"user-name\">{{ userInfo.nick_name|| '' }}</view>\n            \n              </view>\n              <view class=\"user-phone\">{{ formatPhone(userInfo.phone) || '未绑定手机号' }}</view>\n              \n            </view>\n          </view>\n\n          <!-- 未登录状态 -->\n          <view v-else class=\"login-prompt\">\n            <view class=\"prompt-content\">\n              \n              <!-- 文字内容 -->\n              <view class=\"prompt-text\">\n                <!-- <view class=\"welcome-title\">Hi~ 欢迎来到随伴行</view> -->\n                <view class=\"welcome-subtitle\">登录后解锁更多精彩功能</view>\n              </view>\n              \n                            <!-- 功能亮点 -->\n              <view class=\"quick-benefits\">\n                <view class=\"benefit-item\">\n                  <image src=\"@/static/icons/profile/heart.png\" class=\"benefit-icon\" mode=\"aspectFit\" />\n                  <text class=\"benefit-text\">兴趣匹配</text>\n                </view>\n                <view class=\"benefit-item\">\n                  <image src=\"@/static/icons/profile/clock.png\" class=\"benefit-icon\" mode=\"aspectFit\" />\n                  <text class=\"benefit-text\">快速预约</text>\n                </view>\n                <view class=\"benefit-item\">\n                  <image src=\"@/static/icons/profile/shield.png\" class=\"benefit-icon\" mode=\"aspectFit\" />\n                  <text class=\"benefit-text\">安全保障</text>\n                </view>\n              </view>\n              \n              <!-- 登录按钮 -->\n              <view class=\"login-btn\" @click=\"navigateToLogin\">\n                <view class=\"btn-shine\"></view>\n                <text class=\"login-btn-text\">立即登录</text>\n      \n              </view>\n            </view>\n          </view>\n        </view>\n      <!-- 页面内容 -->\n      <view class=\"profile-content\">\n      \n        <!-- 订单管理 -->\n        <view class=\"section-container\">\n          <view class=\"section-header\">\n            <text class=\"section-title\">订单管理</text>\n            <view class=\"view-all\" @click=\"navigateToOrders('all')\">\n              <text class=\"view-all-text\">查看全部</text>\n              <image src=\"@/static/icons/common/arrow-right.png\" class=\"view-all-arrow\" mode=\"aspectFit\" />\n            </view>\n          </view>\n          <view class=\"orders-grid\">\n            <view class=\"order-item\" @click=\"navigateToOrders('pending_payment')\">\n              <view class=\"order-icon\">\n                <image src=\"@/static/icons/profile/dai_order.png\" class=\"order-icon-img\" mode=\"aspectFit\" />\n                <text v-if=\"orderCounts.pending > 0\" class=\"order-badge\">{{ orderCounts.pending }}</text>\n              </view>\n              <text class=\"order-text\">待付款</text>\n            </view>\n            <view class=\"order-item\" @click=\"navigateToOrders('pending_service')\">\n              <view class=\"order-icon\">\n                <image src=\"@/static/icons/profile/daifuwu.png\" class=\"order-icon-img\" mode=\"aspectFit\" />\n                <text v-if=\"orderCounts.pending_service > 0\" class=\"order-badge\">{{ orderCounts.pending_service }}</text>\n              </view>\n              <text class=\"order-text\">待服务</text>\n            </view>\n            <view class=\"order-item\" @click=\"navigateToOrders('in_service')\">\n              <view class=\"order-icon\">\n                <image src=\"@/static/icons/profile/fwzh.png\" class=\"order-icon-img\" mode=\"aspectFit\" />\n                <text v-if=\"orderCounts.inProgress > 0\" class=\"order-badge\">{{ orderCounts.inProgress }}</text>\n              </view>\n              <text class=\"order-text\">进行中</text>\n            </view>\n            <view class=\"order-item\" @click=\"navigateToOrders('completed')\">\n              <view class=\"order-icon\">\n                <image src=\"@/static/icons/profile/yiwancheng.png\" class=\"order-icon-img\" mode=\"aspectFit\" />\n              </view>\n              <text class=\"order-text\">已完成</text>\n            </view>\n            <view class=\"order-item\" @click=\"navigateToRefund\">\n              <view class=\"order-icon\">\n                <image src=\"@/static/icons/profile/tk_order.png\" class=\"order-icon-img\" mode=\"aspectFit\" />\n              </view>\n              <text class=\"order-text\">退款售后</text>\n            </view>\n          </view>\n        </view>\n        \n        <!-- 推广中心 -->\n <!--       <view class=\"promotion-banner\" @click=\"navigateToPromotion\">\n          <view class=\"promotion-content\">\n            <view class=\"promotion-info\">\n              <text class=\"promotion-title\">邀请好友 得奖励</text>\n              <text class=\"promotion-desc\">每邀请1位新用户可获得<text class=\"highlight\">30元</text>奖励</text>\n            </view>\n            <view class=\"promotion-btn\">\n              <image src=\"@/static/icons/profile/share.png\" class=\"promotion-icon\" mode=\"aspectFit\" />\n              <text class=\"promotion-btn-text\">立即邀请</text>\n            </view>\n          </view>\n        </view> -->\n        \n\n        \n        <!-- 设置列表 -->\n        <view class=\"settings-list\">\n         <view class=\"setting-item\" @click=\"navigateToPartnerRegistration\" v-if=\"userStore.switch === 1 && isLoggedIn\">\n            <view class=\"setting-icon\">\n              <image src=\"@/static/icons/profile/friendship.png\" class=\"setting-icon-img\" mode=\"aspectFit\" />\n            </view> \n     \n            <text class=\"setting-text\" v-if=\"applicationInfo && applicationInfo.status === 'approved'\">友伴端</text>\n            <text class=\"setting-text\" v-else>友伴入驻</text>\n            <image src=\"@/static/icons/common/arrow-right.png\" class=\"setting-arrow\" mode=\"aspectFit\" />\n      \n          </view>\n          <view class=\"setting-item\" @click=\"navigateToCustomerService\">\n            <view class=\"setting-icon\">\n              <image src=\"@/static/icons/profile/kefu.png\" class=\"setting-icon-img\" mode=\"aspectFit\" />\n            </view>\n            <text class=\"setting-text\">联系客服</text>\n            <image src=\"@/static/icons/common/arrow-right.png\" class=\"setting-arrow\" mode=\"aspectFit\" />\n            <!-- #ifdef MP-WEIXIN -->\n            <button open-type=\"contact\" class=\"kf_btn\" @tap.stop></button>\n            <!-- #endif -->\n          </view>\n          <view class=\"setting-item\" @click=\"navigateToSystemSettings\">\n            <view class=\"setting-icon\">\n              <image src=\"@/static/icons/profile/settings.png\" class=\"setting-icon-img\" mode=\"aspectFit\" />\n            </view>\n            <text class=\"setting-text\">系统设置</text>\n            <image src=\"@/static/icons/common/arrow-right.png\" class=\"setting-arrow\" mode=\"aspectFit\" />\n          </view>\n        </view>\n        \n        <view class=\"app-version\" v-if=\"currVersion !== ''\">\n          随伴行 v{{ currVersion }}\n        </view>\n      </view>\n    </scroll-view>  \n\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted,  computed } from 'vue'\n\nimport {\n\tonShow,\n\tonLoad\n} from '@dcloudio/uni-app';\n\nimport { getUserInfo, getApplicatioInfo } from '@/api/user.js'\nimport { getOrderCount } from '@/api/order.js'\nimport { useUserStore } from '@/stores/user.js'\n// 用户状态管理\nconst userStore = useUserStore()\nconst currVersion = ref('')\n// 状态栏高度适配\nconst statusBarHeight = ref(0)\n\n// 下拉刷新状态\nconst isRefreshing = ref(false)\n\n// 申请信息状态\nconst applicationInfo = ref(null)\nconst applicationStatus = ref('')\n\n// 登录状态判断\nconst isLoggedIn = computed(() => {\n  return userStore.userInfo && Object.keys(userStore.userInfo).length > 0\n})\n\n// 用户信息\nconst userInfo = computed(() => {\n  if (isLoggedIn.value) {\n    return userStore.userInfo\n  }\n\n})\n\n// 数据状态\nconst orderCounts = ref({\n  pending: 0,\n  inProgress: 0\n})\n\n// 监听登录成功事件\nconst handleLoginSuccess = (data) => {\n  console.log('收到登录成功事件:', data)\n  // 重新加载用户数据\n  loadUserData()\n  // 获取订单数量\n  loadOrderCount()\n}\n\n// 监听退出登录事件\nconst handleLogoutSuccess = () => {\n  console.log('收到退出登录事件')\n  // 清除本地数据，状态会自动更新\n  orderCounts.value = {\n    pending: 0,\n    inProgress: 0\n  }\n  // 清除申请信息\n  applicationInfo.value = null\n  applicationStatus.value = ''\n}\n\n// 监听申请状态变化事件\nconst handleApplicationStatusChanged = (data) => {\n  console.log('收到申请状态变化事件:', data)\n  // 刷新申请信息\n  loadApplicationInfo()\n  \n  // 显示刷新成功提示\n  // uni.showToast({\n  //   title: '申请信息已更新',\n  //   icon: 'success',\n  //   duration: 2000\n  // })\n}\n\nonMounted(() => {\n  // 获取系统信息\n  const systemInfo = uni.getSystemInfoSync()\n  statusBarHeight.value = systemInfo.statusBarHeight || 0\n  \n\n\n  statusBarHeight.value = systemInfo.statusBarHeight || 0 \n  const accountInfo = uni.getAccountInfoSync();  \n  currVersion.value = accountInfo.miniProgram.version\n\n  // 初始化用户数据\n  loadUserData()\n  \n  // 监听登录成功事件\n  uni.$on('loginSuccess', handleLoginSuccess)\n  \n  // 监听退出登录事件\n  uni.$on('logoutSuccess', handleLogoutSuccess)\n  \n  // 监听申请状态变化事件\n  uni.$on('applicationStatusChanged', handleApplicationStatusChanged)\n})\n\nonShow(() => {\n  // 页面显示时，如果已登录则获取订单数量\n  if (isLoggedIn.value) {\n    loadOrderCount()\n  }\n})\n\nonUnmounted(() => {\n  // 移除事件监听\n  uni.$off('loginSuccess', handleLoginSuccess)\n  uni.$off('logoutSuccess', handleLogoutSuccess)\n  uni.$off('applicationStatusChanged', handleApplicationStatusChanged)\n})\n\n// 加载用户数据\nconst loadUserData = async () => {\n  console.log('开始加载用户数据 - isLoggedIn:', isLoggedIn.value)\n  console.log('当前用户状态:', userStore.userInfo)\n  \n  // 只有登录状态下才请求用户信息\n  if (isLoggedIn.value) {\n    try {\n      console.log('用户已登录，开始请求用户信息')\n      const response = await getUserInfo()\n      console.log('用户信息请求成功:', response)\n      \n      // 判断请求是否成功\n      if (response.data && response.data.code === 0) {\n        const userData = response.data.data\n        console.log('解析用户数据:', userData)\n        \n   const userInfo = {\n     ...userData,\n     access_token: userStore.userInfo.access_token || '',\n     refresh_token: userStore.userInfo.refresh_token || '',\n    \n   }\n   \n   // 更新用户状态\n    userStore.setUserInfo(userInfo)\n        \n     \n     \n     \n      } else {\n        console.warn('获取用户信息失败:', response.data?.msg || '未知错误')\n      }\n    } catch (error) {\n      console.error('获取用户信息失败:', error)\n    }\n\n    // 加载申请信息\n    await loadApplicationInfo()\n    // 加载订单数量\n    await loadOrderCount()\n  } else {\n    console.log('用户未登录，跳过获取用户信息')\n  }\n}\n\n// 加载申请信息\nconst loadApplicationInfo = async () => {\n  try {\n    console.log('开始请求申请信息')\n    const response = await getApplicatioInfo()\n    console.log('申请信息请求成功:', response)\n    \n    if (response.data && response.data.code === 0) {\n      applicationInfo.value = response.data.data\n    \n    } \n  } catch (error) {\n    \n  }\n}\n\n// 加载订单数量统计\nconst loadOrderCount = async () => {\n  try {\n    console.log('开始请求订单数量统计')\n    const response = await getOrderCount()\n    console.log('订单数量统计请求成功:', response)\n    \n    if (response.data && response.data.code === 0) {\n      const data = response.data.data\n      console.log('待服务订单数:', data.pending_service_count)\n      console.log('待付款订单数:', data.pending_payment_count)\n      console.log('进行中订单数:', data.in_service_count)\n      \n      // 更新订单数量\n      orderCounts.value = {\n        pending: data.pending_payment_count || 0,\n        pending_service: data.pending_service_count || 0,\n        inProgress: data.in_service_count || 0\n      }\n    }\n  } catch (error) {\n    console.error('获取订单数量失败:', error)\n  }\n}\n\n// 导航到登录页面\nconst navigateToLogin = () => {\n  uni.navigateTo({\n    url: '/subPackages/login/index'\n  })\n}\n\n\n\n// 导航方法\n// const navigateToUserDetail = () => {\n//   uni.navigateTo({\n//     url: '/subPackages/login/index'\n//   })\n// }\n\n\tconst navigateToUserDetail = () => {\n\t\tif (!isLoggedIn.value) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '请先登录后再设置头像',\n\t\t\t\tconfirmText: '去登录',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: '/subPackages/login/index'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\tuni.navigateTo({\n\t\t\turl: '/subPackages/settings/pages/index/edit'\n\t\t})\n\t}\n\nconst navigateToOrders = (status) => {\n  console.log('跳转到订单页面，状态:', status)\n  const encodedStatus = encodeURIComponent(status)\n  uni.navigateTo({\n    url: `/subPackages/order/index?status=${encodedStatus}`\n  })\n}\n\nconst navigateToPromotion = () => {\n  uni.navigateTo({\n    url: '/subPackages/profile/promotion/index'\n  })\n}\nconst navigateToRefund = () => {\n  uni.navigateTo({\n    url: '/subPackages/order/refund'\n  })\n}\nconst navigateToPartnerRegistration = () => {\n  // 根据申请状态跳转到不同页面\n  if (applicationInfo.value && applicationInfo.value.status === 'approved') {\n    // 已通过，跳转到友伴端\n    uni.navigateTo({\n      url: '/subPackages/fpart/index'\n    })\n  } else {\n    // 其他状态，跳转到友伴入驻申请页面\n    uni.navigateTo({\n      url: '/subPackages/py/apply/index'\n    })\n  }\n}\n\n\n\nconst navigateToCustomerService = () => {\n  uni.navigateTo({\n    url: '/subPackages/profile/customer-service/index'\n  })\n}\n\nconst navigateToSystemSettings = () => {\n  uni.navigateTo({\n    url: '/subPackages/settings/pages/index/index'\n  })\n}\n\n\n\n// 下拉刷新处理\nconst onRefresh = async () => {\n  console.log('开始下拉刷新')\n  isRefreshing.value = true\n  \n  try {\n    await loadUserData()\n    \n    // 模拟加载时间，确保用户能看到刷新动画\n    await new Promise(resolve => setTimeout(resolve, 800))\n    \n   \n  } catch (error) {\n    console.error('刷新失败:', error)\n    uni.showToast({\n      title: '刷新失败',\n      icon: 'none',\n      duration: 1500\n    })\n  } finally {\n    isRefreshing.value = false\n  }\n}\n\nconst onRefreshRestore = () => {\n  console.log('刷新动画结束')\n  isRefreshing.value = false\n}\n\n// 格式化手机号\nconst formatPhone = (phone) => {\n  if (!phone) return '未绑定手机号'\n  return phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2')\n}\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.profile-container {\n  height: 100vh;\n  background-color: #F7F8FA;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 顶部个人信息区 - 保留品牌渐变 */\n.profile-header {\n  padding: 30rpx 0 30rpx;\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  color: #FFFFFF;\n  border-radius: 0 0 40rpx 40rpx;\n  box-shadow: 0 8rpx 32rpx rgba(115, 99, 255, 0.15);\n  flex-shrink: 0;\n  position: relative;\n  overflow: hidden;\n}\n\n/* 已登录状态样式 */\n.user-profile {\n  display: flex;\n  align-items: center;\n  padding: 0 32rpx;\n}\n\n.user-details {\n  flex: 1;\n  margin-right: 16rpx;\n}\n\n.name-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8rpx;\n}\n\n.user-name {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #FFFFFF;\n  text-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.1);\n  line-height: 1.3;\n  flex: 1;\n}\n\n.user-phone {\n  font-size: 26rpx;\n  color: rgba(255, 255, 255, 0.8);\n  margin-bottom: 16rpx;\n  font-weight: 400;\n  line-height: 1.4;\n}\n\n/* .user-auth removed */\n\n/* 未登录状态样式 */\n.login-prompt {\n  position: relative;\n  z-index: 10;\n  min-height: 260rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 32rpx;\n}\n\n\n\n.prompt-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  position: relative;\n  z-index: 5;\n  width: 100%;\n}\n\n.prompt-avatar {\n  position: relative;\n  margin-bottom: 24rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.avatar-placeholder-large {\n  width: 120rpx;\n  height: 120rpx;\n  background: rgba(255, 255, 255, 0.18);\n  border: 2rpx solid rgba(255, 255, 255, 0.25);\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.12);\n  backdrop-filter: blur(15rpx);\n  overflow: hidden;\n  position: relative;\n  z-index: 2;\n}\n\n.avatar-text {\n  font-size: 56rpx;\n  opacity: 0.9;\n  filter: drop-shadow(0 2rpx 4rpx rgba(0, 0, 0, 0.1));\n}\n\n.avatar-glow {\n  position: absolute;\n  top: -12rpx;\n  left: -12rpx;\n  right: -12rpx;\n  bottom: -12rpx;\n  background: radial-gradient(circle, rgba(255, 255, 255, 0.25) 0%, transparent 70%);\n  border-radius: 50%;\n  animation: pulse-glow 2.5s ease-in-out infinite;\n  z-index: 1;\n}\n\n.prompt-text {\n  margin-bottom: 32rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.welcome-title {\n  font-size: 36rpx;\n  font-weight: 700;\n  margin-bottom: 12rpx;\n  color: #FFFFFF;\n  letter-spacing: 1.5rpx;\n  text-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n  line-height: 1.3;\n}\n\n.welcome-subtitle {\n  font-size: 28rpx;\n  color: rgba(255, 255, 255, 0.85);\n  line-height: 1.5;\n  font-weight: 500;\n  max-width: 400rpx;\n}\n\n.quick-benefits {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 32rpx;\n  gap: 60rpx;\n  flex-wrap: wrap;\n}\n\n.benefit-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 80rpx;\n}\n\n.benefit-icon {\n  width: 40rpx;\n  height: 40rpx;\n  filter: brightness(0) saturate(100%) invert(100%);\n  opacity: 0.9;\n  transition: all 0.3s ease;\n  margin-bottom: 10rpx;\n}\n\n.benefit-text {\n  font-size: 24rpx;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 500;\n  white-space: nowrap;\n}\n\n.login-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.25);\n  border: 1rpx solid rgba(255, 255, 255, 0.35);\n  border-radius:999rpx;\n  padding: 10rpx 28rpx;\n\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n\n  position: relative;\n  overflow: hidden;\n}\n\n.btn-shine {\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, \n    transparent, \n    rgba(255, 255, 255, 0.15), \n    transparent\n  );\n  animation: shine 1.5s ease-in-out infinite;\n  z-index: 10;\n}\n\n.login-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, \n    transparent, \n    rgba(255, 255, 255, 0.15), \n    transparent\n  );\n  transition: left 0.6s ease;\n}\n\n.login-btn:active {\n  transform: scale(0.96);\n  background: rgba(255, 255, 255, 0.35);\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.18);\n}\n\n.login-btn:active::before {\n  left: 100%;\n}\n\n.login-btn-text {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: #FFFFFF;\n \n}\n\n.login-arrow {\n  width: 34rpx;\n  height: 34rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.15);\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n  backdrop-filter: blur(10rpx);\n  margin-left: 12rpx;\n  padding: 4rpx;\n\n}\n\n.user-profile:active .profile-arrow {\n  background: rgba(255, 255, 255, 0.25);\n  transform: scale(0.9);\n}\n\n.arrow-icon {\n  width: 18rpx;\n  height: 18rpx;\n  filter: brightness(0) saturate(100%) invert(100%);\n  opacity: 0.8;\n}\n\n\n\n@keyframes pulse-glow {\n  0%, 100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.7;\n    transform: scale(1.08);\n  }\n}\n\n@keyframes glow-pulse {\n  0%, 100% {\n    opacity: 0.5;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.9;\n    transform: scale(1.1);\n  }\n}\n\n@keyframes shine {\n  0% {\n    left: -100%;\n  }\n  50% {\n    left: 100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n\n.avatar-container {\n  position: relative;\n  margin-right: 32rpx;\n}\n\n.avatar-circle {\n  width: 140rpx;\n  height: 140rpx;\n  background: rgba(255, 255, 255, 0.15);\n  border: 3rpx solid rgba(255, 255, 255, 0.3);\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 64rpx;\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n  position: relative;\n  transition: all 0.3s ease;\n}\n\n.user-profile:active .avatar-circle {\n  transform: scale(0.95);\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.2);\n}\n\n.avatar-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.avatar-placeholder {\n  color: #FFFFFF;\n  font-weight: 600;\n  font-size: 48rpx;\n  text-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.2);\n}\n\n.avatar-border {\n  position: absolute;\n  top: -3rpx;\n  left: -3rpx;\n  right: -3rpx;\n  bottom: -3rpx;\n  border: 2rpx solid transparent;\n  border-radius: 50%;\n  background: linear-gradient(45deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.4));\n  background-clip: border-box;\n  animation: border-glow 3s ease-in-out infinite;\n}\n\n.online-indicator {\n  position: absolute;\n  bottom: 8rpx;\n  right: 8rpx;\n  width: 28rpx;\n  height: 28rpx;\n  background: #4CAF50;\n  border: 3rpx solid white;\n  border-radius: 50%;\n  box-shadow: 0 2rpx 8rpx rgba(76, 175, 80, 0.4);\n  animation: online-pulse 2s ease-in-out infinite;\n}\n\n.location-icon {\n  margin-right: 4rpx;\n  font-size: 22rpx;\n}\n\n.auth-tag {\n  display: flex;\n  align-items: center;\n  padding: 4rpx 8rpx;\n  border-radius: 12rpx;\n  background: rgba(255, 255, 255, 0.15);\n  font-size: 22rpx;\n  transition: all 0.3s ease;\n}\n\n.auth-tag.auth-verified {\n  background: rgba(76, 175, 80, 0.2);\n  color: #4CAF50;\n  text-shadow: 0 1rpx 2rpx rgba(0, 0, 0, 0.1);\n}\n\n.level-progress {\n  display: flex;\n  align-items: center;\n}\n\n.level-bar {\n  position: relative;\n  width: 120rpx;\n  height: 6rpx;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 3rpx;\n  margin-right: 12rpx;\n  overflow: hidden;\n}\n\n.level-progress-inner {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 3rpx;\n}\n\n.level-glow {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.6));\n  animation: glow-pulse 2s ease-in-out infinite;\n  z-index: 1;\n}\n\n.level-text {\n  font-size: 24rpx;\n}\n\n.profile-arrow {\n  width: 40rpx;\n  height: 40rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.15);\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n  backdrop-filter: blur(10rpx);\n  margin-left: 12rpx;\n}\n\n.user-profile:active .profile-arrow {\n  background: rgba(255, 255, 255, 0.25);\n  transform: scale(0.9);\n}\n\n.arrow-icon {\n  width: 18rpx;\n  height: 18rpx;\n  filter: brightness(0) saturate(100%) invert(100%);\n  opacity: 0.8;\n}\n\n/* 可滚动内容区域 */\n.scroll-container {\n  width: 100%;\n  height: 100%;\n}\n\n/* 页面内容 */\n.profile-content {\n  padding: 32rpx;\n  padding-bottom: 80rpx;\n}\n\n\n\n\n\n/* 通用区块样式 - 简化设计 */\n.section-container {\n  background: #FFFFFF;\n\n  padding: 20rpx;\n  border-radius: 20rpx;\n  margin-bottom: 20rpx;\n\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24rpx;\n}\n\n.section-title {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #1A1A1A;\n}\n\n.view-all {\n  display: flex;\n  align-items: center;\n  font-size: 24rpx;\n  color: #666666;\n  padding: 4rpx 10rpx;\n  border-radius: 12rpx;\n  background: #f8f9fa;\n  transition: all 0.2s;\n  \n  &:active {\n    transform: scale(0.96);\n    background: #e9ecef;\n  }\n}\n\n.view-all-text {\n  margin-right: 6rpx;\n}\n\n.view-all-arrow {\n  width: 18rpx;\n  height: 18rpx;\n \n}\n\n/* 订单管理 - 简化设计 */\n.orders-grid {\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  gap: 0 12rpx;\n}\n\n.order-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16rpx 0;\n  transition: all 0.2s;\n \n}\n\n.order-item:active {\n  transform: scale(0.96);\n}\n\n.order-icon {\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 12rpx;\n  transition: all 0.2s;\n}\n\n.order-icon-img {\n  width: 58rpx;\n  height: 58rpx;\n\n\n}\n\n.order-badge {\n  position: absolute;\n  top: -8rpx;\n  right: -8rpx;\n  background: linear-gradient(135deg, #ff4757 0%, #ff3742 100%);\n  color: #FFFFFF;\n  font-size: 20rpx;\n  font-weight: 600;\n  border-radius: 50%;\n  min-width: 28rpx;\n  height: 28rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  z-index: 10;\n\n}\n\n.order-text {\n  font-size: 24rpx;\n  color: #666666;\n  font-weight: 400;\n}\n\n/* 推广中心 */\n.promotion-banner {\n  background: linear-gradient(135deg, #7363FF 0%, #FF69DE 100%);\n  border-radius: 16rpx;\n  padding: 32rpx;\n  margin-bottom: 24rpx;\n  box-shadow: 0 8rpx 24rpx rgba(115, 99, 255, 0.15);\n  position: relative;\n  overflow: hidden;\n}\n\n.promotion-banner::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);\n  z-index: 1;\n}\n\n.promotion-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 2;\n}\n\n.promotion-info {\n  flex: 1;\n}\n\n.promotion-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #FFFFFF;\n  margin-bottom: 8rpx;\n  text-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.1);\n}\n\n.promotion-desc {\n  font-size: 24rpx;\n  color: rgba(255, 255, 255, 0.9);\n  line-height: 1.4;\n}\n\n.highlight {\n  color: #FFD700;\n  font-weight: 600;\n  text-shadow: 0 1rpx 2rpx rgba(0, 0, 0, 0.2);\n}\n\n.promotion-btn {\n  display: flex;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.2);\n  border: 1rpx solid rgba(255, 255, 255, 0.3);\n  border-radius: 24rpx;\n  padding: 12rpx 20rpx;\n  backdrop-filter: blur(10rpx);\n  transition: all 0.3s ease;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n}\n\n.promotion-banner:active .promotion-btn {\n  transform: scale(0.95);\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.promotion-icon {\n  width: 24rpx;\n  height: 24rpx;\n  filter: brightness(0) saturate(100%) invert(100%);\n  margin-right: 8rpx;\n}\n\n.promotion-btn-text {\n  font-size: 24rpx;\n  color: #FFFFFF;\n  font-weight: 500;\n}\n\n\n\n/* 设置列表 */\n.settings-list {\n  background: #FFFFFF;\n\n  border-radius: 20rpx;\n  margin-bottom: 20rpx;\n\n  overflow: hidden;\n}\n\n.setting-item {\n  display: flex;\n  align-items: center;\n  padding: 28rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n  transition: all 0.2s;\n  position: relative;\n}\n\n.setting-item:last-child {\n  border-bottom: none;\n}\n\n.setting-item:active {\n  background: #f8f9fa;\n\n}\n\n.setting-icon {\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-right: 16rpx;\n  transition: all 0.2s;\n}\n\n.setting-item:active .setting-icon {\n  background: #e9ecef;\n}\n\n.setting-icon-img {\n  width: 36rpx;\n  height: 36rpx;\n\n}\n\n.setting-text {\n  flex: 1;\n  font-size: 28rpx;\n  color: #1A1A1A;\n  font-weight: 400;\n}\n\n.setting-arrow {\n  width: 32rpx;\n  height:  32rpx;\n\n}\n\n/* 微信客服透明覆盖按钮 */\n.kf_btn {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  background: transparent !important;\n  opacity: 0;\n  border: none;\n  z-index: 5;\n}\n.kf_btn::after {\n  border: none;\n}\n\n/* 应用版本 */\n.app-version {\n  text-align: center;\n  font-size: 24rpx;\n  color: #999999;\n  padding: 40rpx 0;\n  background: transparent;\n}\n\n/* 动画效果 */\n@keyframes border-glow {\n  0%, 100% {\n    opacity: 0.5;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n\n@keyframes online-pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n}\n\n@keyframes badge-pulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes badge-glow {\n  0% {\n    opacity: 0.3;\n  }\n  100% {\n    opacity: 0.6;\n  }\n}\n</style> ","import Component from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/tabbar/home/components/profile.vue'\nwx.createComponent(Component)"],"names":["userStore","useUserStore","currVersion","ref","statusBarHeight","isRefreshing","applicationInfo","applicationStatus","isLoggedIn","computed","userInfo","orderCounts","handleLoginSuccess","data","uni","loadUserData","loadOrderCount","handleLogoutSuccess","handleApplicationStatusChanged","loadApplicationInfo","onMounted","systemInfo","accountInfo","onShow","onUnmounted","response","getUserInfo","userData","_a","error","getApplicatioInfo","getOrderCount","navigateToLogin","navigateToUserDetail","res","navigateToOrders","status","encodedStatus","navigateToRefund","navigateToPartnerRegistration","navigateToCustomerService","navigateToSystemSettings","onRefresh","resolve","onRefreshRestore","formatPhone","phone","Component"],"mappings":"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"}