{"version":3,"file":"index.js","sources":["pages/tabbar/home/index.vue","pages/tabbar/home/index.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"home-container\">\n\t\t<!-- 使用v-show避免组件重新创建，保持数据状态 -->\n\t\t<view v-show=\"currentTab === 'home'\" class=\"home-tab-content\">\n\t\t\t<!-- 引入真正的home组件，使用懒加载 -->\n\t\t\t<HomeComponent v-if=\"visitedTabs.has('home')\" />\n\t\t</view>\n   \n\t\t<view v-show=\"currentTab === 'friends'\" class=\"friends-tab-content\">\n\t\t\t<!-- 引入友伴组件，使用懒加载 -->\n\t\t\t<FriendsComponent v-if=\"visitedTabs.has('friends')\" />\n\t\t</view>\n\n\t\t<view v-show=\"currentTab === 'discover'\" class=\"discover-tab-content\">\n\t\t\t<!-- 引入发现组件，使用懒加载 -->\n\t\t\t<DiscoverComponent \n\t\t\t\tv-if=\"visitedTabs.has('discover')\" \n\t\t\t\tref=\"discoverComponentRef\"\n\t\t\t/>\n\t\t</view>\n                \n\t\t<view v-show=\"currentTab === 'profile'\" class=\"profile-tab-content\">\n\t\t\t<!-- 引入个人中心组件，使用懒加载 -->\n\t\t\t<ProfileComponent v-if=\"visitedTabs.has('profile')\" />\n\t\t</view>\n\n\t\t<!-- 底部Tabbar -->\n\t\t<hm-tabbar \n\t\t\t:currentTab=\"currentTab\" \n\t\t\t@tabChange=\"handleTabChange\"\n\t\t/>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, nextTick} from 'vue'\nimport hmTabbar from '@/components/hm-tabbar/hm-tabbar.vue'\nimport HomeComponent from './components/home.vue'\nimport FriendsComponent from './components/friends.vue'\nimport DiscoverComponent from './components/discover.vue'\nimport ProfileComponent from './components/profile.vue'\n\n// 当前选中的tab\nconst currentTab = ref('home')\n\n// 记录已访问过的tab，用于懒加载\nconst visitedTabs = reactive(new Set(['home']))\n\n// 组件引用\nconst discoverComponentRef = ref(null)\n\n\n// 处理tab切换\nconst handleTabChange = async (tabName) => {\n\t// 记录访问过的tab\n\tvisitedTabs.add(tabName)\n\t\n\t// 切换tab\n\tcurrentTab.value = tabName\n\t\n\tconsole.log(`切换到 ${tabName} tab，已访问的tab:`, Array.from(visitedTabs))\n\tconsole.log('当前tab状态:', {\n\t\tcurrentTab: currentTab.value,\n\t\tvisitedTabs: Array.from(visitedTabs),\n\t\tdiscoverVisited: visitedTabs.has('discover')\n\t})\n\t\n\t// 如果切换到discover tab，调用子组件的显示方法\n\tif (tabName === 'discover' && discoverComponentRef.value) {\n\t\t// 等待DOM更新\n\t\tawait nextTick()\n\t\t// 调用子组件的显示方法\n\t\tdiscoverComponentRef.value.showComponent()\n\t}\n}\n\n\n// 页面挂载时初始化\nonMounted(() => {\n\tconsole.log('页面挂载完成，当前tab:', currentTab.value)\n\tconsole.log('已访问的tab:', Array.from(visitedTabs))\n})\n\n// 页面显示时（从其他页面返回时）\n\n\n// 暴露一些方法供外部使用（可选）\nconst refreshCurrentTab = () => {\n\tconsole.log('手动刷新当前tab:', currentTab.value)\n\t// 这里可以触发当前tab的数据刷新\n}\n\nconst getVisitedTabs = () => {\n\treturn Array.from(visitedTabs)\n}\n\ndefineExpose({\n\trefreshCurrentTab,\n\tgetVisitedTabs,\n\tcurrentTab,\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.home-container {\n\theight: 100vh;\n\n}\n\n// 为不同tab内容添加不同的样式\n.home-tab-content {\n\t/* home组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n.friends-tab-content {\n\t/* friends组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n.discover-tab-content {\n\t/* discover组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n.profile-tab-content {\n\t/* profile组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n@keyframes fadeIn {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translateY(20rpx);\n\t}\n\tto {\n\t\topacity: 1;\n\t\ttransform: translateY(0);\n\t}\n}\n\n</style> ","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/tabbar/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["hmTabbar","HomeComponent","FriendsComponent","DiscoverComponent","ProfileComponent","currentTab","ref","visitedTabs","reactive","discoverComponentRef","handleTabChange","tabName","uni","nextTick","onMounted","__expose","MiniProgramPage"],"mappings":"8EAoCA,MAAMA,EAAW,IAAW,6CACtBC,EAAgB,IAAW,uBAC3BC,EAAmB,IAAW,0BAC9BC,EAAoB,IAAW,2BAC/BC,EAAmB,IAAW,gEAGpC,MAAMC,EAAaC,EAAG,IAAC,MAAM,EAGvBC,EAAcC,EAAAA,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,EAGxCC,EAAuBH,EAAG,IAAC,IAAI,EAI/BI,EAAkB,MAAOC,GAAY,CAE1CJ,EAAY,IAAII,CAAO,EAGvBN,EAAW,MAAQM,EAEnBC,EAAAA,MAAA,MAAA,MAAA,oCAAY,OAAOD,CAAO,gBAAiB,MAAM,KAAKJ,CAAW,CAAC,EAClEK,EAAAA,MAAY,MAAA,MAAA,oCAAA,WAAY,CACvB,WAAYP,EAAW,MACvB,YAAa,MAAM,KAAKE,CAAW,EACnC,gBAAiBA,EAAY,IAAI,UAAU,CAC7C,CAAE,EAGGI,IAAY,YAAcF,EAAqB,QAElD,MAAMI,aAAU,EAEhBJ,EAAqB,MAAM,cAAe,EAE5C,EAIAK,OAAAA,EAAAA,UAAU,IAAM,CACfF,EAAY,MAAA,MAAA,MAAA,oCAAA,gBAAiBP,EAAW,KAAK,EAC7CO,wDAAY,WAAY,MAAM,KAAKL,CAAW,CAAC,CAChD,CAAC,EAeDQ,EAAa,CACZ,kBAVyB,IAAM,CAC/BH,EAAY,MAAA,MAAA,MAAA,oCAAA,aAAcP,EAAW,KAAK,CAE3C,EAQC,eANsB,IACf,MAAM,KAAKE,CAAW,EAM7B,WAAAF,CACD,CAAC,+ZCnGD,GAAG,WAAWW,CAAe"}