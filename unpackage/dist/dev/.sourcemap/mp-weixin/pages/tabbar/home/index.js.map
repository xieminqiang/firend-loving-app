{"version":3,"file":"index.js","sources":["pages/tabbar/home/index.vue","pages/tabbar/home/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"home-container\">\n    <!-- 顶部固定区域：只保留logo和城市选择器 -->\n    <view class=\"header\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n      <!-- 顶部区域：logo和城市选择器 -->\n      <view class=\"header-top\">\n        <view class=\"logo-container\">\n          \t\t\t\t<text class=\"logo\">随伴行</text>\n          <text class=\"logo-tag\">提供精选服务</text>\n        </view>\n        <CitySelector @click=\"showCityPicker = true\" />\n      </view>\n    </view>\n   \n    <!-- 可滚动内容区域 -->\n     <view class=\"main-content\">\n      <scroll-view \n      class=\"scroll-container\" \n      scroll-y=\"true\" \n\n     \n    >\n\n\n      <!-- 服务选项卡 -->\n      <view class=\"category-tabs\">\n        <view \n          v-for=\"tab in serviceTabs\" \n          :key=\"tab\" \n          :class=\"['category-tab', {active: serviceTab === tab}]\" \n          @click=\"switchServiceTab(tab)\"\n        >\n          <text>{{ tab }}</text>\n          <view class=\"tab-indicator\" v-if=\"serviceTab === tab\"></view>\n        </view>\n      </view>\n\n      <!-- 页面内容 -->\n      <view class=\"content-section\">\n        <!-- 服务选项卡滑动容器 -->\n        <swiper\n          class=\"tab-content-swiper\"\n          :current=\"currentTabIndex\"\n          @change=\"onSwiperChange\"\n          :indicator-dots=\"false\"\n          :circular=\"false\"\n          :autoplay=\"false\"\n          :duration=\"300\"\n        >\n          <!-- 每个选项卡的内容 -->\n          <swiper-item v-for=\"tab in serviceTabs\" :key=\"tab\">\n            <scroll-view \n              class=\"tab-scroll-view\" \n              scroll-y=\"true\"\n              refresher-enabled=\"true\"\n              :refresher-triggered=\"refreshing\"\n              @refresherrefresh=\"onRefresh(tab)\"\n              @refresherrestore=\"onRefreshRestore\"\n            >\n              <view class=\"service-list-soul\">\n                <!-- 加载状态 -->\n                <view v-if=\"dataLoading[tab]\" class=\"loading-state\">\n                  <view class=\"loading-spinner\"></view>\n                  <text class=\"loading-text\">加载中...</text>\n                </view>\n                \n                <!-- 服务列表 -->\n                <view v-else-if=\"getTabServiceItems(tab).length > 0\">\n                  <view v-for=\"item in getTabServiceItems(tab)\" :key=\"item.id\" class=\"service-card-soul\" @click=\"navigateToServiceDetail(item.id)\">\n                    <view class=\"service-img-wrap\">\n                      <image :src=\"$imgBaseUrl + item.img\" class=\"service-img-soul\" mode=\"aspectFill\" />\n                    </view>\n                    <view class=\"service-info-soul\">\n                      <text class=\"service-title-soul\">{{ item.name }}</text>\n                      <view class=\"service-tags-soul\">\n                        <text v-for=\"tag in item.tags\" :key=\"tag\" class=\"tag-soul\">{{ tag }}</text>\n                      </view>\n                      <view class=\"service-actions-soul\">\n                        <view class=\"price-info\">\n                          <text class=\"price-amount\">¥{{ item.min_price || 0 }}</text>\n                          <text class=\"price-unit\">/{{ item.unit }}起</text>\n                        </view>\n                        <view class=\"order-btn-soul\" >\n                          <text>立即预约</text>\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n                \n                <!-- 空状态 - 只在加载完成后且没有数据时显示 -->\n                <view v-else-if=\"dataLoaded[tab] && getTabServiceItems(tab).length === 0\" class=\"empty-state\">\n                  <image src=\"/static/images/empty.png\" class=\"empty-icon\" mode=\"aspectFit\" />\n                  <text class=\"empty-text\">暂无{{ tab }}服务</text>\n                  <text class=\"empty-desc\">更多精彩服务即将上线</text>\n                </view>\n              </view>\n            </scroll-view>\n          </swiper-item>\n        </swiper>\n      </view>\n     \n    </scroll-view>\n\n     </view>\n\n    <!-- 城市选择弹窗 -->\n    <CityPicker \n      v-model:visible=\"showCityPicker\" \n      @city-selected=\"onCitySelected\"\n    />\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted, nextTick } from 'vue'\nimport { getHotRecommendServices } from '@/api/home.js'\nimport { useCityStore } from '@/stores/city.js'\nimport CitySelector from '@/components/common/CitySelector.vue'\nimport CityPicker from '@/components/common/CityPicker.vue'\n\n// 状态栏高度适配\nconst statusBarHeight = ref(0)\nconst navBarHeight = ref(44) // 默认导航栏高度\nfunction requestBackgroundLocation() {\n \n}\n\n// 获取系统信息\nonMounted(async () => {\n  const systemInfo = uni.getSystemInfoSync()\n  statusBarHeight.value = systemInfo.statusBarHeight || 0\n  \n  // 不同平台的导航栏高度适配\n  // #ifdef MP-WEIXIN\n  navBarHeight.value = 44\n  // #endif\n  // #ifdef APP-PLUS\n  navBarHeight.value = 44\n  // #endif\n  // #ifdef H5\n  navBarHeight.value = 0 // H5不需要导航栏高度\n  // #endif\n  \n\n\n  // 初始化城市数据（获取位置和加载城市列表）\n  await cityStore.initCityData()\n  \n  // 只加载当前选中的选项卡数据（默认\"服务\"）\n  await loadSingleTabData(serviceTab.value)\n})\n\n// 获取全局城市store\nconst cityStore = useCityStore()\n\n// 使用全局store的计算属性\nconst city = computed(() => cityStore.currentCity)\nconst currentCityCode = computed(() => cityStore.currentCityCode)\nconst cityList = computed(() => cityStore.cityList)\nconst cityIndex = computed(() => cityStore.cityIndex)\n\n\nconst serviceTab = ref('服务')\n//const serviceTabs = ['服务', '娱乐', '运动']\nconst serviceTabs = ['服务']\n// 页面卸载时清除定时器\nonUnmounted(() => {\n  if (swiperChangeTimer) {\n    clearTimeout(swiperChangeTimer)\n  }\n})\n\n\n\n// 城市选择 - 使用全局store\nfunction onCityChange(e) {\n  cityStore.selectCity(e.detail.value)\n}\n\n\n\n// 为每个选项卡存储数据\nconst allServiceItems = ref({\n  '服务': [],\n  '娱乐': [],\n  '运动': []\n})\n\n// 数据加载状态 - 添加loading状态\nconst dataLoaded = ref({\n  '服务': false,\n  '娱乐': false,\n  '运动': false\n})\n\nconst dataLoading = ref({\n  '服务': false,\n  '娱乐': false,\n  '运动': false\n})\n\n// 加载单个选项卡的服务数据 - 添加城市代码参数和强制刷新参数\nconst loadSingleTabData = async (tab, forceRefresh = false) => {\n  // 如果已经加载过且不是重新加载，直接返回（除非强制刷新）\n  if (dataLoaded.value[tab] && !dataLoading.value[tab] && !forceRefresh) {\n    console.log(`${tab}数据已缓存，跳过加载`)\n    return\n  }\n  \n  dataLoading.value[tab] = true\n  console.log(`开始加载${tab}服务数据，当前城市代码:`, currentCityCode.value, forceRefresh ? '(强制刷新)' : '')\n  \n  try {\n    const requestParams = {\n      category: getTabCategoryId(tab),\n      page_size: 10,\n      city_code: currentCityCode.value // 传递当前选中城市的代码\n    }\n    \n    console.log(`${tab}服务请求参数:`, requestParams)\n    \n    const response = await getHotRecommendServices(requestParams)\n    \n    if (response.data && response.data.code === 0 && response.data.data && response.data.data.list) {\n      // 转换API数据格式为模板需要的格式\n      allServiceItems.value[tab] = response.data.data.list.map(item => ({\n        id: item.id,\n        name: item.name,\n        desc: item.description,\n        tags: item.tags || [],\n        img: item.image_url || '/static/images/service-default.png',\n        min_price: item.min_price || 0,\n        unit: item.unit || '次', // 添加单位字段\n        price_template_id: item.price_template_id // 添加价格模板ID\n      }))\n      \n      console.log(`${tab}服务数据加载成功，共${allServiceItems.value[tab].length}条`)\n    } else {\n      // API返回数据为空\n      allServiceItems.value[tab] = []\n      console.log(`${tab}服务数据为空`)\n    }\n    dataLoaded.value[tab] = true\n  } catch (error) {\n    console.error(`获取${tab}服务数据失败:`, error)\n    // 请求失败，清空数据\n    allServiceItems.value[tab] = []\n    dataLoaded.value[tab] = true\n  } finally {\n    dataLoading.value[tab] = false\n  }\n}\n\n// 加载所有选项卡的服务数据 - 重新加载时清除缓存\nconst loadAllServicesData = async () => {\n  console.log('重新加载所有选项卡数据')\n  // 清除所有加载状态，强制重新加载\n  Object.keys(dataLoaded.value).forEach(tab => {\n    dataLoaded.value[tab] = false\n  })\n  \n  // 只加载当前选中的选项卡\n  await loadSingleTabData(serviceTab.value)\n}\n\n// 获取tab对应的分类ID\nconst getTabCategoryId = (tabName) => {\n  switch(tabName) {\n    case '服务': return 1\n    case '娱乐': return 2\n    case '运动': return 3\n    default: return 0\n  }\n}\n\n// 当前选项卡索引\nconst currentTabIndex = ref(0)\n\n// 防抖定时器\nlet swiperChangeTimer = null\n\n// 切换服务tab - 优化为懒加载\nconst switchServiceTab = async (tab) => {\n  const oldTab = serviceTab.value\n  const newTab = tab\n  \n  serviceTab.value = newTab\n  currentTabIndex.value = serviceTabs.indexOf(newTab)\n  \n  // 如果切换到新的tab且该tab未加载数据，则加载数据\n  if (oldTab !== newTab && !dataLoaded.value[newTab]) {\n    await loadSingleTabData(newTab)\n  }\n}\n\n// swiper滑动改变时的处理（检查数据加载状态）\nconst onSwiperChange = async (e) => {\n  const index = e.detail.current\n  const newTab = serviceTabs[index]\n  const oldTab = serviceTab.value\n  \n  currentTabIndex.value = index\n  serviceTab.value = newTab\n  \n  // 清除之前的定时器\n  if (swiperChangeTimer) {\n    clearTimeout(swiperChangeTimer)\n  }\n  \n  // 如果切换到新的tab且该tab未加载数据，则延迟加载数据（防抖）\n  if (oldTab !== newTab && !dataLoaded.value[newTab]) {\n    swiperChangeTimer = setTimeout(async () => {\n      await loadSingleTabData(newTab)\n    }, 300) // 300ms防抖延迟\n  }\n}\n\n// 获取指定选项卡的服务数据\nconst getTabServiceItems = (tab) => {\n  return allServiceItems.value[tab] || []\n}\n\n\n\n// 跳转到服务详情页功能\nfunction navigateToServiceDetail(serviceId) {\n  console.log('跳转到服务详情页, ID:', serviceId)\n  \n  // 获取当前服务项的数据\n  const currentTabItems = getTabServiceItems(serviceTab.value)\n  const serviceItem = currentTabItems.find(item => item.id === serviceId)\n  \n  // 构建URL参数\n  let url = `/subPackages/home/detail?id=${serviceId}`\n  if (serviceItem && serviceItem.price_template_id) {\n    url += `&price_template_id=${serviceItem.price_template_id}`\n  }\n  \n  console.log('跳转URL:', url)\n  uni.navigateTo({\n    url: url\n  })\n}\n\n// 预约服务\nfunction orderService(item) {\n  console.log('预约服务:', item.name)\n  uni.showToast({\n    title: `预约${item.name}成功`,\n    icon: 'success'\n  })\n}\n\n// 下拉刷新状态\nconst refreshing = ref(false)\nconst isRefreshing = ref(false) // 防止重复刷新\n\n// 下拉刷新处理\nconst onRefresh = async (tab) => {\n  // 防止重复刷新和非当前选项卡刷新\n  if (isRefreshing.value || tab !== serviceTab.value) {\n    return\n  }\n  \n  isRefreshing.value = true\n  refreshing.value = true\n  \n  try {\n    // 检查城市列表是否为空，如果为空则重新加载\n    if (cityStore.cityList.length === 0) {\n      console.log('城市列表为空，重新加载城市列表')\n      await cityStore.loadCityList()\n    }\n    \n    // 下拉刷新时强制重新加载数据\n    console.log(`下拉刷新${tab}选项卡数据`)\n    await loadSingleTabData(tab, false)\n    // 模拟加载时间，确保用户能看到刷新动画\n    await new Promise(resolve => setTimeout(resolve, 800))\n  } catch (error) {\n    console.error('刷新失败:', error)\n  } finally {\n    // 确保刷新状态被重置\n    refreshing.value = false\n    isRefreshing.value = false\n  }\n}\n\n// 刷新完成处理\nconst onRefreshRestore = () => {\n  refreshing.value = false\n  isRefreshing.value = false\n}\n\n// 自定义城市选择\nconst showCityPicker = ref(false)\n\nfunction onCitySelected(index) {\n  const oldCityIndex = cityStore.cityIndex\n  \n  // 如果城市发生变化，重新加载所有选项卡的数据\n  if (oldCityIndex !== index) {\n    console.log(`手动选择城市: ${cityStore.cityList[index].name}`)\n    loadAllServicesData()\n  }\n}\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/styles/variables.scss\";\n\n\n\n.home-container {\n  background: $bg-color-secondary;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n.main-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\toverflow: hidden;\n\t\tbox-sizing: border-box;\n\n\t}\n/* 滚动容器 */\n.scroll-container {\n \n  background: $bg-color-secondary;\n  width: 100%;\n  \n  /* 隐藏滚动条 */\n  &::-webkit-scrollbar {\n    display: none;\n    width: 0;\n    height: 0;\n  }\n  \n  /* iOS滚动优化 */\n  -webkit-overflow-scrolling: touch;\n  \n  /* 滚动回弹效果 */\n  overscroll-behavior: contain;\n  \n  /* 确保scroll-view正常工作 */\n  position: relative;\n  z-index: 1;\n  \n  /* 确保内容可以滚动到底部 */\n  box-sizing: border-box;\n}\n\n/* 顶部区域 - 现在只包含logo */\n.header {\n  background: linear-gradient(135deg, $bg-color-primary 0%, rgba(247, 248, 250, 0.95) 100%);\n  padding: 20rpx 24rpx 20rpx 24rpx;\n  border-bottom: none;\n  box-shadow: 0 6rpx 24rpx rgba(130, 160, 216, 0.05);\n  border-radius: 0 0 32rpx 32rpx;\n  position: relative;\n  overflow: hidden;\n  backdrop-filter: blur(20rpx);\n  -webkit-backdrop-filter: blur(20rpx);\n  box-sizing: border-box;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    right: -20%;\n    width: 240rpx;\n    height: 240rpx;\n    background: radial-gradient(circle, rgba(130, 160, 216, 0.06) 0%, rgba(167, 188, 231, 0.03) 50%, transparent 100%);\n    border-radius: 50%;\n    z-index: 1;\n    animation: float 6s ease-in-out infinite;\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -30%;\n    left: -10%;\n    width: 160rpx;\n    height: 160rpx;\n    background: radial-gradient(circle, rgba(255, 111, 97, 0.04) 0%, rgba(130, 160, 216, 0.02) 50%, transparent 100%);\n    border-radius: 50%;\n    z-index: 1;\n    animation: float 8s ease-in-out infinite reverse;\n  }\n}\n\n@keyframes float {\n  0%, 100% { transform: translateY(0px) rotate(0deg); }\n  50% { transform: translateY(-15rpx) rotate(180deg); }\n}\n\n.header-top {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  z-index: 2;\n  height: 88rpx; /* 为胶囊按钮预留空间 */\n  padding-right: 200rpx; /* 为胶囊按钮预留右侧空间 */\n}\n\n.logo-container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n.logo {\n  font-size: 40rpx;\n  font-weight: 700;\n  background: linear-gradient(135deg, $primary-color 0%, $primary-hover 60%, $highlight-color 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  color: transparent;\n  margin-bottom: 4rpx;\n  text-shadow: none;\n  letter-spacing: 2rpx;\n  position: relative;\n\n}\n\n.logo-tag {\n  font-size: 22rpx;\n  color: $text-color-secondary;\n  font-weight: 500;\n  letter-spacing: 1rpx;\n}\n\n\n\n\n\n/* 服务标签区域 - 现在在scroll-view内部 */\n.category-tabs {\n  display: flex;\n  justify-content: space-around;\n  margin: 12rpx 32rpx 8rpx; /* 减少下边距从20rpx到8rpx */\n  position: relative;\n  padding: 6rpx;\n  border-radius: 24rpx;\n  z-index: 2;\n  background: linear-gradient(135deg, rgba(130, 160, 216, 0.05) 0%, rgba(255, 255, 255, 0.7) 100%);\n  backdrop-filter: blur(15rpx);\n  -webkit-backdrop-filter: blur(15rpx);\n  border: 1rpx solid rgba(130, 160, 216, 0.08);\n  box-shadow: 0 4rpx 20rpx rgba(130, 160, 216, 0.06);\n}\n\n.category-tab {\n  flex: 1;\n  text-align: center;\n  padding: 14rpx 0 20rpx; /* 增加底部padding为指示器留出空间 */\n  font-size: 28rpx;\n  font-weight: 500;\n  color: $text-color-secondary;\n  position: relative;\n  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  border-radius: 18rpx;\n  margin: 0 3rpx;\n  \n  &:active {\n    transform: scale(0.98);\n  }\n}\n\n.category-tab.active {\n  color: $primary-color;\n  font-weight: 700;\n  background: linear-gradient(135deg, rgba(130, 160, 216, 0.08) 0%, rgba(255, 255, 255, 0.9) 100%);\n  box-shadow: 0 2rpx 12rpx rgba(130, 160, 216, 0.12);\n  transform: translateY(-1rpx);\n}\n\n.tab-indicator {\n  position: absolute;\n  bottom: 6rpx; /* 调整位置，确保不被裁剪 */\n  left: 25%;\n  width: 50%;\n  height: 4rpx; /* 增加高度，让指示器更明显 */\n  background: linear-gradient(90deg, $primary-color 0%, $highlight-color 100%);\n  border-radius: 2rpx;\n  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  box-shadow: 0 1rpx 6rpx rgba(130, 160, 216, 0.3);\n  z-index: 2; /* 确保在最上层 */\n}\n\n/* 内容区域 */\n.content-section {\n  padding: 4rpx 24rpx 24rpx; /* 减少上边距从12rpx到4rpx */\n  position: relative;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: -80rpx;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 160rpx;\n    height: 160rpx;\n    background: radial-gradient(circle, rgba(130, 160, 216, 0.02) 0%, transparent 70%);\n    border-radius: 50%;\n    z-index: 0;\n  }\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n  position: relative;\n  z-index: 1;\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: 700;\n  color: $text-color-primary;\n  position: relative;\n  padding-left: 20rpx;\n  letter-spacing: 0.5rpx;\n}\n\n.section-title::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 6rpx;\n  height: 28rpx;\n  width: 6rpx;\n  background: linear-gradient(to bottom, $primary-color 0%, $highlight-color 100%);\n  border-radius: 6rpx;\n  box-shadow: 0 2rpx 6rpx rgba(130, 160, 216, 0.25);\n}\n\n.section-more {\n  font-size: 24rpx;\n  color: #666666;\n  font-weight: 600;\n  padding: 6rpx 12rpx;\n  border-radius: 16rpx;\n  background: linear-gradient(135deg, rgba(102, 102, 102, 0.06) 0%, rgba(255, 255, 255, 0.8) 100%);\n  border: 1rpx solid rgba(102, 102, 102, 0.12);\n  transition: all 0.3s;\n  \n  &:active {\n    transform: scale(0.95);\n    color: $primary-color;\n    background: linear-gradient(135deg, rgba(115, 99, 255, 0.08) 0%, rgba(255, 255, 255, 0.9) 100%);\n    border-color: rgba(115, 99, 255, 0.15);\n  }\n}\n\n/* 选项卡内容滑动容器 */\n.tab-content-swiper {\n  height: calc(100vh - 360rpx); /* 根据实际情况调整高度 */\n  width: 100%;\n}\n\n.tab-scroll-view {\n  height: 100%;\n  width: 100%;\n}\n\n/* 服务卡片列表 */\n.service-list-soul {\n  display: flex;\n  flex-direction: column;\n  gap: 24rpx;\n  position: relative;\n  z-index: 1;\n  padding: 4rpx 0; /* 减少上下边距从12rpx到4rpx */\n}\n\n.service-card-soul {\n  display: flex;\n  background: linear-gradient(135deg, $bg-color-primary 0%, rgba(255, 255, 255, 0.98) 100%);\n  border-radius: 24rpx;\n  padding: 24rpx;\n  box-shadow: 0 6rpx 24rpx rgba(0, 0, 0, 0.04);\n  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  border: 1rpx solid rgba(0, 0, 0, 0.05);\n  backdrop-filter: blur(20rpx);\n  -webkit-backdrop-filter: blur(20rpx);\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 80rpx;\n    height: 80rpx;\n    background: radial-gradient(circle, rgba(255, 105, 222, 0.03) 0%, transparent 70%);\n    border-radius: 50%;\n    z-index: 0;\n  }\n  \n  &:active {\n    transform: translateY(-4rpx) scale(1.01);\n    box-shadow: 0 12rpx 36rpx rgba(0, 0, 0, 0.08);\n    border-color: rgba(255, 105, 222, 0.12);\n  }\n}\n\n.service-img-wrap {\n  width: 160rpx;\n  height: 160rpx;\n  border-radius: 20rpx;\n  overflow: hidden;\n  margin-right: 24rpx;\n  flex-shrink: 0;\n  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\n  position: relative;\n  z-index: 1;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 105, 222, 0.06) 0%, transparent 50%);\n    z-index: 1;\n    border-radius: 20rpx;\n  }\n}\n\n.service-rating {\n  position: absolute;\n  top: 8rpx;\n  right: 8rpx;\n  background: linear-gradient(135deg, $highlight-color 0%, #FF8A65 100%);\n  color: white;\n  font-size: 20rpx;\n  padding: 4rpx 12rpx;\n  border-radius: 20rpx;\n  z-index: 3;\n  backdrop-filter: blur(8rpx);\n  -webkit-backdrop-filter: blur(8rpx);\n  box-shadow: 0 3rpx 12rpx rgba(255, 111, 97, 0.25);\n  font-weight: 600;\n  border: 1rpx solid rgba(255, 255, 255, 0.2);\n}\n\n.service-img-soul {\n  width: 100%;\n  height: 100%;\n  transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  z-index: 2;\n  position: relative;\n}\n\n.service-img-wrap:active .service-img-soul {\n  transform: scale(1.05);\n}\n\n.service-info-soul {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n  position: relative;\n  z-index: 1;\n}\n\n.service-title-soul {\n  font-weight: 700;\n  font-size: 32rpx;\n  color: $text-color-primary;\n  margin-bottom: 8rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  letter-spacing: 0.5rpx;\n  position: relative;\n}\n\n.service-desc-soul {\n  font-size: 24rpx;\n  color: $text-color-secondary;\n  margin-bottom: 12rpx;\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  font-weight: 400;\n}\n\n.service-tags-soul {\n  display: flex;\n  flex-wrap: wrap;\n  margin-bottom: auto;\n  margin-top: 4rpx;\n  gap: 8rpx;\n}\n\n.tag-soul {\n  font-size: 20rpx;\n  background: linear-gradient(135deg, rgba(108, 117, 125, 0.08) 0%, rgba(248, 249, 250, 0.6) 100%);\n  color: #495057;\n  padding: 4rpx 12rpx;\n  border-radius: 16rpx;\n  font-weight: 600;\n  border: 1rpx solid rgba(108, 117, 125, 0.12);\n  backdrop-filter: blur(8rpx);\n  -webkit-backdrop-filter: blur(8rpx);\n  transition: all 0.3s;\n  \n  &:active {\n    transform: scale(0.95);\n    background: linear-gradient(135deg, rgba(255, 105, 222, 0.1) 0%, rgba(255, 255, 255, 0.8) 100%);\n    color: $highlight-color;\n    border-color: rgba(255, 105, 222, 0.2);\n  }\n}\n\n.service-actions-soul {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 16rpx;\n  padding-top: 12rpx;\n  // border-top: 1rpx solid rgba(0, 0, 0, 0.06);\n}\n\n.price-info {\n  display: flex;\n  align-items: baseline;\n  position: relative;\n}\n\n.price-amount {\n  color:$pricelight-color;\n  font-weight: 700;\n  font-size: 30rpx;\n  text-shadow: 0 1rpx 3rpx rgba(255, 111, 97, 0.15);\n}\n\n.price-unit {\n  color: $text-color-secondary;\n  font-size: 20rpx;\n  margin-left: 4rpx;\n  font-weight: 500;\n}\n\n.order-btn-soul {\n  background: linear-gradient(135deg, $primary-color 0%, $highlight-color 100%);\n  color: white;\n  border-radius: 32rpx;\n  padding: 12rpx 24rpx;\n  font-size: 24rpx;\n  font-weight: 700;\n  box-shadow: 0 8rpx 24rpx rgba(130, 160, 216, 0.25);\n  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  border: none;\n  position: relative;\n  overflow: hidden;\n  letter-spacing: 0.5rpx;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);\n    transition: left 0.6s;\n  }\n  \n  &:active {\n    transform: translateY(-2rpx) scale(1.02);\n    box-shadow: 0 12rpx 32rpx rgba(130, 160, 216, 0.35);\n    background: linear-gradient(135deg, $primary-hover 0%, $primary-color 100%);\n  }\n  \n  &:active::before {\n    left: 100%;\n  }\n}\n\n\n\n/* 空状态样式 */\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 120rpx 60rpx;\n  text-align: center;\n}\n\n.empty-icon {\n  width: 200rpx;\n  height: 200rpx;\n  margin-bottom: 32rpx;\n  opacity: 0.6;\n}\n\n.empty-text {\n  font-size: 32rpx;\n  color: $text-color-primary;\n  font-weight: 600;\n  margin-bottom: 16rpx;\n}\n\n.empty-desc {\n  font-size: 24rpx;\n  color: $text-color-secondary;\n  line-height: 1.4;\n}\n\n/* 底部安全区域 */\n.bottom-safe-area {\n  height: 120rpx; /* 增加高度，为TabBar和安全区域预留空间 */\n  background: transparent;\n}\n\n/* 加载状态样式 */\n.loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 120rpx 60rpx;\n  text-align: center;\n}\n\n.loading-spinner {\n  width: 60rpx;\n  height: 60rpx;\n  border: 6rpx solid #f0f0f0;\n  border-top: 6rpx solid #7363ff;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 32rpx;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n  font-size: 28rpx;\n  color: #666666;\n  font-weight: 500;\n}\n</style> ","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/tabbar/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["CitySelector","CityPicker","statusBarHeight","ref","navBarHeight","onMounted","systemInfo","uni","cityStore","loadSingleTabData","serviceTab","useCityStore","computed","currentCityCode","serviceTabs","onUnmounted","swiperChangeTimer","allServiceItems","dataLoaded","dataLoading","tab","forceRefresh","requestParams","getTabCategoryId","response","getHotRecommendServices","item","error","loadAllServicesData","tabName","currentTabIndex","switchServiceTab","oldTab","newTab","onSwiperChange","e","index","getTabServiceItems","navigateToServiceDetail","serviceId","serviceItem","url","refreshing","isRefreshing","onRefresh","resolve","onRefreshRestore","showCityPicker","onCitySelected","MiniProgramPage"],"mappings":"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"}