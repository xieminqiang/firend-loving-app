{"version":3,"file":"index.js","sources":["pages/tabbar/home/index.vue","pages/tabbar/home/index.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"home-container\">\n\t\t<!-- 使用v-show避免组件重新创建，保持数据状态 -->\n\t\t<view v-show=\"currentTab === 'home'\" class=\"home-tab-content\">\n\t\t\t<!-- 引入真正的home组件，使用懒加载 -->\n\t\t\t<HomeComponent v-if=\"visitedTabs.has('home')\" />\n\t\t</view>\n   \n\t\t<view v-show=\"currentTab === 'friends'\" class=\"friends-tab-content\">\n\t\t\t<!-- 引入友伴组件，使用懒加载 -->\n\t\t\t<FriendsComponent v-if=\"visitedTabs.has('friends')\" />\n\t\t</view>\n\n\t\t<view v-show=\"currentTab === 'discover'\" class=\"discover-tab-content\">\n\t\t\t<!-- 引入发现组件，使用懒加载 -->\n\t\t\t<DiscoverComponent v-if=\"visitedTabs.has('discover')\" @playVideo=\"openVideoPopup\" />\n\t\t</view>\n                \n\t\t<view v-show=\"currentTab === 'profile'\" class=\"profile-tab-content\">\n\t\t\t<!-- 引入个人中心组件，使用懒加载 -->\n\t\t\t<ProfileComponent v-if=\"visitedTabs.has('profile')\" />\n\t\t</view>\n\n\t\t<!-- 底部Tabbar -->\n\t\t<hm-tabbar \n\t\t\t:currentTab=\"currentTab\" \n\t\t\t@tabChange=\"handleTabChange\"\n\t\t/>\n\n\t\t<!-- 视频播放弹框 -->\n\t\t\t\t<u-popup :show=\"popupShow\" mode=\"center\"   :safeAreaInsetBottom=\"false\">\n\t\t\t<view class=\"video-popup-content\">\n\t\t\t\t<video \n\t\t\t\t\tclass=\"video-player\" \n\t\t\t\t\t:src=\"currentVideoPath\" \n\t\t\t\t\t:controls=\"false\" \n\t\t\t\t\t:show-center-play-btn=\"false\"\n\t\t\t\t\t:show-fullscreen-btn=\"false\"\n\t\t\t\t\t:show-progress=\"true\"\n\t\t\t\t\t:enable-progress-gesture=\"true\"\n\t\t\t\t\tautoplay>\n\t\t\t\t</video>\n\t\t\t\t<!-- 关闭按钮 -->\n\t\t\t\t<view class=\"close-btn\" @tap=\"closeVideoPopup\">\n\t\t\t\t\t<image src=\"/static/find/close2.png\" mode=\"widthFix\" class=\"close-icon\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</u-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted} from 'vue'\nimport hmTabbar from '@/components/hm-tabbar/hm-tabbar.vue'\nimport HomeComponent from './components/home.vue'\nimport FriendsComponent from './components/friends.vue'\nimport DiscoverComponent from './components/discover.vue'\nimport ProfileComponent from './components/profile.vue'\n\n// 当前选中的tab\nconst currentTab = ref('home')\n\n// 记录已访问过的tab，用于懒加载\nconst visitedTabs = reactive(new Set(['home']))\n\n// 视频弹框相关状态\nconst popupShow = ref(false)\nconst currentVideoPath = ref('')\n\n// 处理tab切换\nconst handleTabChange = (tabName) => {\n\t// 记录访问过的tab\n\tvisitedTabs.add(tabName)\n\t\n\t// 切换tab\n\tcurrentTab.value = tabName\n\t\n\tconsole.log(`切换到 ${tabName} tab，已访问的tab:`, Array.from(visitedTabs))\n\tconsole.log('当前tab状态:', {\n\t\tcurrentTab: currentTab.value,\n\t\tvisitedTabs: Array.from(visitedTabs),\n\t\tdiscoverVisited: visitedTabs.has('discover')\n\t})\n}\n\n// 打开视频弹框\nconst openVideoPopup = (videoPath) => { \n\tconsole.log('播放视频4:', videoPath)\n\tcurrentVideoPath.value = videoPath\n\tpopupShow.value = true\n}\n\n// 关闭视频弹框\nconst closeVideoPopup = () => {\n\tpopupShow.value = false\n\tcurrentVideoPath.value = ''\n}\n\n// 页面挂载时初始化\nonMounted(() => {\n\tconsole.log('页面挂载完成，当前tab:', currentTab.value)\n\tconsole.log('已访问的tab:', Array.from(visitedTabs))\n})\n\n// 页面显示时（从其他页面返回时）\n\n\n// 暴露一些方法供外部使用（可选）\nconst refreshCurrentTab = () => {\n\tconsole.log('手动刷新当前tab:', currentTab.value)\n\t// 这里可以触发当前tab的数据刷新\n}\n\nconst getVisitedTabs = () => {\n\treturn Array.from(visitedTabs)\n}\n\ndefineExpose({\n\trefreshCurrentTab,\n\tgetVisitedTabs,\n\tcurrentTab,\n\topenVideoPopup,\n\tcloseVideoPopup\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.home-container {\n\theight: 100vh;\n\n}\n\n// 为不同tab内容添加不同的样式\n.home-tab-content {\n\t/* home组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n.friends-tab-content {\n\t/* friends组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n.discover-tab-content {\n\t/* discover组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n.profile-tab-content {\n\t/* profile组件有自己的完整样式，不需要额外包装 */\n\theight: 100vh;\n\toverflow: hidden;\n}\n\n@keyframes fadeIn {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translateY(20rpx);\n\t}\n\tto {\n\t\topacity: 1;\n\t\ttransform: translateY(0);\n\t}\n}\n\n.video-popup {\n\tbackground-color: #fff;\n\tborder-radius: 20rpx;\n\toverflow: hidden;\n\tbox-sizing: border-box;\n    width: 100vw;\n\n\t.video-popup-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 20rpx 30rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\n\t\t.video-popup-title {\n\t\t\tfont-size: 32rpx;\n\t\t\tfont-weight: 500;\n\t\t\tcolor: #333;\n\t\t}\n\n\t\t.video-popup-close {\n\t\t\tfont-size: 40rpx;\n\t\t\tcolor: #999;\n\t\t\tcursor: pointer;\n\t\t\tpadding: 10rpx;\n\t\t}\n\t}\n\n\t\n} \n\t.video-popup-content {\n\t\twidth: 100vw;\n\t\tbackground: transparent;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\t\n\t\t.video-player {\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t\tbackground: transparent;\n\t\t\tborder: none;\n\t\t\toutline: none;\n\t\t\tdisplay: block;\n\t\t\tvertical-align: top;\n\t\t}\n\n\t\t.close-btn {\n\t\t\tposition: absolute;\n\t\t\tbottom: 40rpx;\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t\tz-index: 1000;\n\t\t\twidth: 80rpx;\n\t\t\theight: 80rpx;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tbackground: rgba(255, 255, 255, 1);\n\t\t\tborder-radius: 50%;\n\t\t\t\n\t\t}\n\n\t\t.close-icon {\n\t\t\twidth: 40rpx;\n\t\t\theight: 40rpx;\n\t\t}\n\t}\n\n\t/* 确保u-popup没有默认样式 */\n\t:deep(.u-popup__content) {\n\t\tbackground-color: transparent !important;\n\t\tpadding: 0 !important;\n\t\tmargin: 0 !important;\n\t\tborder: none !important;\n\t}\n\n\t/* 确保视频元素没有默认样式 */\n\t:deep(video) {\n\t\tbackground-color: transparent !important;\n\t\tborder: none !important;\n\t\toutline: none !important;\n\t\tvertical-align: top !important;\n\t}\n</style> ","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/tabbar/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["hmTabbar","HomeComponent","FriendsComponent","DiscoverComponent","ProfileComponent","currentTab","ref","visitedTabs","reactive","popupShow","currentVideoPath","handleTabChange","tabName","uni","openVideoPopup","videoPath","closeVideoPopup","onMounted","__expose","MiniProgramPage"],"mappings":"0OAqDA,MAAMA,EAAW,IAAW,6CACtBC,EAAgB,IAAW,uBAC3BC,EAAmB,IAAW,0BAC9BC,EAAoB,IAAW,2BAC/BC,EAAmB,IAAW,gEAGpC,MAAMC,EAAaC,EAAG,IAAC,MAAM,EAGvBC,EAAcC,EAAAA,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,EAGxCC,EAAYH,EAAG,IAAC,EAAK,EACrBI,EAAmBJ,EAAG,IAAC,EAAE,EAGzBK,EAAmBC,GAAY,CAEpCL,EAAY,IAAIK,CAAO,EAGvBP,EAAW,MAAQO,EAEnBC,EAAAA,MAAA,MAAA,MAAA,oCAAY,OAAOD,CAAO,gBAAiB,MAAM,KAAKL,CAAW,CAAC,EAClEM,EAAAA,MAAY,MAAA,MAAA,oCAAA,WAAY,CACvB,WAAYR,EAAW,MACvB,YAAa,MAAM,KAAKE,CAAW,EACnC,gBAAiBA,EAAY,IAAI,UAAU,CAC7C,CAAE,CACF,EAGMO,EAAkBC,GAAc,CACrCF,EAAAA,MAAA,MAAA,MAAA,oCAAY,SAAUE,CAAS,EAC/BL,EAAiB,MAAQK,EACzBN,EAAU,MAAQ,EACnB,EAGMO,EAAkB,IAAM,CAC7BP,EAAU,MAAQ,GAClBC,EAAiB,MAAQ,EAC1B,EAGAO,OAAAA,EAAAA,UAAU,IAAM,CACfJ,EAAY,MAAA,MAAA,MAAA,qCAAA,gBAAiBR,EAAW,KAAK,EAC7CQ,yDAAY,WAAY,MAAM,KAAKN,CAAW,CAAC,CAChD,CAAC,EAeDW,EAAa,CACZ,kBAVyB,IAAM,CAC/BL,EAAY,MAAA,MAAA,MAAA,qCAAA,aAAcR,EAAW,KAAK,CAE3C,EAQC,eANsB,IACf,MAAM,KAAKE,CAAW,EAM7B,WAAAF,EACA,eAAAS,EACA,gBAAAE,CACD,CAAC,mdC1HD,GAAG,WAAWG,CAAe"}