{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"index-page\">\n\t\n\t</view>\n</template>\n\n<script setup>\nimport { onMounted } from 'vue'\nimport { getFirstSwitch } from '@/api/home.js'\nimport { useUserStore } from '@/stores/user.js'\n\n// 获取用户store实例\nconst userStore = useUserStore()\n\n// 调用接口\nconst callFirstSwitch = async () => {  \n\n\ttry {\n\t\tconst response = await getFirstSwitch() \n      \n\t\tconsole.log('首页开关配置:', response.data)\n\t\t\n\t\t\n\t\n\t\t// 保存开关数据到store\n\t\tif (response.data && response.data.code === 0 && response.data.data) {\n\t\t\t\t// userStore.setSwitch(1)\n\t\t\tuserStore.setSwitch(response.data.data.value) \n\t\t\tconsole.log('开关数据已保存到store:', response.data.data.value)\n\t\t}\n\t\t\n\t\n\t\tif (response.data && response.data.code === 0 ) {\n\n            \n          if(response.data.data.value === 1 ){\n          \n            uni.reLaunch({\n\t\t\t\turl: '/pages/tabbar/home/index'\n\t\t\t})\n        \n        }  else{ \n\t\t\tuni.reLaunch({\n\t\t\t\turl: '/pages/tabbar/page/page'\n\t\t\t}) \n            }\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('获取首页开关配置失败:', error)\n\t}\n}\nimport {\n\tonShow,\n\tonLoad\n} from '@dcloudio/uni-app'; \nonShow(() => { \n\t// userStore.setSwitch(1)\n\t// uni.reLaunch({\n\t// \t\t\t\turl: '/pages/tabbar/home/index'\n\t// \t\t\t})\n  // 页面显示时，如果已登录则获取订单数量 \n\n\tuserStore.setSwitch(2)\n\tconst accountInfo = uni.getAccountInfoSync();  \n\n\t\n\tconst currentVersion = accountInfo.miniProgram.envVersion \n\t\tconsole.log('当前小程序版本号:', currentVersion)\n\t if (currentVersion == \"release\" || currentVersion == \"develop\") {\n\t\t callFirstSwitch()\n\t } else { \n\t\t  userStore.setSwitch(2) \n\t\t uni.reLaunch({\n\t\t \turl: '/pages/tabbar/page/page'\n\t\t })\n\t\t\n\t }\n})\n// 页面加载时调用\nonMounted(() => {  \n\n\t// userStore.setSwitch(2)\n\t// const accountInfo = uni.getAccountInfoSync();\n\t// const currentVersion = accountInfo.miniProgram.envVersion \n\t// console.log('当前小程序版本号:', currentVersion)\n\t//  if (currentVersion == \"release\" || currentVersion == \"develop\") {\n\t// \t callFirstSwitch()\n\t//  } else { \n\t// \t  userStore.setSwitch(2) \n\t// \t uni.reLaunch({\n\t// \t \turl: '/pages/tabbar/page/page'\n\t// \t })\n\t\t\n\t//  }\n\t \n\t// console.log('当前小程序版本号:', currentVersion)\n\t// console.log('当前小程序版本号111:', accountInfo.miniProgram.envVersion) \n\t\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.index-page {\n\n}\n</style>","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["userStore","useUserStore","callFirstSwitch","response","getFirstSwitch","uni","error","onShow","currentVersion","onMounted","MiniProgramPage"],"mappings":"mJAYA,MAAMA,EAAYC,EAAAA,aAAc,EAG1BC,EAAkB,SAAY,CAEnC,GAAI,CACH,MAAMC,EAAW,MAAMC,iBAAgB,EAEvCC,EAAY,MAAA,MAAA,MAAA,8BAAA,UAAWF,EAAS,IAAI,EAKhCA,EAAS,MAAQA,EAAS,KAAK,OAAS,GAAKA,EAAS,KAAK,OAE9DH,EAAU,UAAUG,EAAS,KAAK,KAAK,KAAK,EAC5CE,QAAY,MAAA,MAAA,8BAAA,iBAAkBF,EAAS,KAAK,KAAK,KAAK,GAInDA,EAAS,MAAQA,EAAS,KAAK,OAAS,IAGjCA,EAAS,KAAK,KAAK,QAAU,EAE9BE,EAAAA,MAAI,SAAS,CACrB,IAAK,0BACT,CAAI,EAGDA,EAAAA,MAAI,SAAS,CACZ,IAAK,yBACT,CAAI,EAGF,OAAQC,EAAO,CACfD,EAAAA,kDAAc,cAAeC,CAAK,CAClC,CACF,EAKAC,OAAAA,EAAAA,OAAO,IAAM,CAOZP,EAAU,UAAU,CAAC,EAIrB,MAAMQ,EAHcH,QAAI,qBAGW,YAAY,WAC9CA,EAAAA,MAAA,MAAA,MAAA,8BAAY,YAAaG,CAAc,EACnCA,GAAkB,WAAaA,GAAkB,UACpDN,EAAiB,GAEhBF,EAAU,UAAU,CAAC,EACtBK,EAAAA,MAAI,SAAS,CACZ,IAAK,yBACT,CAAI,EAGJ,CAAC,EAEDI,EAAAA,UAAU,IAAM,CAmBhB,CAAC,qECjGD,GAAG,WAAWC,CAAe"}