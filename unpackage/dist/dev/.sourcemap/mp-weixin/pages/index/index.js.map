{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"index-page\">\n\t\t<view class=\"logo-container\">\n\t\t\t<image :src=\"$imgBaseUrl +'/img/cum/logo_small_01.jpeg'\" class=\"logo\" mode=\"aspectFill\"></image>\n\t\t\t<text class=\"logo-text\">随伴行</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { onMounted } from 'vue'\nimport { getFirstSwitch } from '@/api/home.js'\nimport { useUserStore } from '@/stores/user.js'\n\n// 获取用户store实例\nconst userStore = useUserStore()\n\n// 调用接口\nconst callFirstSwitch = async () => {  \n\n\ttry {\n\t\tconst response = await getFirstSwitch() \n      \n\t\tconsole.log('首页开关配置:', response.data)\n\t\t\n\t\t\n\t\n\t\t// 保存开关数据到store\n\t\tif (response.data && response.data.code === 0 && response.data.data) {\n\t\t\t\t// userStore.setSwitch(1)\n\t\t\tuserStore.setSwitch(response.data.data.value) \n\t\t\tconsole.log('开关数据已保存到store:', response.data.data.value)\n\t\t}\n\t\t\n\t\n\t\tif (response.data && response.data.code === 0 ) {\n\n            \n          if(response.data.data.value === 1 ){\n          \n            uni.reLaunch({\n\t\t\t\turl: '/pages/tabbar/home/index'\n\t\t\t})\n        \n        }  else{ \n\t\t\tuni.reLaunch({\n\t\t\t\turl: '/pages/tabbar/page/page'\n\t\t\t}) \n            }\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('获取首页开关配置失败:', error)\n\t}\n}\nimport {\n\tonShow,\n\tonLoad\n} from '@dcloudio/uni-app'; \nonShow(() => { \n\t// userStore.setSwitch(1)\n\t// uni.reLaunch({\n\t// \t\t\t\turl: '/pages/tabbar/home/index'\n\t// \t\t\t})\n  // 页面显示时，如果已登录则获取订单数量 \n\n\tuserStore.setSwitch(2)\n\tconst accountInfo = uni.getAccountInfoSync();  \n\n\t\n\tconst currentVersion = accountInfo.miniProgram.envVersion \n\t\tconsole.log('当前小程序版本号:', currentVersion)\n\t\tcallFirstSwitch()\n\t // if (currentVersion == \"release\" || currentVersion == \"develop\") {\n\t\t//  callFirstSwitch()\n\t // } else { \n\t\t//   userStore.setSwitch(2) \n\t\t//  uni.reLaunch({\n\t\t//  \turl: '/pages/tabbar/page/page'\n\t\t//  })\n\t\t\n\t // }\n})\n// 页面加载时调用\nonMounted(() => {  \n\n\t// userStore.setSwitch(2)\n\t// const accountInfo = uni.getAccountInfoSync();\n\t// const currentVersion = accountInfo.miniProgram.envVersion \n\t// console.log('当前小程序版本号:', currentVersion)\n\t//  if (currentVersion == \"release\" || currentVersion == \"develop\") {\n\t// \t callFirstSwitch()\n\t//  } else { \n\t// \t  userStore.setSwitch(2) \n\t// \t uni.reLaunch({\n\t// \t \turl: '/pages/tabbar/page/page'\n\t// \t })\n\t\t\n\t//  }\n\t \n\t// console.log('当前小程序版本号:', currentVersion)\n\t// console.log('当前小程序版本号111:', accountInfo.miniProgram.envVersion) \n\t\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.index-page {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100vh;\n\tdisplay: flex;\n\tjustify-content: center;\n\n\t\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-image: url('https://sbx-server.oss-cn-shenzhen.aliyuncs.com/img/cum/home_bg.png');\n\t\tbackground-size: cover;\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tz-index: -1;\n\t} \n\t.logo-container {\n\t\tposition: relative;\n\t\tz-index: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-top: -200rpx;\n\t}\n\t.logo {\n\t\twidth: 140rpx;\n\t\theight: 140rpx;\n\t\tborder-radius: 20rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t.logo-text {\n\t\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\ttext-align: center;\n\t\tcolor: transparent;\n\t\tbackground-clip: text;\n\t\tbackground-image: linear-gradient(180deg, rgba(115, 99, 255, 1) 0%, rgba(255, 105, 222, 1) 100%);\n\t}\n}\n</style>","import MiniProgramPage from '/Users/xiaoqiang/Documents/friemd/firend-loving-app/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["userStore","useUserStore","callFirstSwitch","response","getFirstSwitch","uni","error","onShow","currentVersion","onMounted","MiniProgramPage"],"mappings":"mJAeA,MAAMA,EAAYC,EAAAA,aAAc,EAG1BC,EAAkB,SAAY,CAEnC,GAAI,CACH,MAAMC,EAAW,MAAMC,iBAAgB,EAEvCC,EAAY,MAAA,MAAA,MAAA,8BAAA,UAAWF,EAAS,IAAI,EAKhCA,EAAS,MAAQA,EAAS,KAAK,OAAS,GAAKA,EAAS,KAAK,OAE9DH,EAAU,UAAUG,EAAS,KAAK,KAAK,KAAK,EAC5CE,QAAY,MAAA,MAAA,8BAAA,iBAAkBF,EAAS,KAAK,KAAK,KAAK,GAInDA,EAAS,MAAQA,EAAS,KAAK,OAAS,IAGjCA,EAAS,KAAK,KAAK,QAAU,EAE9BE,EAAAA,MAAI,SAAS,CACrB,IAAK,0BACT,CAAI,EAGDA,EAAAA,MAAI,SAAS,CACZ,IAAK,yBACT,CAAI,EAGF,OAAQC,EAAO,CACfD,EAAAA,kDAAc,cAAeC,CAAK,CAClC,CACF,EAKAC,OAAAA,EAAAA,OAAO,IAAM,CAOZP,EAAU,UAAU,CAAC,EAIrB,MAAMQ,EAHcH,QAAI,qBAGW,YAAY,WAC9CA,EAAAA,MAAA,MAAA,MAAA,8BAAY,YAAaG,CAAc,EACvCN,EAAiB,CAUnB,CAAC,EAEDO,EAAAA,UAAU,IAAM,CAmBhB,CAAC,kHCrGD,GAAG,WAAWC,CAAe"}