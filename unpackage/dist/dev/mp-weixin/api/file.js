"use strict";const r=require("../common/vendor.js");require("../config/http.js");const d=require("../config/config.js"),t=d.config.development.baseUrl,l=e=>new Promise((n,o)=>{r.index.__f__("log","at api/file.js:18","开始上传文件:",e),r.index.__f__("log","at api/file.js:20","开始上传文件:eeee",t+"/file/upload"),r.index.uploadFile({url:t+"/file/upload",filePath:e.filePath,name:"file",header:{Authorization:r.index.getStorageSync("token")||""},success:a=>{try{const i=JSON.parse(a.data);i.code===0?n(i):o(new Error(i.message||"上传失败"))}catch(i){r.index.__f__("error","at api/file.js:37","响应数据解析失败:",i,a.data),o(new Error("响应数据解析失败"))}},fail:a=>{r.index.__f__("error","at api/file.js:42","网络请求失败:",a),o(new Error("网络请求失败"))}})}),s=e=>e&&e.data?{objectKey:e.data.object_key,url:e.data.url,cover:e.data.cover,isVideo:e.data.is_video}:null;exports.getUploadResult=s;exports.uploadFile=l;
//# sourceMappingURL=../../.sourcemap/mp-weixin/api/file.js.map
