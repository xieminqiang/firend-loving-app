"use strict";const n=require("../../../../common/vendor.js"),u=require("./props.js"),h=require("../../libs/mixin/mpMixin.js"),d=require("../../libs/mixin/mixin.js"),t=require("../../libs/function/index.js"),c={name:"u-input",mixins:[h.mpMixin,d.mixin,u.props],data(){return{clearInput:!1,innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}},created(){this.formatter&&(this.innerFormatter=this.formatter)},watch:{modelValue:{immediate:!0,handler(e,s){if(this.changeFromInner||this.innerValue===e){this.changeFromInner=!1;return}this.innerValue=e,this.firstChange===!1&&this.changeFromInner===!1?this.valueChange(this.innerValue,!0):this.firstChange||t.formValidate(this,"change"),this.firstChange=!1,this.changeFromInner=!1}}},computed:{isShowClear(){const{clearable:e,readonly:s,focused:a,innerValue:o}=this;return!!e&&!s&&!!a&&o!==""},inputClass(){let e=[],{border:s,disabled:a,shape:o}=this;return s==="surround"&&(e=e.concat(["u-border","u-input--radius"])),e.push(`u-input--${o}`),s==="bottom"&&(e=e.concat(["u-border-bottom","u-input--no-radius"])),e.join(" ")},wrapperStyle(){const e={};return this.disabled&&(e.backgroundColor=this.disabledColor),this.border==="none"?e.padding="0":(e.paddingTop="6px",e.paddingBottom="6px",e.paddingLeft="9px",e.paddingRight="9px"),t.deepMerge(e,t.addStyle(this.customStyle))},inputStyle(){return{color:this.color,fontSize:t.addUnit(this.fontSize),textAlign:this.inputAlign}}},emits:["update:modelValue","focus","blur","change","confirm","clear","keyboardheightchange","nicknamereview"],methods:{setFormatter(e){this.innerFormatter=e},onInput(e){let{value:s=""}=e.detail||{};this.innerValue=s,this.$nextTick(()=>{let a=this.innerFormatter(s);this.innerValue=a,this.valueChange(a)})},onBlur(e){this.$emit("blur",e.detail.value),t.sleep(150).then(()=>{this.focused=!1}),t.formValidate(this,"blur")},onFocus(e){this.focused=!0,this.$emit("focus")},doFocus(){this.$refs["input-native"].focus()},doBlur(){this.$refs["input-native"].blur()},onConfirm(e){this.$emit("confirm",this.innerValue)},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},onnicknamereview(e){this.$emit("nicknamereview",e)},valueChange(e,s=!1){this.clearInput&&(this.innerValue="",this.clearInput=!1),this.$nextTick(()=>{(!s||this.clearInput)&&(this.changeFromInner=!0,this.$emit("change",e),this.$emit("update:modelValue",e)),t.formValidate(this,"change")})},onClear(){this.clearInput=!0,this.innerValue="",this.$nextTick(()=>{this.valueChange(""),this.$emit("clear")})},clickHandler(){(this.disabled||this.readonly)&&n.index.hideKeyboard()}}};Array||n.resolveComponent("u-icon")();const f=()=>"../u-icon/u-icon.js";Math||f();function m(e,s,a,o,l,i){return n.e({a:e.prefixIcon||e.$slots.prefix},e.prefixIcon||e.$slots.prefix?{b:n.p({name:e.prefixIcon,size:"18",customStyle:e.prefixIconStyle})}:{},{c:n.s(i.inputStyle),d:e.type,e:e.focus,f:e.cursor,g:l.innerValue,h:e.autoBlur,i:e.disabled||e.readonly,j:e.maxlength,k:e.placeholder,l:e.placeholderStyle,m:e.placeholderClass,n:e.confirmType,o:e.confirmHold,p:e.holdKeyboard,q:e.cursorColor,r:e.cursorSpacing,s:e.adjustPosition,t:e.selectionEnd,v:e.selectionStart,w:e.password||e.type==="password"||!1,x:e.ignoreCompositionEvent,y:n.o((...r)=>i.onInput&&i.onInput(...r)),z:n.o((...r)=>i.onBlur&&i.onBlur(...r)),A:n.o((...r)=>i.onFocus&&i.onFocus(...r)),B:n.o((...r)=>i.onConfirm&&i.onConfirm(...r)),C:n.o((...r)=>i.onkeyboardheightchange&&i.onkeyboardheightchange(...r)),D:n.o((...r)=>i.onnicknamereview&&i.onnicknamereview(...r)),E:n.o((...r)=>i.clickHandler&&i.clickHandler(...r)),F:i.isShowClear},i.isShowClear?{G:n.p({name:"close",size:"11",color:"#ffffff",customStyle:"line-height: 12px"}),H:n.o((...r)=>i.onClear&&i.onClear(...r))}:{},{I:e.suffixIcon||e.$slots.suffix},e.suffixIcon||e.$slots.suffix?{J:n.p({name:e.suffixIcon,size:"18",customStyle:e.suffixIconStyle})}:{},{K:n.n(i.inputClass),L:n.s(i.wrapperStyle)})}const p=n._export_sfc(c,[["render",m],["__scopeId","data-v-df79975b"]]);wx.createComponent(p);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uview-plus/components/u-input/u-input.js.map
