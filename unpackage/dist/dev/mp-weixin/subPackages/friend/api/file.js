"use strict";const r=require("../../../common/vendor.js");require("../../../config/http.js");const s=require("../../../config/config.js"),n=s.config.development.baseUrl,d=e=>new Promise((t,o)=>{r.index.__f__("log","at subPackages/friend/api/file.js:18","开始上传文件:",e),r.index.__f__("log","at subPackages/friend/api/file.js:20","开始上传文件:eeee",n+"/file/upload"),r.index.uploadFile({url:n+"/file/upload",filePath:e.filePath,name:"file",header:{Authorization:r.index.getStorageSync("token")||""},success:i=>{try{const a=JSON.parse(i.data);a.code===0?t(a):o(new Error(a.message||"上传失败"))}catch(a){r.index.__f__("error","at subPackages/friend/api/file.js:37","响应数据解析失败:",a,i.data),o(new Error("响应数据解析失败"))}},fail:i=>{r.index.__f__("error","at subPackages/friend/api/file.js:42","网络请求失败:",i),o(new Error("网络请求失败"))}})}),c=e=>e&&e.data?{objectKey:e.data.object_key,url:e.data.url,cover:e.data.cover,isVideo:e.data.is_video}:null;exports.getUploadResult=c;exports.uploadFile=d;
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/subPackages/friend/api/file.js.map
