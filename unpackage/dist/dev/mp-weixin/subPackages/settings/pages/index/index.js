"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../common/assets.js"),_=require("../../../../stores/user.js"),x=require("../../../../stores/level.js");require("../../../../config/http.js");const v={__name:"index",setup(f){const t=_.useUserStore(),r=x.useLevelStore(),s=e.computed(()=>t.userInfo&&Object.keys(t.userInfo).length>0),a=e.computed(()=>t.userInfo||{}),c=n=>{e.index.__f__("log","at subPackages/settings/pages/index/index.vue:105","设置页面收到登录成功事件:",n)};e.onMounted(()=>{e.index.$on("loginSuccess",c)}),e.onUnmounted(()=>{e.index.$off("loginSuccess",c)}),e.onLoad(async()=>{var n,i;e.index.__f__("log","at subPackages/settings/pages/index/index.vue:120","设置页面载入"),e.index.__f__("log","at subPackages/settings/pages/index/index.vue:121","当前用户信息:",t.userInfo),e.index.__f__("log","at subPackages/settings/pages/index/index.vue:122","登录状态:",s.value),e.index.__f__("log","at subPackages/settings/pages/index/index.vue:123","用户昵称:",(n=a.value)==null?void 0:n.nickname),e.index.__f__("log","at subPackages/settings/pages/index/index.vue:124","用户头像:",(i=a.value)==null?void 0:i.avatar)});const u=()=>{if(!s.value){e.index.showModal({title:"提示",content:"请先登录后再设置头像",confirmText:"去登录",cancelText:"取消",success:n=>{n.confirm&&e.index.navigateTo({url:"/subPackages/login/index"})}});return}e.index.navigateTo({url:"/subPackages/settings/pages/index/edit"})},g=()=>{e.index.navigateTo({url:"/subPackages/login/policy"})},d=()=>{e.index.navigateTo({url:"/subPackages/login/agreement"})},l=()=>{e.index.showModal({title:"提示",content:"确认退出账号？",success:async function(n){n.confirm&&(t.clearUserInfo(),r.clearServiceLevels(),e.index.$emit("logoutSuccess"),e.index.showToast({title:"已退出登录",icon:"success"}),setTimeout(()=>{e.index.navigateBack({delta:1})},1e3))}})};return(n,i)=>e.e({a:s.value},s.value?e.e({b:a.value.head_img},a.value.head_img?{c:n.$imgBaseUrl+a.value.head_img}:{},{d:o._imports_0$2,e:e.o(u)}):{},{f:s.value},s.value?{g:e.t(a.value.nick_name||"未设置昵称"),h:o._imports_0$2,i:e.o(u)}:{},{j:o._imports_0$2,k:e.o(g),l:o._imports_0$2,m:e.o(d),n:s.value},s.value?{o:e.o(l)}:{})}},m=e._export_sfc(v,[["__scopeId","data-v-0dc70dea"]]);wx.createPage(m);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/subPackages/settings/pages/index/index.js.map
