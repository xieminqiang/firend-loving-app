"use strict";const e=require("../../common/vendor.js"),y=require("../../api/user.js"),w={__name:"detail",setup(P){const o=e.ref([]),c=e.ref(1),i=e.ref(20),s=e.ref(!1),r=e.ref(!1),u=e.ref(!0),g=async()=>{var t;r.value=!0;try{const n=await y.getBalanceLogs({page:c.value,page_size:i.value});if(n.data&&n.data.code===0){const a=((t=n.data.data)==null?void 0:t.list)||[];c.value===1?o.value=a:o.value=[...o.value,...a],e.index.__f__("log","at subPackages/balance/detail.vue:103","余额明细:",o.value),u.value=a.length===i.value}else u.value=!1}catch(n){e.index.__f__("error","at subPackages/balance/detail.vue:109","获取余额明细失败:",n)}finally{r.value=!1}},d=async()=>{s.value=!0;try{c.value=1,await g()}catch{e.index.showToast({title:"刷新失败",icon:"none",duration:1500})}finally{s.value=!1}},_=async()=>{r.value||!u.value||(c.value++,await g())},h=t=>{e.index.navigateTo({url:`/subPackages/balance/detaril-re?data=${encodeURIComponent(JSON.stringify(t))}`})},p=t=>!t&&t!==0?"0.00":(t/100).toFixed(2),m=t=>{if(!t)return"";const n=new Date(t),a=n.getFullYear(),l=(n.getMonth()+1).toString(),v=n.getDate().toString(),f=n.getHours().toString().padStart(2,"0"),b=n.getMinutes().toString().padStart(2,"0");return`${a}年${l}月${v}日 ${f}:${b}`};return e.onMounted(()=>{g()}),(t,n)=>e.e({a:e.f(o.value,(a,l,v)=>({a:a.change_amount>0?"/static/icons/common/chongzhi.png":"/static/icons/common/koukuan.png",b:e.t(a.remark||""),c:e.t(m(a.created_at)),d:e.t(a.change_amount>0?"+":""),e:e.t(p(a.change_amount)),f:a.change_amount>0?1:"",g:a.change_amount<0?1:"",h:l,i:e.o(f=>h(a),l)})),b:u.value&&!r.value},u.value&&!r.value?{}:{},{c:r.value&&c.value>1},r.value&&c.value>1?{}:{},{d:!u.value&&o.value.length>0},!u.value&&o.value.length>0?{}:{},{e:o.value.length===0&&!r.value},o.value.length===0&&!r.value?{}:{},{f:s.value,g:e.o(d),h:e.o(_)})}},x=e._export_sfc(w,[["__scopeId","data-v-3cd5bc87"]]);wx.createPage(x);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/subPackages/balance/detail.js.map
