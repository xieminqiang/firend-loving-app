"use strict";const e=require("../../common/vendor.js"),S=require("../../common/assets.js"),b=require("../../api/user.js"),R={__name:"record",setup(x){const n=e.ref([]),u=e.ref(1),i=e.ref(20),c=e.ref(!1),o=e.ref(!1),s=e.ref(!0),v=async()=>{var t;o.value=!0;try{const r=await b.getWithdrawRecords({page:u.value,page_size:i.value});if(r.data&&r.data.code===0){const a=((t=r.data.data)==null?void 0:t.list)||[];u.value===1?n.value=a:n.value=[...n.value,...a],e.index.__f__("log","at subPackages/balance/record.vue:109","提现记录:",n.value),s.value=a.length===i.value}else s.value=!1}catch(r){e.index.__f__("error","at subPackages/balance/record.vue:115","获取提现记录失败:",r)}finally{o.value=!1}},_=async()=>{c.value=!0;try{u.value=1,await v()}catch{e.index.showToast({title:"刷新失败",icon:"none",duration:1500})}finally{c.value=!1}},g=async()=>{o.value||!s.value||(u.value++,await v())},h=t=>{e.index.navigateTo({url:`/subPackages/balance/record-detail?data=${encodeURIComponent(JSON.stringify(t))}`})},p=t=>!t&&t!==0?"0.00":(t/100).toFixed(2),w=t=>{if(!t)return"";const r=new Date(t),a=r.getFullYear(),l=(r.getMonth()+1).toString(),d=r.getDate().toString(),f=r.getHours().toString().padStart(2,"0"),y=r.getMinutes().toString().padStart(2,"0");return`${a}年${l}月${d}日 ${f}:${y}`};return e.onMounted(()=>{v()}),(t,r)=>e.e({a:e.f(n.value,(a,l,d)=>e.e({a:e.t(w(a.created_at)),b:e.t(p(a.amount)),c:a.transfer_state==="FAIL"&&a.fail_reason==="OVERDUE_CLOSE"},a.transfer_state==="FAIL"&&a.fail_reason==="OVERDUE_CLOSE"?{}:a.transfer_state==="FAIL"?{}:{e:e.t(a.transfer_state_desc||"")},{d:a.transfer_state==="FAIL",f:l,g:e.o(f=>h(a),l)})),b:S._imports_0$11,c:s.value&&!o.value},s.value&&!o.value?{}:{},{d:o.value&&u.value>1},o.value&&u.value>1?{}:{},{e:!s.value&&n.value.length>0},!s.value&&n.value.length>0?{}:{},{f:n.value.length===0&&!o.value},n.value.length===0&&!o.value?{}:{},{g:c.value,h:e.o(_),i:e.o(g)})}},$=e._export_sfc(R,[["__scopeId","data-v-e3fcd130"]]);wx.createPage($);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/subPackages/balance/record.js.map
